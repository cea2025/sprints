function Qx(s,l){for(var o=0;o<l.length;o++){const c=l[o];if(typeof c!="string"&&!Array.isArray(c)){for(const h in c)if(h!=="default"&&!(h in s)){const x=Object.getOwnPropertyDescriptor(c,h);x&&Object.defineProperty(s,h,x.get?x:{enumerable:!0,get:()=>c[h]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const x of h)if(x.type==="childList")for(const m of x.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(h){const x={};return h.integrity&&(x.integrity=h.integrity),h.referrerPolicy&&(x.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?x.credentials="include":h.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function c(h){if(h.ep)return;h.ep=!0;const x=o(h);fetch(h.href,x)}})();function h0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var eo={exports:{}},ks={},to={exports:{}},Ce={};var ku;function Gx(){if(ku)return Ce;ku=1;var s=Symbol.for("react.element"),l=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),m=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),j=Symbol.iterator;function T(p){return p===null||typeof p!="object"?null:(p=j&&p[j]||p["@@iterator"],typeof p=="function"?p:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,z={};function E(p,H,ae){this.props=p,this.context=H,this.refs=z,this.updater=ae||O}E.prototype.isReactComponent={},E.prototype.setState=function(p,H){if(typeof p!="object"&&typeof p!="function"&&p!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,p,H,"setState")},E.prototype.forceUpdate=function(p){this.updater.enqueueForceUpdate(this,p,"forceUpdate")};function V(){}V.prototype=E.prototype;function C(p,H,ae){this.props=p,this.context=H,this.refs=z,this.updater=ae||O}var k=C.prototype=new V;k.constructor=C,L(k,E.prototype),k.isPureReactComponent=!0;var P=Array.isArray,Y=Object.prototype.hasOwnProperty,B={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function Q(p,H,ae){var me,pe={},fe=null,we=null;if(H!=null)for(me in H.ref!==void 0&&(we=H.ref),H.key!==void 0&&(fe=""+H.key),H)Y.call(H,me)&&!ee.hasOwnProperty(me)&&(pe[me]=H[me]);var F=arguments.length-2;if(F===1)pe.children=ae;else if(1<F){for(var R=Array(F),ue=0;ue<F;ue++)R[ue]=arguments[ue+2];pe.children=R}if(p&&p.defaultProps)for(me in F=p.defaultProps,F)pe[me]===void 0&&(pe[me]=F[me]);return{$$typeof:s,type:p,key:fe,ref:we,props:pe,_owner:B.current}}function ie(p,H){return{$$typeof:s,type:p.type,key:H,ref:p.ref,props:p.props,_owner:p._owner}}function ce(p){return typeof p=="object"&&p!==null&&p.$$typeof===s}function W(p){var H={"=":"=0",":":"=2"};return"$"+p.replace(/[=:]/g,function(ae){return H[ae]})}var v=/\/+/g;function A(p,H){return typeof p=="object"&&p!==null&&p.key!=null?W(""+p.key):H.toString(36)}function te(p,H,ae,me,pe){var fe=typeof p;(fe==="undefined"||fe==="boolean")&&(p=null);var we=!1;if(p===null)we=!0;else switch(fe){case"string":case"number":we=!0;break;case"object":switch(p.$$typeof){case s:case l:we=!0}}if(we)return we=p,pe=pe(we),p=me===""?"."+A(we,0):me,P(pe)?(ae="",p!=null&&(ae=p.replace(v,"$&/")+"/"),te(pe,H,ae,"",function(ue){return ue})):pe!=null&&(ce(pe)&&(pe=ie(pe,ae+(!pe.key||we&&we.key===pe.key?"":(""+pe.key).replace(v,"$&/")+"/")+p)),H.push(pe)),1;if(we=0,me=me===""?".":me+":",P(p))for(var F=0;F<p.length;F++){fe=p[F];var R=me+A(fe,F);we+=te(fe,H,ae,R,pe)}else if(R=T(p),typeof R=="function")for(p=R.call(p),F=0;!(fe=p.next()).done;)fe=fe.value,R=me+A(fe,F++),we+=te(fe,H,ae,R,pe);else if(fe==="object")throw H=String(p),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return we}function xe(p,H,ae){if(p==null)return p;var me=[],pe=0;return te(p,me,"","",function(fe){return H.call(ae,fe,pe++)}),me}function Se(p){if(p._status===-1){var H=p._result;H=H(),H.then(function(ae){(p._status===0||p._status===-1)&&(p._status=1,p._result=ae)},function(ae){(p._status===0||p._status===-1)&&(p._status=2,p._result=ae)}),p._status===-1&&(p._status=0,p._result=H)}if(p._status===1)return p._result.default;throw p._result}var je={current:null},G={transition:null},ne={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:G,ReactCurrentOwner:B};function D(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:xe,forEach:function(p,H,ae){xe(p,function(){H.apply(this,arguments)},ae)},count:function(p){var H=0;return xe(p,function(){H++}),H},toArray:function(p){return xe(p,function(H){return H})||[]},only:function(p){if(!ce(p))throw Error("React.Children.only expected to receive a single React element child.");return p}},Ce.Component=E,Ce.Fragment=o,Ce.Profiler=h,Ce.PureComponent=C,Ce.StrictMode=c,Ce.Suspense=w,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Ce.act=D,Ce.cloneElement=function(p,H,ae){if(p==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+p+".");var me=L({},p.props),pe=p.key,fe=p.ref,we=p._owner;if(H!=null){if(H.ref!==void 0&&(fe=H.ref,we=B.current),H.key!==void 0&&(pe=""+H.key),p.type&&p.type.defaultProps)var F=p.type.defaultProps;for(R in H)Y.call(H,R)&&!ee.hasOwnProperty(R)&&(me[R]=H[R]===void 0&&F!==void 0?F[R]:H[R])}var R=arguments.length-2;if(R===1)me.children=ae;else if(1<R){F=Array(R);for(var ue=0;ue<R;ue++)F[ue]=arguments[ue+2];me.children=F}return{$$typeof:s,type:p.type,key:pe,ref:fe,props:me,_owner:we}},Ce.createContext=function(p){return p={$$typeof:m,_currentValue:p,_currentValue2:p,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},p.Provider={$$typeof:x,_context:p},p.Consumer=p},Ce.createElement=Q,Ce.createFactory=function(p){var H=Q.bind(null,p);return H.type=p,H},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(p){return{$$typeof:f,render:p}},Ce.isValidElement=ce,Ce.lazy=function(p){return{$$typeof:b,_payload:{_status:-1,_result:p},_init:Se}},Ce.memo=function(p,H){return{$$typeof:M,type:p,compare:H===void 0?null:H}},Ce.startTransition=function(p){var H=G.transition;G.transition={};try{p()}finally{G.transition=H}},Ce.unstable_act=D,Ce.useCallback=function(p,H){return je.current.useCallback(p,H)},Ce.useContext=function(p){return je.current.useContext(p)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(p){return je.current.useDeferredValue(p)},Ce.useEffect=function(p,H){return je.current.useEffect(p,H)},Ce.useId=function(){return je.current.useId()},Ce.useImperativeHandle=function(p,H,ae){return je.current.useImperativeHandle(p,H,ae)},Ce.useInsertionEffect=function(p,H){return je.current.useInsertionEffect(p,H)},Ce.useLayoutEffect=function(p,H){return je.current.useLayoutEffect(p,H)},Ce.useMemo=function(p,H){return je.current.useMemo(p,H)},Ce.useReducer=function(p,H,ae){return je.current.useReducer(p,H,ae)},Ce.useRef=function(p){return je.current.useRef(p)},Ce.useState=function(p){return je.current.useState(p)},Ce.useSyncExternalStore=function(p,H,ae){return je.current.useSyncExternalStore(p,H,ae)},Ce.useTransition=function(){return je.current.useTransition()},Ce.version="18.3.1",Ce}var ju;function ko(){return ju||(ju=1,to.exports=Gx()),to.exports}var wu;function Kx(){if(wu)return ks;wu=1;var s=ko(),l=Symbol.for("react.element"),o=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,h=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function m(f,w,M){var b,j={},T=null,O=null;M!==void 0&&(T=""+M),w.key!==void 0&&(T=""+w.key),w.ref!==void 0&&(O=w.ref);for(b in w)c.call(w,b)&&!x.hasOwnProperty(b)&&(j[b]=w[b]);if(f&&f.defaultProps)for(b in w=f.defaultProps,w)j[b]===void 0&&(j[b]=w[b]);return{$$typeof:l,type:f,key:T,ref:O,props:j,_owner:h.current}}return ks.Fragment=o,ks.jsx=m,ks.jsxs=m,ks}var Nu;function Xx(){return Nu||(Nu=1,eo.exports=Kx()),eo.exports}var t=Xx(),g=ko();const jo=h0(g),Yx=Qx({__proto__:null,default:jo},[g]);var Hn={},ro={exports:{}},gt={},ao={exports:{}},so={};var Su;function Jx(){return Su||(Su=1,(function(s){function l(G,ne){var D=G.length;G.push(ne);e:for(;0<D;){var p=D-1>>>1,H=G[p];if(0<h(H,ne))G[p]=ne,G[D]=H,D=p;else break e}}function o(G){return G.length===0?null:G[0]}function c(G){if(G.length===0)return null;var ne=G[0],D=G.pop();if(D!==ne){G[0]=D;e:for(var p=0,H=G.length,ae=H>>>1;p<ae;){var me=2*(p+1)-1,pe=G[me],fe=me+1,we=G[fe];if(0>h(pe,D))fe<H&&0>h(we,pe)?(G[p]=we,G[fe]=D,p=fe):(G[p]=pe,G[me]=D,p=me);else if(fe<H&&0>h(we,D))G[p]=we,G[fe]=D,p=fe;else break e}}return ne}function h(G,ne){var D=G.sortIndex-ne.sortIndex;return D!==0?D:G.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;s.unstable_now=function(){return x.now()}}else{var m=Date,f=m.now();s.unstable_now=function(){return m.now()-f}}var w=[],M=[],b=1,j=null,T=3,O=!1,L=!1,z=!1,E=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var ne=o(M);ne!==null;){if(ne.callback===null)c(M);else if(ne.startTime<=G)c(M),ne.sortIndex=ne.expirationTime,l(w,ne);else break;ne=o(M)}}function P(G){if(z=!1,k(G),!L)if(o(w)!==null)L=!0,Se(Y);else{var ne=o(M);ne!==null&&je(P,ne.startTime-G)}}function Y(G,ne){L=!1,z&&(z=!1,V(Q),Q=-1),O=!0;var D=T;try{for(k(ne),j=o(w);j!==null&&(!(j.expirationTime>ne)||G&&!W());){var p=j.callback;if(typeof p=="function"){j.callback=null,T=j.priorityLevel;var H=p(j.expirationTime<=ne);ne=s.unstable_now(),typeof H=="function"?j.callback=H:j===o(w)&&c(w),k(ne)}else c(w);j=o(w)}if(j!==null)var ae=!0;else{var me=o(M);me!==null&&je(P,me.startTime-ne),ae=!1}return ae}finally{j=null,T=D,O=!1}}var B=!1,ee=null,Q=-1,ie=5,ce=-1;function W(){return!(s.unstable_now()-ce<ie)}function v(){if(ee!==null){var G=s.unstable_now();ce=G;var ne=!0;try{ne=ee(!0,G)}finally{ne?A():(B=!1,ee=null)}}else B=!1}var A;if(typeof C=="function")A=function(){C(v)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,xe=te.port2;te.port1.onmessage=v,A=function(){xe.postMessage(null)}}else A=function(){E(v,0)};function Se(G){ee=G,B||(B=!0,A())}function je(G,ne){Q=E(function(){G(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_continueExecution=function(){L||O||(L=!0,Se(Y))},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_getFirstCallbackNode=function(){return o(w)},s.unstable_next=function(G){switch(T){case 1:case 2:case 3:var ne=3;break;default:ne=T}var D=T;T=ne;try{return G()}finally{T=D}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var D=T;T=G;try{return ne()}finally{T=D}},s.unstable_scheduleCallback=function(G,ne,D){var p=s.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?p+D:p):D=p,G){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=D+H,G={id:b++,callback:ne,priorityLevel:G,startTime:D,expirationTime:H,sortIndex:-1},D>p?(G.sortIndex=D,l(M,G),o(w)===null&&G===o(M)&&(z?(V(Q),Q=-1):z=!0,je(P,D-p))):(G.sortIndex=H,l(w,G),L||O||(L=!0,Se(Y))),G},s.unstable_shouldYield=W,s.unstable_wrapCallback=function(G){var ne=T;return function(){var D=T;T=ne;try{return G.apply(this,arguments)}finally{T=D}}}})(so)),so}var Cu;function Zx(){return Cu||(Cu=1,ao.exports=Jx()),ao.exports}var Eu;function eg(){if(Eu)return gt;Eu=1;var s=ko(),l=Zx();function o(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,h={};function x(e,r){m(e,r),m(e+"Capture",r)}function m(e,r){for(h[e]=r,e=0;e<r.length;e++)c.add(r[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},j={};function T(e){return w.call(j,e)?!0:w.call(b,e)?!1:M.test(e)?j[e]=!0:(b[e]=!0,!1)}function O(e,r,a,n){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return n?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L(e,r,a,n){if(r===null||typeof r>"u"||O(e,r,a,n))return!0;if(n)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function z(e,r,a,n,i,d,u){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=d,this.removeEmptyString=u}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new z(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];E[r]=new z(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new z(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new z(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new z(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new z(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new z(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new z(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new z(e,5,!1,e.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function C(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(V,C);E[r]=new z(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(V,C);E[r]=new z(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(V,C);E[r]=new z(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new z(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new z(e,1,!1,e.toLowerCase(),null,!0,!0)});function k(e,r,a,n){var i=E.hasOwnProperty(r)?E[r]:null;(i!==null?i.type!==0:n||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(L(r,a,i,n)&&(a=null),n||i===null?T(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):i.mustUseProperty?e[i.propertyName]=a===null?i.type===3?!1:"":a:(r=i.attributeName,n=i.attributeNamespace,a===null?e.removeAttribute(r):(i=i.type,a=i===3||i===4&&a===!0?"":""+a,n?e.setAttributeNS(n,r,a):e.setAttribute(r,a))))}var P=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),B=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),W=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),G=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var D=Object.assign,p;function H(e){if(p===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);p=r&&r[1]||""}return`
`+p+e}var ae=!1;function me(e,r){if(!e||ae)return"";ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(q){var n=q}Reflect.construct(e,[],r)}else{try{r.call()}catch(q){n=q}e.call(r.prototype)}else{try{throw Error()}catch(q){n=q}e()}}catch(q){if(q&&n&&typeof q.stack=="string"){for(var i=q.stack.split(`
`),d=n.stack.split(`
`),u=i.length-1,y=d.length-1;1<=u&&0<=y&&i[u]!==d[y];)y--;for(;1<=u&&0<=y;u--,y--)if(i[u]!==d[y]){if(u!==1||y!==1)do if(u--,y--,0>y||i[u]!==d[y]){var N=`
`+i[u].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=u&&0<=y);break}}}finally{ae=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?H(e):""}function pe(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=me(e.type,!1),e;case 11:return e=me(e.type.render,!1),e;case 1:return e=me(e.type,!0),e;default:return""}}function fe(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case B:return"Portal";case ie:return"Profiler";case Q:return"StrictMode";case A:return"Suspense";case te:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case W:return(e.displayName||"Context")+".Consumer";case ce:return(e._context.displayName||"Context")+".Provider";case v:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xe:return r=e.displayName||null,r!==null?r:fe(e.type)||"Memo";case Se:r=e._payload,e=e._init;try{return fe(e(r))}catch{}}return null}function we(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(r);case 8:return r===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function F(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function R(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ue(e){var r=R(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),n=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,d=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return i.call(this)},set:function(u){n=""+u,d.call(this,u)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Ne(e){e._valueTracker||(e._valueTracker=ue(e))}function Re(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),n="";return e&&(n=R(e)?e.checked?"true":"false":e.value),e=n,e!==a?(r.setValue(e),!0):!1}function Vt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $(e,r){var a=r.checked;return D({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function Te(e,r){var a=r.defaultValue==null?"":r.defaultValue,n=r.checked!=null?r.checked:r.defaultChecked;a=F(r.value!=null?r.value:a),e._wrapperState={initialChecked:n,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function pt(e,r){r=r.checked,r!=null&&k(e,"checked",r,!1)}function jt(e,r){pt(e,r);var a=F(r.value),n=r.type;if(a!=null)n==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?La(e,r.type,a):r.hasOwnProperty("defaultValue")&&La(e,r.type,F(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function Wt(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var n=r.type;if(!(n!=="submit"&&n!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function La(e,r,a){(r!=="number"||Vt(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var Dr=Array.isArray;function xr(e,r,a,n){if(e=e.options,r){r={};for(var i=0;i<a.length;i++)r["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=r.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&n&&(e[a].defaultSelected=!0)}else{for(a=""+F(a),r=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}r!==null||e[i].disabled||(r=e[i])}r!==null&&(r.selected=!0)}}function _a(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(o(91));return D({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rs(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(o(92));if(Dr(a)){if(1<a.length)throw Error(o(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:F(a)}}function Ds(e,r){var a=F(r.value),n=F(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),n!=null&&(e.defaultValue=""+n)}function Ls(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Jr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zr(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Jr(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var S,be=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,n,i){MSApp.execUnsafeLocalFunction(function(){return e(r,a,n,i)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(S=S||document.createElement("div"),S.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=S.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function ze(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var De={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gr=["Webkit","ms","Moz","O"];Object.keys(De).forEach(function(e){gr.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),De[r]=De[e]})});function ea(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||De.hasOwnProperty(e)&&De[e]?(""+r).trim():r+"px"}function Lo(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var n=a.indexOf("--")===0,i=ea(a,r[a],n);a==="float"&&(a="cssFloat"),n?e.setProperty(a,i):e[a]=i}}var J0=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hl(e,r){if(r){if(J0[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(o(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(o(61))}if(r.style!=null&&typeof r.style!="object")throw Error(o(62))}}function xl(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gl=null;function ml(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pl=null,ta=null,ra=null;function _o(e){if(e=ls(e)){if(typeof pl!="function")throw Error(o(280));var r=e.stateNode;r&&(r=ln(r),pl(e.stateNode,e.type,r))}}function $o(e){ta?ra?ra.push(e):ra=[e]:ta=e}function Fo(){if(ta){var e=ta,r=ra;if(ra=ta=null,_o(e),r)for(e=0;e<r.length;e++)_o(r[e])}}function Uo(e,r){return e(r)}function Bo(){}var fl=!1;function Vo(e,r,a){if(fl)return e(r,a);fl=!0;try{return Uo(e,r,a)}finally{fl=!1,(ta!==null||ra!==null)&&(Bo(),Fo())}}function $a(e,r){var a=e.stateNode;if(a===null)return null;var n=ln(a);if(n===null)return null;a=n[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,r,typeof a));return a}var yl=!1;if(f)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){yl=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{yl=!1}function Z0(e,r,a,n,i,d,u,y,N){var q=Array.prototype.slice.call(arguments,3);try{r.apply(a,q)}catch(X){this.onError(X)}}var Ua=!1,_s=null,$s=!1,vl=null,eh={onError:function(e){Ua=!0,_s=e}};function th(e,r,a,n,i,d,u,y,N){Ua=!1,_s=null,Z0.apply(eh,arguments)}function rh(e,r,a,n,i,d,u,y,N){if(th.apply(this,arguments),Ua){if(Ua){var q=_s;Ua=!1,_s=null}else throw Error(o(198));$s||($s=!0,vl=q)}}function Lr(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function Wo(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function qo(e){if(Lr(e)!==e)throw Error(o(188))}function ah(e){var r=e.alternate;if(!r){if(r=Lr(e),r===null)throw Error(o(188));return r!==e?null:e}for(var a=e,n=r;;){var i=a.return;if(i===null)break;var d=i.alternate;if(d===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===d.child){for(d=i.child;d;){if(d===a)return qo(i),e;if(d===n)return qo(i),r;d=d.sibling}throw Error(o(188))}if(a.return!==n.return)a=i,n=d;else{for(var u=!1,y=i.child;y;){if(y===a){u=!0,a=i,n=d;break}if(y===n){u=!0,n=i,a=d;break}y=y.sibling}if(!u){for(y=d.child;y;){if(y===a){u=!0,a=d,n=i;break}if(y===n){u=!0,n=d,a=i;break}y=y.sibling}if(!u)throw Error(o(189))}}if(a.alternate!==n)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:r}function Ho(e){return e=ah(e),e!==null?Qo(e):null}function Qo(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Qo(e);if(r!==null)return r;e=e.sibling}return null}var Go=l.unstable_scheduleCallback,Ko=l.unstable_cancelCallback,sh=l.unstable_shouldYield,nh=l.unstable_requestPaint,qe=l.unstable_now,lh=l.unstable_getCurrentPriorityLevel,bl=l.unstable_ImmediatePriority,Xo=l.unstable_UserBlockingPriority,Fs=l.unstable_NormalPriority,ih=l.unstable_LowPriority,Yo=l.unstable_IdlePriority,Us=null,qt=null;function oh(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Us,e,void 0,(e.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:uh,dh=Math.log,ch=Math.LN2;function uh(e){return e>>>=0,e===0?32:31-(dh(e)/ch|0)|0}var Bs=64,Vs=4194304;function Ba(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ws(e,r){var a=e.pendingLanes;if(a===0)return 0;var n=0,i=e.suspendedLanes,d=e.pingedLanes,u=a&268435455;if(u!==0){var y=u&~i;y!==0?n=Ba(y):(d&=u,d!==0&&(n=Ba(d)))}else u=a&~i,u!==0?n=Ba(u):d!==0&&(n=Ba(d));if(n===0)return 0;if(r!==0&&r!==n&&(r&i)===0&&(i=n&-n,d=r&-r,i>=d||i===16&&(d&4194240)!==0))return r;if((n&4)!==0&&(n|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=n;0<r;)a=31-Pt(r),i=1<<a,n|=e[a],r&=~i;return n}function hh(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xh(e,r){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,d=e.pendingLanes;0<d;){var u=31-Pt(d),y=1<<u,N=i[u];N===-1?((y&a)===0||(y&n)!==0)&&(i[u]=hh(y,r)):N<=r&&(e.expiredLanes|=y),d&=~y}}function kl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jo(){var e=Bs;return Bs<<=1,(Bs&4194240)===0&&(Bs=64),e}function jl(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Va(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Pt(r),e[r]=a}function gh(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<a;){var i=31-Pt(a),d=1<<i;r[i]=0,n[i]=-1,e[i]=-1,a&=~d}}function wl(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var n=31-Pt(a),i=1<<n;i&r|e[n]&r&&(e[n]|=r),a&=~i}}var Oe=0;function Zo(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ed,Nl,td,rd,ad,Sl=!1,qs=[],mr=null,pr=null,fr=null,Wa=new Map,qa=new Map,yr=[],mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sd(e,r){switch(e){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Wa.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":qa.delete(r.pointerId)}}function Ha(e,r,a,n,i,d){return e===null||e.nativeEvent!==d?(e={blockedOn:r,domEventName:a,eventSystemFlags:n,nativeEvent:d,targetContainers:[i]},r!==null&&(r=ls(r),r!==null&&Nl(r)),e):(e.eventSystemFlags|=n,r=e.targetContainers,i!==null&&r.indexOf(i)===-1&&r.push(i),e)}function ph(e,r,a,n,i){switch(r){case"focusin":return mr=Ha(mr,e,r,a,n,i),!0;case"dragenter":return pr=Ha(pr,e,r,a,n,i),!0;case"mouseover":return fr=Ha(fr,e,r,a,n,i),!0;case"pointerover":var d=i.pointerId;return Wa.set(d,Ha(Wa.get(d)||null,e,r,a,n,i)),!0;case"gotpointercapture":return d=i.pointerId,qa.set(d,Ha(qa.get(d)||null,e,r,a,n,i)),!0}return!1}function nd(e){var r=_r(e.target);if(r!==null){var a=Lr(r);if(a!==null){if(r=a.tag,r===13){if(r=Wo(a),r!==null){e.blockedOn=r,ad(e.priority,function(){td(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hs(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=El(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);gl=n,a.target.dispatchEvent(n),gl=null}else return r=ls(a),r!==null&&Nl(r),e.blockedOn=a,!1;r.shift()}return!0}function ld(e,r,a){Hs(e)&&a.delete(r)}function fh(){Sl=!1,mr!==null&&Hs(mr)&&(mr=null),pr!==null&&Hs(pr)&&(pr=null),fr!==null&&Hs(fr)&&(fr=null),Wa.forEach(ld),qa.forEach(ld)}function Qa(e,r){e.blockedOn===r&&(e.blockedOn=null,Sl||(Sl=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,fh)))}function Ga(e){function r(i){return Qa(i,e)}if(0<qs.length){Qa(qs[0],e);for(var a=1;a<qs.length;a++){var n=qs[a];n.blockedOn===e&&(n.blockedOn=null)}}for(mr!==null&&Qa(mr,e),pr!==null&&Qa(pr,e),fr!==null&&Qa(fr,e),Wa.forEach(r),qa.forEach(r),a=0;a<yr.length;a++)n=yr[a],n.blockedOn===e&&(n.blockedOn=null);for(;0<yr.length&&(a=yr[0],a.blockedOn===null);)nd(a),a.blockedOn===null&&yr.shift()}var aa=P.ReactCurrentBatchConfig,Qs=!0;function yh(e,r,a,n){var i=Oe,d=aa.transition;aa.transition=null;try{Oe=1,Cl(e,r,a,n)}finally{Oe=i,aa.transition=d}}function vh(e,r,a,n){var i=Oe,d=aa.transition;aa.transition=null;try{Oe=4,Cl(e,r,a,n)}finally{Oe=i,aa.transition=d}}function Cl(e,r,a,n){if(Qs){var i=El(e,r,a,n);if(i===null)Wl(e,r,n,Gs,a),sd(e,n);else if(ph(i,e,r,a,n))n.stopPropagation();else if(sd(e,n),r&4&&-1<mh.indexOf(e)){for(;i!==null;){var d=ls(i);if(d!==null&&ed(d),d=El(e,r,a,n),d===null&&Wl(e,r,n,Gs,a),d===i)break;i=d}i!==null&&n.stopPropagation()}else Wl(e,r,n,null,a)}}var Gs=null;function El(e,r,a,n){if(Gs=null,e=ml(n),e=_r(e),e!==null)if(r=Lr(e),r===null)e=null;else if(a=r.tag,a===13){if(e=Wo(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Gs=e,null}function id(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lh()){case bl:return 1;case Xo:return 4;case Fs:case ih:return 16;case Yo:return 536870912;default:return 16}default:return 16}}var vr=null,Ml=null,Ks=null;function od(){if(Ks)return Ks;var e,r=Ml,a=r.length,n,i="value"in vr?vr.value:vr.textContent,d=i.length;for(e=0;e<a&&r[e]===i[e];e++);var u=a-e;for(n=1;n<=u&&r[a-n]===i[d-n];n++);return Ks=i.slice(e,1<n?1-n:void 0)}function Xs(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ys(){return!0}function dd(){return!1}function ft(e){function r(a,n,i,d,u){this._reactName=a,this._targetInst=i,this.type=n,this.nativeEvent=d,this.target=u,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(d):d[y]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ys:dd,this.isPropagationStopped=dd,this}return D(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),r}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=ft(sa),Ka=D({},sa,{view:0,detail:0}),bh=ft(Ka),Al,Tl,Xa,Js=D({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xa&&(Xa&&e.type==="mousemove"?(Al=e.screenX-Xa.screenX,Tl=e.screenY-Xa.screenY):Tl=Al=0,Xa=e),Al)},movementY:function(e){return"movementY"in e?e.movementY:Tl}}),cd=ft(Js),kh=D({},Js,{dataTransfer:0}),jh=ft(kh),wh=D({},Ka,{relatedTarget:0}),Ol=ft(wh),Nh=D({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),Sh=ft(Nh),Ch=D({},sa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Eh=ft(Ch),Mh=D({},sa,{data:0}),ud=ft(Mh),Ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ah={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oh(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Th[e])?!!r[e]:!1}function zl(){return Oh}var zh=D({},Ka,{key:function(e){if(e.key){var r=Ih[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ah[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(e){return e.type==="keypress"?Xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ph=ft(zh),Rh=D({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hd=ft(Rh),Dh=D({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),Lh=ft(Dh),_h=D({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),$h=ft(_h),Fh=D({},Js,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Uh=ft(Fh),Bh=[9,13,27,32],Pl=f&&"CompositionEvent"in window,Ya=null;f&&"documentMode"in document&&(Ya=document.documentMode);var Vh=f&&"TextEvent"in window&&!Ya,xd=f&&(!Pl||Ya&&8<Ya&&11>=Ya),gd=" ",md=!1;function pd(e,r){switch(e){case"keyup":return Bh.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var na=!1;function Wh(e,r){switch(e){case"compositionend":return fd(r);case"keypress":return r.which!==32?null:(md=!0,gd);case"textInput":return e=r.data,e===gd&&md?null:e;default:return null}}function qh(e,r){if(na)return e==="compositionend"||!Pl&&pd(e,r)?(e=od(),Ks=Ml=vr=null,na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xd&&r.locale!=="ko"?null:r.data;default:return null}}var Hh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yd(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Hh[e.type]:r==="textarea"}function vd(e,r,a,n){$o(n),r=an(r,"onChange"),0<r.length&&(a=new Il("onChange","change",null,a,n),e.push({event:a,listeners:r}))}var Ja=null,Za=null;function Qh(e){Ld(e,0)}function Zs(e){var r=ca(e);if(Re(r))return e}function Gh(e,r){if(e==="change")return r}var bd=!1;if(f){var Rl;if(f){var Dl="oninput"in document;if(!Dl){var kd=document.createElement("div");kd.setAttribute("oninput","return;"),Dl=typeof kd.oninput=="function"}Rl=Dl}else Rl=!1;bd=Rl&&(!document.documentMode||9<document.documentMode)}function jd(){Ja&&(Ja.detachEvent("onpropertychange",wd),Za=Ja=null)}function wd(e){if(e.propertyName==="value"&&Zs(Za)){var r=[];vd(r,Za,e,ml(e)),Vo(Qh,r)}}function Kh(e,r,a){e==="focusin"?(jd(),Ja=r,Za=a,Ja.attachEvent("onpropertychange",wd)):e==="focusout"&&jd()}function Xh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zs(Za)}function Yh(e,r){if(e==="click")return Zs(r)}function Jh(e,r){if(e==="input"||e==="change")return Zs(r)}function Zh(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Rt=typeof Object.is=="function"?Object.is:Zh;function es(e,r){if(Rt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),n=Object.keys(r);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!w.call(r,i)||!Rt(e[i],r[i]))return!1}return!0}function Nd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sd(e,r){var a=Nd(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=r&&n>=r)return{node:a,offset:r-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Nd(a)}}function Cd(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Cd(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Ed(){for(var e=window,r=Vt();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=Vt(e.document)}return r}function Ll(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function ex(e){var r=Ed(),a=e.focusedElem,n=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&Cd(a.ownerDocument.documentElement,a)){if(n!==null&&Ll(a)){if(r=n.start,e=n.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var i=a.textContent.length,d=Math.min(n.start,i);n=n.end===void 0?d:Math.min(n.end,i),!e.extend&&d>n&&(i=n,n=d,d=i),i=Sd(a,d);var u=Sd(a,n);i&&u&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(r=r.createRange(),r.setStart(i.node,i.offset),e.removeAllRanges(),d>n?(e.addRange(r),e.extend(u.node,u.offset)):(r.setEnd(u.node,u.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tx=f&&"documentMode"in document&&11>=document.documentMode,la=null,_l=null,ts=null,$l=!1;function Md(e,r,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$l||la==null||la!==Vt(n)||(n=la,"selectionStart"in n&&Ll(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ts&&es(ts,n)||(ts=n,n=an(_l,"onSelect"),0<n.length&&(r=new Il("onSelect","select",null,r,a),e.push({event:r,listeners:n}),r.target=la)))}function en(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var ia={animationend:en("Animation","AnimationEnd"),animationiteration:en("Animation","AnimationIteration"),animationstart:en("Animation","AnimationStart"),transitionend:en("Transition","TransitionEnd")},Fl={},Id={};f&&(Id=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function tn(e){if(Fl[e])return Fl[e];if(!ia[e])return e;var r=ia[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Id)return Fl[e]=r[a];return e}var Ad=tn("animationend"),Td=tn("animationiteration"),Od=tn("animationstart"),zd=tn("transitionend"),Pd=new Map,Rd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(e,r){Pd.set(e,r),x(r,[e])}for(var Ul=0;Ul<Rd.length;Ul++){var Bl=Rd[Ul],rx=Bl.toLowerCase(),ax=Bl[0].toUpperCase()+Bl.slice(1);br(rx,"on"+ax)}br(Ad,"onAnimationEnd"),br(Td,"onAnimationIteration"),br(Od,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(zd,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),x("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),x("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),x("onBeforeInput",["compositionend","keypress","textInput","paste"]),x("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),x("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sx=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function Dd(e,r,a){var n=e.type||"unknown-event";e.currentTarget=a,rh(n,r,void 0,e),e.currentTarget=null}function Ld(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],i=n.event;n=n.listeners;e:{var d=void 0;if(r)for(var u=n.length-1;0<=u;u--){var y=n[u],N=y.instance,q=y.currentTarget;if(y=y.listener,N!==d&&i.isPropagationStopped())break e;Dd(i,y,q),d=N}else for(u=0;u<n.length;u++){if(y=n[u],N=y.instance,q=y.currentTarget,y=y.listener,N!==d&&i.isPropagationStopped())break e;Dd(i,y,q),d=N}}}if($s)throw e=vl,$s=!1,vl=null,e}function Le(e,r){var a=r[Xl];a===void 0&&(a=r[Xl]=new Set);var n=e+"__bubble";a.has(n)||(_d(r,e,2,!1),a.add(n))}function Vl(e,r,a){var n=0;r&&(n|=4),_d(a,e,n,r)}var rn="_reactListening"+Math.random().toString(36).slice(2);function as(e){if(!e[rn]){e[rn]=!0,c.forEach(function(a){a!=="selectionchange"&&(sx.has(a)||Vl(a,!1,e),Vl(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[rn]||(r[rn]=!0,Vl("selectionchange",!1,r))}}function _d(e,r,a,n){switch(id(r)){case 1:var i=yh;break;case 4:i=vh;break;default:i=Cl}a=i.bind(null,r,a,e),i=void 0,!yl||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(r,a,{capture:!0,passive:i}):e.addEventListener(r,a,!0):i!==void 0?e.addEventListener(r,a,{passive:i}):e.addEventListener(r,a,!1)}function Wl(e,r,a,n,i){var d=n;if((r&1)===0&&(r&2)===0&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var y=n.stateNode.containerInfo;if(y===i||y.nodeType===8&&y.parentNode===i)break;if(u===4)for(u=n.return;u!==null;){var N=u.tag;if((N===3||N===4)&&(N=u.stateNode.containerInfo,N===i||N.nodeType===8&&N.parentNode===i))return;u=u.return}for(;y!==null;){if(u=_r(y),u===null)return;if(N=u.tag,N===5||N===6){n=d=u;continue e}y=y.parentNode}}n=n.return}Vo(function(){var q=d,X=ml(a),J=[];e:{var K=Pd.get(e);if(K!==void 0){var se=Il,de=e;switch(e){case"keypress":if(Xs(a)===0)break e;case"keydown":case"keyup":se=Ph;break;case"focusin":de="focus",se=Ol;break;case"focusout":de="blur",se=Ol;break;case"beforeblur":case"afterblur":se=Ol;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Lh;break;case Ad:case Td:case Od:se=Sh;break;case zd:se=$h;break;case"scroll":se=bh;break;case"wheel":se=Uh;break;case"copy":case"cut":case"paste":se=Eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=hd}var he=(r&4)!==0,He=!he&&e==="scroll",_=he?K!==null?K+"Capture":null:K;he=[];for(var I=q,U;I!==null;){U=I;var Z=U.stateNode;if(U.tag===5&&Z!==null&&(U=Z,_!==null&&(Z=$a(I,_),Z!=null&&he.push(ss(I,Z,U)))),He)break;I=I.return}0<he.length&&(K=new se(K,de,null,a,X),J.push({event:K,listeners:he}))}}if((r&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",K&&a!==gl&&(de=a.relatedTarget||a.fromElement)&&(_r(de)||de[rr]))break e;if((se||K)&&(K=X.window===X?X:(K=X.ownerDocument)?K.defaultView||K.parentWindow:window,se?(de=a.relatedTarget||a.toElement,se=q,de=de?_r(de):null,de!==null&&(He=Lr(de),de!==He||de.tag!==5&&de.tag!==6)&&(de=null)):(se=null,de=q),se!==de)){if(he=cd,Z="onMouseLeave",_="onMouseEnter",I="mouse",(e==="pointerout"||e==="pointerover")&&(he=hd,Z="onPointerLeave",_="onPointerEnter",I="pointer"),He=se==null?K:ca(se),U=de==null?K:ca(de),K=new he(Z,I+"leave",se,a,X),K.target=He,K.relatedTarget=U,Z=null,_r(X)===q&&(he=new he(_,I+"enter",de,a,X),he.target=U,he.relatedTarget=He,Z=he),He=Z,se&&de)t:{for(he=se,_=de,I=0,U=he;U;U=oa(U))I++;for(U=0,Z=_;Z;Z=oa(Z))U++;for(;0<I-U;)he=oa(he),I--;for(;0<U-I;)_=oa(_),U--;for(;I--;){if(he===_||_!==null&&he===_.alternate)break t;he=oa(he),_=oa(_)}he=null}else he=null;se!==null&&$d(J,K,se,he,!1),de!==null&&He!==null&&$d(J,He,de,he,!0)}}e:{if(K=q?ca(q):window,se=K.nodeName&&K.nodeName.toLowerCase(),se==="select"||se==="input"&&K.type==="file")var ge=Gh;else if(yd(K))if(bd)ge=Jh;else{ge=Xh;var ye=Kh}else(se=K.nodeName)&&se.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ge=Yh);if(ge&&(ge=ge(e,q))){vd(J,ge,a,X);break e}ye&&ye(e,K,q),e==="focusout"&&(ye=K._wrapperState)&&ye.controlled&&K.type==="number"&&La(K,"number",K.value)}switch(ye=q?ca(q):window,e){case"focusin":(yd(ye)||ye.contentEditable==="true")&&(la=ye,_l=q,ts=null);break;case"focusout":ts=_l=la=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,Md(J,a,X);break;case"selectionchange":if(tx)break;case"keydown":case"keyup":Md(J,a,X)}var ve;if(Pl)e:{switch(e){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else na?pd(e,a)&&(ke="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(xd&&a.locale!=="ko"&&(na||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&na&&(ve=od()):(vr=X,Ml="value"in vr?vr.value:vr.textContent,na=!0)),ye=an(q,ke),0<ye.length&&(ke=new ud(ke,e,null,a,X),J.push({event:ke,listeners:ye}),ve?ke.data=ve:(ve=fd(a),ve!==null&&(ke.data=ve)))),(ve=Vh?Wh(e,a):qh(e,a))&&(q=an(q,"onBeforeInput"),0<q.length&&(X=new ud("onBeforeInput","beforeinput",null,a,X),J.push({event:X,listeners:q}),X.data=ve))}Ld(J,r)})}function ss(e,r,a){return{instance:e,listener:r,currentTarget:a}}function an(e,r){for(var a=r+"Capture",n=[];e!==null;){var i=e,d=i.stateNode;i.tag===5&&d!==null&&(i=d,d=$a(e,a),d!=null&&n.unshift(ss(e,d,i)),d=$a(e,r),d!=null&&n.push(ss(e,d,i))),e=e.return}return n}function oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $d(e,r,a,n,i){for(var d=r._reactName,u=[];a!==null&&a!==n;){var y=a,N=y.alternate,q=y.stateNode;if(N!==null&&N===n)break;y.tag===5&&q!==null&&(y=q,i?(N=$a(a,d),N!=null&&u.unshift(ss(a,N,y))):i||(N=$a(a,d),N!=null&&u.push(ss(a,N,y)))),a=a.return}u.length!==0&&e.push({event:r,listeners:u})}var nx=/\r\n?/g,lx=/\u0000|\uFFFD/g;function Fd(e){return(typeof e=="string"?e:""+e).replace(nx,`
`).replace(lx,"")}function sn(e,r,a){if(r=Fd(r),Fd(e)!==r&&a)throw Error(o(425))}function nn(){}var ql=null,Hl=null;function Ql(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Gl=typeof setTimeout=="function"?setTimeout:void 0,ix=typeof clearTimeout=="function"?clearTimeout:void 0,Ud=typeof Promise=="function"?Promise:void 0,ox=typeof queueMicrotask=="function"?queueMicrotask:typeof Ud<"u"?function(e){return Ud.resolve(null).then(e).catch(dx)}:Gl;function dx(e){setTimeout(function(){throw e})}function Kl(e,r){var a=r,n=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"){if(n===0){e.removeChild(i),Ga(r);return}n--}else a!=="$"&&a!=="$?"&&a!=="$!"||n++;a=i}while(a);Ga(r)}function kr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Bd(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),Ht="__reactFiber$"+da,ns="__reactProps$"+da,rr="__reactContainer$"+da,Xl="__reactEvents$"+da,cx="__reactListeners$"+da,ux="__reactHandles$"+da;function _r(e){var r=e[Ht];if(r)return r;for(var a=e.parentNode;a;){if(r=a[rr]||a[Ht]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=Bd(e);e!==null;){if(a=e[Ht])return a;e=Bd(e)}return r}e=a,a=e.parentNode}return null}function ls(e){return e=e[Ht]||e[rr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ca(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function ln(e){return e[ns]||null}var Yl=[],ua=-1;function jr(e){return{current:e}}function _e(e){0>ua||(e.current=Yl[ua],Yl[ua]=null,ua--)}function Pe(e,r){ua++,Yl[ua]=e.current,e.current=r}var wr={},rt=jr(wr),dt=jr(!1),$r=wr;function ha(e,r){var a=e.type.contextTypes;if(!a)return wr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===r)return n.__reactInternalMemoizedMaskedChildContext;var i={},d;for(d in a)i[d]=r[d];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),i}function ct(e){return e=e.childContextTypes,e!=null}function on(){_e(dt),_e(rt)}function Vd(e,r,a){if(rt.current!==wr)throw Error(o(168));Pe(rt,r),Pe(dt,a)}function Wd(e,r,a){var n=e.stateNode;if(r=r.childContextTypes,typeof n.getChildContext!="function")return a;n=n.getChildContext();for(var i in n)if(!(i in r))throw Error(o(108,we(e)||"Unknown",i));return D({},a,n)}function dn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wr,$r=rt.current,Pe(rt,e),Pe(dt,dt.current),!0}function qd(e,r,a){var n=e.stateNode;if(!n)throw Error(o(169));a?(e=Wd(e,r,$r),n.__reactInternalMemoizedMergedChildContext=e,_e(dt),_e(rt),Pe(rt,e)):_e(dt),Pe(dt,a)}var ar=null,cn=!1,Jl=!1;function Hd(e){ar===null?ar=[e]:ar.push(e)}function hx(e){cn=!0,Hd(e)}function Nr(){if(!Jl&&ar!==null){Jl=!0;var e=0,r=Oe;try{var a=ar;for(Oe=1;e<a.length;e++){var n=a[e];do n=n(!0);while(n!==null)}ar=null,cn=!1}catch(i){throw ar!==null&&(ar=ar.slice(e+1)),Go(bl,Nr),i}finally{Oe=r,Jl=!1}}return null}var xa=[],ga=0,un=null,hn=0,wt=[],Nt=0,Fr=null,sr=1,nr="";function Ur(e,r){xa[ga++]=hn,xa[ga++]=un,un=e,hn=r}function Qd(e,r,a){wt[Nt++]=sr,wt[Nt++]=nr,wt[Nt++]=Fr,Fr=e;var n=sr;e=nr;var i=32-Pt(n)-1;n&=~(1<<i),a+=1;var d=32-Pt(r)+i;if(30<d){var u=i-i%5;d=(n&(1<<u)-1).toString(32),n>>=u,i-=u,sr=1<<32-Pt(r)+i|a<<i|n,nr=d+e}else sr=1<<d|a<<i|n,nr=e}function Zl(e){e.return!==null&&(Ur(e,1),Qd(e,1,0))}function ei(e){for(;e===un;)un=xa[--ga],xa[ga]=null,hn=xa[--ga],xa[ga]=null;for(;e===Fr;)Fr=wt[--Nt],wt[Nt]=null,nr=wt[--Nt],wt[Nt]=null,sr=wt[--Nt],wt[Nt]=null}var yt=null,vt=null,Fe=!1,Dt=null;function Gd(e,r){var a=Mt(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function Kd(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,yt=e,vt=kr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,yt=e,vt=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Fr!==null?{id:sr,overflow:nr}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Mt(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,yt=e,vt=null,!0):!1;default:return!1}}function ti(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ri(e){if(Fe){var r=vt;if(r){var a=r;if(!Kd(e,r)){if(ti(e))throw Error(o(418));r=kr(a.nextSibling);var n=yt;r&&Kd(e,r)?Gd(n,a):(e.flags=e.flags&-4097|2,Fe=!1,yt=e)}}else{if(ti(e))throw Error(o(418));e.flags=e.flags&-4097|2,Fe=!1,yt=e}}}function Xd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function xn(e){if(e!==yt)return!1;if(!Fe)return Xd(e),Fe=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Ql(e.type,e.memoizedProps)),r&&(r=vt)){if(ti(e))throw Yd(),Error(o(418));for(;r;)Gd(e,r),r=kr(r.nextSibling)}if(Xd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){vt=kr(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}vt=null}}else vt=yt?kr(e.stateNode.nextSibling):null;return!0}function Yd(){for(var e=vt;e;)e=kr(e.nextSibling)}function ma(){vt=yt=null,Fe=!1}function ai(e){Dt===null?Dt=[e]:Dt.push(e)}var xx=P.ReactCurrentBatchConfig;function is(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(o(309));var n=a.stateNode}if(!n)throw Error(o(147,e));var i=n,d=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===d?r.ref:(r=function(u){var y=i.refs;u===null?delete y[d]:y[d]=u},r._stringRef=d,r)}if(typeof e!="string")throw Error(o(284));if(!a._owner)throw Error(o(290,e))}return e}function gn(e,r){throw e=Object.prototype.toString.call(r),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Jd(e){var r=e._init;return r(e._payload)}function Zd(e){function r(_,I){if(e){var U=_.deletions;U===null?(_.deletions=[I],_.flags|=16):U.push(I)}}function a(_,I){if(!e)return null;for(;I!==null;)r(_,I),I=I.sibling;return null}function n(_,I){for(_=new Map;I!==null;)I.key!==null?_.set(I.key,I):_.set(I.index,I),I=I.sibling;return _}function i(_,I){return _=Or(_,I),_.index=0,_.sibling=null,_}function d(_,I,U){return _.index=U,e?(U=_.alternate,U!==null?(U=U.index,U<I?(_.flags|=2,I):U):(_.flags|=2,I)):(_.flags|=1048576,I)}function u(_){return e&&_.alternate===null&&(_.flags|=2),_}function y(_,I,U,Z){return I===null||I.tag!==6?(I=Gi(U,_.mode,Z),I.return=_,I):(I=i(I,U),I.return=_,I)}function N(_,I,U,Z){var ge=U.type;return ge===ee?X(_,I,U.props.children,Z,U.key):I!==null&&(I.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Se&&Jd(ge)===I.type)?(Z=i(I,U.props),Z.ref=is(_,I,U),Z.return=_,Z):(Z=_n(U.type,U.key,U.props,null,_.mode,Z),Z.ref=is(_,I,U),Z.return=_,Z)}function q(_,I,U,Z){return I===null||I.tag!==4||I.stateNode.containerInfo!==U.containerInfo||I.stateNode.implementation!==U.implementation?(I=Ki(U,_.mode,Z),I.return=_,I):(I=i(I,U.children||[]),I.return=_,I)}function X(_,I,U,Z,ge){return I===null||I.tag!==7?(I=Kr(U,_.mode,Z,ge),I.return=_,I):(I=i(I,U),I.return=_,I)}function J(_,I,U){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Gi(""+I,_.mode,U),I.return=_,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Y:return U=_n(I.type,I.key,I.props,null,_.mode,U),U.ref=is(_,null,I),U.return=_,U;case B:return I=Ki(I,_.mode,U),I.return=_,I;case Se:var Z=I._init;return J(_,Z(I._payload),U)}if(Dr(I)||ne(I))return I=Kr(I,_.mode,U,null),I.return=_,I;gn(_,I)}return null}function K(_,I,U,Z){var ge=I!==null?I.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ge!==null?null:y(_,I,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Y:return U.key===ge?N(_,I,U,Z):null;case B:return U.key===ge?q(_,I,U,Z):null;case Se:return ge=U._init,K(_,I,ge(U._payload),Z)}if(Dr(U)||ne(U))return ge!==null?null:X(_,I,U,Z,null);gn(_,U)}return null}function se(_,I,U,Z,ge){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return _=_.get(U)||null,y(I,_,""+Z,ge);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Y:return _=_.get(Z.key===null?U:Z.key)||null,N(I,_,Z,ge);case B:return _=_.get(Z.key===null?U:Z.key)||null,q(I,_,Z,ge);case Se:var ye=Z._init;return se(_,I,U,ye(Z._payload),ge)}if(Dr(Z)||ne(Z))return _=_.get(U)||null,X(I,_,Z,ge,null);gn(I,Z)}return null}function de(_,I,U,Z){for(var ge=null,ye=null,ve=I,ke=I=0,Je=null;ve!==null&&ke<U.length;ke++){ve.index>ke?(Je=ve,ve=null):Je=ve.sibling;var Me=K(_,ve,U[ke],Z);if(Me===null){ve===null&&(ve=Je);break}e&&ve&&Me.alternate===null&&r(_,ve),I=d(Me,I,ke),ye===null?ge=Me:ye.sibling=Me,ye=Me,ve=Je}if(ke===U.length)return a(_,ve),Fe&&Ur(_,ke),ge;if(ve===null){for(;ke<U.length;ke++)ve=J(_,U[ke],Z),ve!==null&&(I=d(ve,I,ke),ye===null?ge=ve:ye.sibling=ve,ye=ve);return Fe&&Ur(_,ke),ge}for(ve=n(_,ve);ke<U.length;ke++)Je=se(ve,_,ke,U[ke],Z),Je!==null&&(e&&Je.alternate!==null&&ve.delete(Je.key===null?ke:Je.key),I=d(Je,I,ke),ye===null?ge=Je:ye.sibling=Je,ye=Je);return e&&ve.forEach(function(zr){return r(_,zr)}),Fe&&Ur(_,ke),ge}function he(_,I,U,Z){var ge=ne(U);if(typeof ge!="function")throw Error(o(150));if(U=ge.call(U),U==null)throw Error(o(151));for(var ye=ge=null,ve=I,ke=I=0,Je=null,Me=U.next();ve!==null&&!Me.done;ke++,Me=U.next()){ve.index>ke?(Je=ve,ve=null):Je=ve.sibling;var zr=K(_,ve,Me.value,Z);if(zr===null){ve===null&&(ve=Je);break}e&&ve&&zr.alternate===null&&r(_,ve),I=d(zr,I,ke),ye===null?ge=zr:ye.sibling=zr,ye=zr,ve=Je}if(Me.done)return a(_,ve),Fe&&Ur(_,ke),ge;if(ve===null){for(;!Me.done;ke++,Me=U.next())Me=J(_,Me.value,Z),Me!==null&&(I=d(Me,I,ke),ye===null?ge=Me:ye.sibling=Me,ye=Me);return Fe&&Ur(_,ke),ge}for(ve=n(_,ve);!Me.done;ke++,Me=U.next())Me=se(ve,_,ke,Me.value,Z),Me!==null&&(e&&Me.alternate!==null&&ve.delete(Me.key===null?ke:Me.key),I=d(Me,I,ke),ye===null?ge=Me:ye.sibling=Me,ye=Me);return e&&ve.forEach(function(Hx){return r(_,Hx)}),Fe&&Ur(_,ke),ge}function He(_,I,U,Z){if(typeof U=="object"&&U!==null&&U.type===ee&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Y:e:{for(var ge=U.key,ye=I;ye!==null;){if(ye.key===ge){if(ge=U.type,ge===ee){if(ye.tag===7){a(_,ye.sibling),I=i(ye,U.props.children),I.return=_,_=I;break e}}else if(ye.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Se&&Jd(ge)===ye.type){a(_,ye.sibling),I=i(ye,U.props),I.ref=is(_,ye,U),I.return=_,_=I;break e}a(_,ye);break}else r(_,ye);ye=ye.sibling}U.type===ee?(I=Kr(U.props.children,_.mode,Z,U.key),I.return=_,_=I):(Z=_n(U.type,U.key,U.props,null,_.mode,Z),Z.ref=is(_,I,U),Z.return=_,_=Z)}return u(_);case B:e:{for(ye=U.key;I!==null;){if(I.key===ye)if(I.tag===4&&I.stateNode.containerInfo===U.containerInfo&&I.stateNode.implementation===U.implementation){a(_,I.sibling),I=i(I,U.children||[]),I.return=_,_=I;break e}else{a(_,I);break}else r(_,I);I=I.sibling}I=Ki(U,_.mode,Z),I.return=_,_=I}return u(_);case Se:return ye=U._init,He(_,I,ye(U._payload),Z)}if(Dr(U))return de(_,I,U,Z);if(ne(U))return he(_,I,U,Z);gn(_,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,I!==null&&I.tag===6?(a(_,I.sibling),I=i(I,U),I.return=_,_=I):(a(_,I),I=Gi(U,_.mode,Z),I.return=_,_=I),u(_)):a(_,I)}return He}var pa=Zd(!0),ec=Zd(!1),mn=jr(null),pn=null,fa=null,si=null;function ni(){si=fa=pn=null}function li(e){var r=mn.current;_e(mn),e._currentValue=r}function ii(e,r,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,n!==null&&(n.childLanes|=r)):n!==null&&(n.childLanes&r)!==r&&(n.childLanes|=r),e===a)break;e=e.return}}function ya(e,r){pn=e,si=fa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(ut=!0),e.firstContext=null)}function St(e){var r=e._currentValue;if(si!==e)if(e={context:e,memoizedValue:r,next:null},fa===null){if(pn===null)throw Error(o(308));fa=e,pn.dependencies={lanes:0,firstContext:e}}else fa=fa.next=e;return r}var Br=null;function oi(e){Br===null?Br=[e]:Br.push(e)}function tc(e,r,a,n){var i=r.interleaved;return i===null?(a.next=a,oi(r)):(a.next=i.next,i.next=a),r.interleaved=a,lr(e,n)}function lr(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var Sr=!1;function di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rc(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ir(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Cr(e,r,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ee&2)!==0){var i=n.pending;return i===null?r.next=r:(r.next=i.next,i.next=r),n.pending=r,lr(e,a)}return i=n.interleaved,i===null?(r.next=r,oi(n)):(r.next=i.next,i.next=r),n.interleaved=r,lr(e,a)}function fn(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var n=r.lanes;n&=e.pendingLanes,a|=n,r.lanes=a,wl(e,a)}}function ac(e,r){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var u={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};d===null?i=d=u:d=d.next=u,a=a.next}while(a!==null);d===null?i=d=r:d=d.next=r}else i=d=r;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:d,shared:n.shared,effects:n.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function yn(e,r,a,n){var i=e.updateQueue;Sr=!1;var d=i.firstBaseUpdate,u=i.lastBaseUpdate,y=i.shared.pending;if(y!==null){i.shared.pending=null;var N=y,q=N.next;N.next=null,u===null?d=q:u.next=q,u=N;var X=e.alternate;X!==null&&(X=X.updateQueue,y=X.lastBaseUpdate,y!==u&&(y===null?X.firstBaseUpdate=q:y.next=q,X.lastBaseUpdate=N))}if(d!==null){var J=i.baseState;u=0,X=q=N=null,y=d;do{var K=y.lane,se=y.eventTime;if((n&K)===K){X!==null&&(X=X.next={eventTime:se,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var de=e,he=y;switch(K=r,se=a,he.tag){case 1:if(de=he.payload,typeof de=="function"){J=de.call(se,J,K);break e}J=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=he.payload,K=typeof de=="function"?de.call(se,J,K):de,K==null)break e;J=D({},J,K);break e;case 2:Sr=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,K=i.effects,K===null?i.effects=[y]:K.push(y))}else se={eventTime:se,lane:K,tag:y.tag,payload:y.payload,callback:y.callback,next:null},X===null?(q=X=se,N=J):X=X.next=se,u|=K;if(y=y.next,y===null){if(y=i.shared.pending,y===null)break;K=y,y=K.next,K.next=null,i.lastBaseUpdate=K,i.shared.pending=null}}while(!0);if(X===null&&(N=J),i.baseState=N,i.firstBaseUpdate=q,i.lastBaseUpdate=X,r=i.shared.interleaved,r!==null){i=r;do u|=i.lane,i=i.next;while(i!==r)}else d===null&&(i.shared.lanes=0);qr|=u,e.lanes=u,e.memoizedState=J}}function sc(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var n=e[r],i=n.callback;if(i!==null){if(n.callback=null,n=a,typeof i!="function")throw Error(o(191,i));i.call(n)}}}var os={},Qt=jr(os),ds=jr(os),cs=jr(os);function Vr(e){if(e===os)throw Error(o(174));return e}function ci(e,r){switch(Pe(cs,r),Pe(ds,e),Pe(Qt,os),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Zr(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Zr(r,e)}_e(Qt),Pe(Qt,r)}function va(){_e(Qt),_e(ds),_e(cs)}function nc(e){Vr(cs.current);var r=Vr(Qt.current),a=Zr(r,e.type);r!==a&&(Pe(ds,e),Pe(Qt,a))}function ui(e){ds.current===e&&(_e(Qt),_e(ds))}var Ue=jr(0);function vn(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var hi=[];function xi(){for(var e=0;e<hi.length;e++)hi[e]._workInProgressVersionPrimary=null;hi.length=0}var bn=P.ReactCurrentDispatcher,gi=P.ReactCurrentBatchConfig,Wr=0,Be=null,Ge=null,Xe=null,kn=!1,us=!1,hs=0,gx=0;function at(){throw Error(o(321))}function mi(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!Rt(e[a],r[a]))return!1;return!0}function pi(e,r,a,n,i,d){if(Wr=d,Be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,bn.current=e===null||e.memoizedState===null?yx:vx,e=a(n,i),us){d=0;do{if(us=!1,hs=0,25<=d)throw Error(o(301));d+=1,Xe=Ge=null,r.updateQueue=null,bn.current=bx,e=a(n,i)}while(us)}if(bn.current=Nn,r=Ge!==null&&Ge.next!==null,Wr=0,Xe=Ge=Be=null,kn=!1,r)throw Error(o(300));return e}function fi(){var e=hs!==0;return hs=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Be.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Ct(){if(Ge===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var r=Xe===null?Be.memoizedState:Xe.next;if(r!==null)Xe=r,Ge=e;else{if(e===null)throw Error(o(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Xe===null?Be.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function xs(e,r){return typeof r=="function"?r(e):r}function yi(e){var r=Ct(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var n=Ge,i=n.baseQueue,d=a.pending;if(d!==null){if(i!==null){var u=i.next;i.next=d.next,d.next=u}n.baseQueue=i=d,a.pending=null}if(i!==null){d=i.next,n=n.baseState;var y=u=null,N=null,q=d;do{var X=q.lane;if((Wr&X)===X)N!==null&&(N=N.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),n=q.hasEagerState?q.eagerState:e(n,q.action);else{var J={lane:X,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};N===null?(y=N=J,u=n):N=N.next=J,Be.lanes|=X,qr|=X}q=q.next}while(q!==null&&q!==d);N===null?u=n:N.next=y,Rt(n,r.memoizedState)||(ut=!0),r.memoizedState=n,r.baseState=u,r.baseQueue=N,a.lastRenderedState=n}if(e=a.interleaved,e!==null){i=e;do d=i.lane,Be.lanes|=d,qr|=d,i=i.next;while(i!==e)}else i===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function vi(e){var r=Ct(),a=r.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,d=r.memoizedState;if(i!==null){a.pending=null;var u=i=i.next;do d=e(d,u.action),u=u.next;while(u!==i);Rt(d,r.memoizedState)||(ut=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,n]}function lc(){}function ic(e,r){var a=Be,n=Ct(),i=r(),d=!Rt(n.memoizedState,i);if(d&&(n.memoizedState=i,ut=!0),n=n.queue,bi(cc.bind(null,a,n,e),[e]),n.getSnapshot!==r||d||Xe!==null&&Xe.memoizedState.tag&1){if(a.flags|=2048,gs(9,dc.bind(null,a,n,i,r),void 0,null),Ye===null)throw Error(o(349));(Wr&30)!==0||oc(a,r,i)}return i}function oc(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=Be.updateQueue,r===null?(r={lastEffect:null,stores:null},Be.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function dc(e,r,a,n){r.value=a,r.getSnapshot=n,uc(r)&&hc(e)}function cc(e,r,a){return a(function(){uc(r)&&hc(e)})}function uc(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!Rt(e,a)}catch{return!0}}function hc(e){var r=lr(e,1);r!==null&&Ft(r,e,1,-1)}function xc(e){var r=Gt();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},r.queue=e,e=e.dispatch=fx.bind(null,Be,e),[r.memoizedState,e]}function gs(e,r,a,n){return e={tag:e,create:r,destroy:a,deps:n,next:null},r=Be.updateQueue,r===null?(r={lastEffect:null,stores:null},Be.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,r.lastEffect=e)),e}function gc(){return Ct().memoizedState}function jn(e,r,a,n){var i=Gt();Be.flags|=e,i.memoizedState=gs(1|r,a,void 0,n===void 0?null:n)}function wn(e,r,a,n){var i=Ct();n=n===void 0?null:n;var d=void 0;if(Ge!==null){var u=Ge.memoizedState;if(d=u.destroy,n!==null&&mi(n,u.deps)){i.memoizedState=gs(r,a,d,n);return}}Be.flags|=e,i.memoizedState=gs(1|r,a,d,n)}function mc(e,r){return jn(8390656,8,e,r)}function bi(e,r){return wn(2048,8,e,r)}function pc(e,r){return wn(4,2,e,r)}function fc(e,r){return wn(4,4,e,r)}function yc(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function vc(e,r,a){return a=a!=null?a.concat([e]):null,wn(4,4,yc.bind(null,r,e),a)}function ki(){}function bc(e,r){var a=Ct();r=r===void 0?null:r;var n=a.memoizedState;return n!==null&&r!==null&&mi(r,n[1])?n[0]:(a.memoizedState=[e,r],e)}function kc(e,r){var a=Ct();r=r===void 0?null:r;var n=a.memoizedState;return n!==null&&r!==null&&mi(r,n[1])?n[0]:(e=e(),a.memoizedState=[e,r],e)}function jc(e,r,a){return(Wr&21)===0?(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=a):(Rt(a,r)||(a=Jo(),Be.lanes|=a,qr|=a,e.baseState=!0),r)}function mx(e,r){var a=Oe;Oe=a!==0&&4>a?a:4,e(!0);var n=gi.transition;gi.transition={};try{e(!1),r()}finally{Oe=a,gi.transition=n}}function wc(){return Ct().memoizedState}function px(e,r,a){var n=Ar(e);if(a={lane:n,action:a,hasEagerState:!1,eagerState:null,next:null},Nc(e))Sc(r,a);else if(a=tc(e,r,a,n),a!==null){var i=it();Ft(a,e,n,i),Cc(a,r,n)}}function fx(e,r,a){var n=Ar(e),i={lane:n,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nc(e))Sc(r,i);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var u=r.lastRenderedState,y=d(u,a);if(i.hasEagerState=!0,i.eagerState=y,Rt(y,u)){var N=r.interleaved;N===null?(i.next=i,oi(r)):(i.next=N.next,N.next=i),r.interleaved=i;return}}catch{}finally{}a=tc(e,r,i,n),a!==null&&(i=it(),Ft(a,e,n,i),Cc(a,r,n))}}function Nc(e){var r=e.alternate;return e===Be||r!==null&&r===Be}function Sc(e,r){us=kn=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function Cc(e,r,a){if((a&4194240)!==0){var n=r.lanes;n&=e.pendingLanes,a|=n,r.lanes=a,wl(e,a)}}var Nn={readContext:St,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},yx={readContext:St,useCallback:function(e,r){return Gt().memoizedState=[e,r===void 0?null:r],e},useContext:St,useEffect:mc,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,jn(4194308,4,yc.bind(null,r,e),a)},useLayoutEffect:function(e,r){return jn(4194308,4,e,r)},useInsertionEffect:function(e,r){return jn(4,2,e,r)},useMemo:function(e,r){var a=Gt();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var n=Gt();return r=a!==void 0?a(r):r,n.memoizedState=n.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},n.queue=e,e=e.dispatch=px.bind(null,Be,e),[n.memoizedState,e]},useRef:function(e){var r=Gt();return e={current:e},r.memoizedState=e},useState:xc,useDebugValue:ki,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=xc(!1),r=e[0];return e=mx.bind(null,e[1]),Gt().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var n=Be,i=Gt();if(Fe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=r(),Ye===null)throw Error(o(349));(Wr&30)!==0||oc(n,r,a)}i.memoizedState=a;var d={value:a,getSnapshot:r};return i.queue=d,mc(cc.bind(null,n,d,e),[e]),n.flags|=2048,gs(9,dc.bind(null,n,d,a,r),void 0,null),a},useId:function(){var e=Gt(),r=Ye.identifierPrefix;if(Fe){var a=nr,n=sr;a=(n&~(1<<32-Pt(n)-1)).toString(32)+a,r=":"+r+"R"+a,a=hs++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=gx++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},vx={readContext:St,useCallback:bc,useContext:St,useEffect:bi,useImperativeHandle:vc,useInsertionEffect:pc,useLayoutEffect:fc,useMemo:kc,useReducer:yi,useRef:gc,useState:function(){return yi(xs)},useDebugValue:ki,useDeferredValue:function(e){var r=Ct();return jc(r,Ge.memoizedState,e)},useTransition:function(){var e=yi(xs)[0],r=Ct().memoizedState;return[e,r]},useMutableSource:lc,useSyncExternalStore:ic,useId:wc,unstable_isNewReconciler:!1},bx={readContext:St,useCallback:bc,useContext:St,useEffect:bi,useImperativeHandle:vc,useInsertionEffect:pc,useLayoutEffect:fc,useMemo:kc,useReducer:vi,useRef:gc,useState:function(){return vi(xs)},useDebugValue:ki,useDeferredValue:function(e){var r=Ct();return Ge===null?r.memoizedState=e:jc(r,Ge.memoizedState,e)},useTransition:function(){var e=vi(xs)[0],r=Ct().memoizedState;return[e,r]},useMutableSource:lc,useSyncExternalStore:ic,useId:wc,unstable_isNewReconciler:!1};function Lt(e,r){if(e&&e.defaultProps){r=D({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}function ji(e,r,a,n){r=e.memoizedState,a=a(n,r),a=a==null?r:D({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Sn={isMounted:function(e){return(e=e._reactInternals)?Lr(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var n=it(),i=Ar(e),d=ir(n,i);d.payload=r,a!=null&&(d.callback=a),r=Cr(e,d,i),r!==null&&(Ft(r,e,i,n),fn(r,e,i))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var n=it(),i=Ar(e),d=ir(n,i);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Cr(e,d,i),r!==null&&(Ft(r,e,i,n),fn(r,e,i))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=it(),n=Ar(e),i=ir(a,n);i.tag=2,r!=null&&(i.callback=r),r=Cr(e,i,n),r!==null&&(Ft(r,e,n,a),fn(r,e,n))}};function Ec(e,r,a,n,i,d,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,d,u):r.prototype&&r.prototype.isPureReactComponent?!es(a,n)||!es(i,d):!0}function Mc(e,r,a){var n=!1,i=wr,d=r.contextType;return typeof d=="object"&&d!==null?d=St(d):(i=ct(r)?$r:rt.current,n=r.contextTypes,d=(n=n!=null)?ha(e,i):wr),r=new r(a,d),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Sn,e.stateNode=r,r._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=d),r}function Ic(e,r,a,n){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,n),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,n),r.state!==e&&Sn.enqueueReplaceState(r,r.state,null)}function wi(e,r,a,n){var i=e.stateNode;i.props=a,i.state=e.memoizedState,i.refs={},di(e);var d=r.contextType;typeof d=="object"&&d!==null?i.context=St(d):(d=ct(r)?$r:rt.current,i.context=ha(e,d)),i.state=e.memoizedState,d=r.getDerivedStateFromProps,typeof d=="function"&&(ji(e,r,d,a),i.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(r=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),r!==i.state&&Sn.enqueueReplaceState(i,i.state,null),yn(e,a,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ba(e,r){try{var a="",n=r;do a+=pe(n),n=n.return;while(n);var i=a}catch(d){i=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:r,stack:i,digest:null}}function Ni(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function Si(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var kx=typeof WeakMap=="function"?WeakMap:Map;function Ac(e,r,a){a=ir(-1,a),a.tag=3,a.payload={element:null};var n=r.value;return a.callback=function(){On||(On=!0,Fi=n),Si(e,r)},a}function Tc(e,r,a){a=ir(-1,a),a.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=r.value;a.payload=function(){return n(i)},a.callback=function(){Si(e,r)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(a.callback=function(){Si(e,r),typeof n!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var u=r.stack;this.componentDidCatch(r.value,{componentStack:u!==null?u:""})}),a}function Oc(e,r,a){var n=e.pingCache;if(n===null){n=e.pingCache=new kx;var i=new Set;n.set(r,i)}else i=n.get(r),i===void 0&&(i=new Set,n.set(r,i));i.has(a)||(i.add(a),e=Rx.bind(null,e,r,a),r.then(e,e))}function zc(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Pc(e,r,a,n,i){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=ir(-1,1),r.tag=2,Cr(a,r,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var jx=P.ReactCurrentOwner,ut=!1;function lt(e,r,a,n){r.child=e===null?ec(r,null,a,n):pa(r,e.child,a,n)}function Rc(e,r,a,n,i){a=a.render;var d=r.ref;return ya(r,i),n=pi(e,r,a,n,d,i),a=fi(),e!==null&&!ut?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~i,or(e,r,i)):(Fe&&a&&Zl(r),r.flags|=1,lt(e,r,n,i),r.child)}function Dc(e,r,a,n,i){if(e===null){var d=a.type;return typeof d=="function"&&!Qi(d)&&d.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=d,Lc(e,r,d,n,i)):(e=_n(a.type,null,n,r,r.mode,i),e.ref=r.ref,e.return=r,r.child=e)}if(d=e.child,(e.lanes&i)===0){var u=d.memoizedProps;if(a=a.compare,a=a!==null?a:es,a(u,n)&&e.ref===r.ref)return or(e,r,i)}return r.flags|=1,e=Or(d,n),e.ref=r.ref,e.return=r,r.child=e}function Lc(e,r,a,n,i){if(e!==null){var d=e.memoizedProps;if(es(d,n)&&e.ref===r.ref)if(ut=!1,r.pendingProps=n=d,(e.lanes&i)!==0)(e.flags&131072)!==0&&(ut=!0);else return r.lanes=e.lanes,or(e,r,i)}return Ci(e,r,a,n,i)}function _c(e,r,a){var n=r.pendingProps,i=n.children,d=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(ja,bt),bt|=a;else{if((a&1073741824)===0)return e=d!==null?d.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Pe(ja,bt),bt|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=d!==null?d.baseLanes:a,Pe(ja,bt),bt|=n}else d!==null?(n=d.baseLanes|a,r.memoizedState=null):n=a,Pe(ja,bt),bt|=n;return lt(e,r,i,a),r.child}function $c(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Ci(e,r,a,n,i){var d=ct(a)?$r:rt.current;return d=ha(r,d),ya(r,i),a=pi(e,r,a,n,d,i),n=fi(),e!==null&&!ut?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~i,or(e,r,i)):(Fe&&n&&Zl(r),r.flags|=1,lt(e,r,a,i),r.child)}function Fc(e,r,a,n,i){if(ct(a)){var d=!0;dn(r)}else d=!1;if(ya(r,i),r.stateNode===null)En(e,r),Mc(r,a,n),wi(r,a,n,i),n=!0;else if(e===null){var u=r.stateNode,y=r.memoizedProps;u.props=y;var N=u.context,q=a.contextType;typeof q=="object"&&q!==null?q=St(q):(q=ct(a)?$r:rt.current,q=ha(r,q));var X=a.getDerivedStateFromProps,J=typeof X=="function"||typeof u.getSnapshotBeforeUpdate=="function";J||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y!==n||N!==q)&&Ic(r,u,n,q),Sr=!1;var K=r.memoizedState;u.state=K,yn(r,n,u,i),N=r.memoizedState,y!==n||K!==N||dt.current||Sr?(typeof X=="function"&&(ji(r,a,X,n),N=r.memoizedState),(y=Sr||Ec(r,a,y,n,K,N,q))?(J||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(r.flags|=4194308)):(typeof u.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=n,r.memoizedState=N),u.props=n,u.state=N,u.context=q,n=y):(typeof u.componentDidMount=="function"&&(r.flags|=4194308),n=!1)}else{u=r.stateNode,rc(e,r),y=r.memoizedProps,q=r.type===r.elementType?y:Lt(r.type,y),u.props=q,J=r.pendingProps,K=u.context,N=a.contextType,typeof N=="object"&&N!==null?N=St(N):(N=ct(a)?$r:rt.current,N=ha(r,N));var se=a.getDerivedStateFromProps;(X=typeof se=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y!==J||K!==N)&&Ic(r,u,n,N),Sr=!1,K=r.memoizedState,u.state=K,yn(r,n,u,i);var de=r.memoizedState;y!==J||K!==de||dt.current||Sr?(typeof se=="function"&&(ji(r,a,se,n),de=r.memoizedState),(q=Sr||Ec(r,a,q,n,K,de,N)||!1)?(X||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,de,N),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,de,N)),typeof u.componentDidUpdate=="function"&&(r.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof u.componentDidUpdate!="function"||y===e.memoizedProps&&K===e.memoizedState||(r.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&K===e.memoizedState||(r.flags|=1024),r.memoizedProps=n,r.memoizedState=de),u.props=n,u.state=de,u.context=N,n=q):(typeof u.componentDidUpdate!="function"||y===e.memoizedProps&&K===e.memoizedState||(r.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&K===e.memoizedState||(r.flags|=1024),n=!1)}return Ei(e,r,a,n,d,i)}function Ei(e,r,a,n,i,d){$c(e,r);var u=(r.flags&128)!==0;if(!n&&!u)return i&&qd(r,a,!1),or(e,r,d);n=r.stateNode,jx.current=r;var y=u&&typeof a.getDerivedStateFromError!="function"?null:n.render();return r.flags|=1,e!==null&&u?(r.child=pa(r,e.child,null,d),r.child=pa(r,null,y,d)):lt(e,r,y,d),r.memoizedState=n.state,i&&qd(r,a,!0),r.child}function Uc(e){var r=e.stateNode;r.pendingContext?Vd(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Vd(e,r.context,!1),ci(e,r.containerInfo)}function Bc(e,r,a,n,i){return ma(),ai(i),r.flags|=256,lt(e,r,a,n),r.child}var Mi={dehydrated:null,treeContext:null,retryLane:0};function Ii(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vc(e,r,a){var n=r.pendingProps,i=Ue.current,d=!1,u=(r.flags&128)!==0,y;if((y=u)||(y=e!==null&&e.memoizedState===null?!1:(i&2)!==0),y?(d=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pe(Ue,i&1),e===null)return ri(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(u=n.children,e=n.fallback,d?(n=r.mode,d=r.child,u={mode:"hidden",children:u},(n&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=u):d=$n(u,n,0,null),e=Kr(e,n,a,null),d.return=r,e.return=r,d.sibling=e,r.child=d,r.child.memoizedState=Ii(a),r.memoizedState=Mi,e):Ai(r,u));if(i=e.memoizedState,i!==null&&(y=i.dehydrated,y!==null))return wx(e,r,u,n,y,i,a);if(d){d=n.fallback,u=r.mode,i=e.child,y=i.sibling;var N={mode:"hidden",children:n.children};return(u&1)===0&&r.child!==i?(n=r.child,n.childLanes=0,n.pendingProps=N,r.deletions=null):(n=Or(i,N),n.subtreeFlags=i.subtreeFlags&14680064),y!==null?d=Or(y,d):(d=Kr(d,u,a,null),d.flags|=2),d.return=r,n.return=r,n.sibling=d,r.child=n,n=d,d=r.child,u=e.child.memoizedState,u=u===null?Ii(a):{baseLanes:u.baseLanes|a,cachePool:null,transitions:u.transitions},d.memoizedState=u,d.childLanes=e.childLanes&~a,r.memoizedState=Mi,n}return d=e.child,e=d.sibling,n=Or(d,{mode:"visible",children:n.children}),(r.mode&1)===0&&(n.lanes=a),n.return=r,n.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=n,r.memoizedState=null,n}function Ai(e,r){return r=$n({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Cn(e,r,a,n){return n!==null&&ai(n),pa(r,e.child,null,a),e=Ai(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function wx(e,r,a,n,i,d,u){if(a)return r.flags&256?(r.flags&=-257,n=Ni(Error(o(422))),Cn(e,r,u,n)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(d=n.fallback,i=r.mode,n=$n({mode:"visible",children:n.children},i,0,null),d=Kr(d,i,u,null),d.flags|=2,n.return=r,d.return=r,n.sibling=d,r.child=n,(r.mode&1)!==0&&pa(r,e.child,null,u),r.child.memoizedState=Ii(u),r.memoizedState=Mi,d);if((r.mode&1)===0)return Cn(e,r,u,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var y=n.dgst;return n=y,d=Error(o(419)),n=Ni(d,n,void 0),Cn(e,r,u,n)}if(y=(u&e.childLanes)!==0,ut||y){if(n=Ye,n!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(n.suspendedLanes|u))!==0?0:i,i!==0&&i!==d.retryLane&&(d.retryLane=i,lr(e,i),Ft(n,e,i,-1))}return Hi(),n=Ni(Error(o(421))),Cn(e,r,u,n)}return i.data==="$?"?(r.flags|=128,r.child=e.child,r=Dx.bind(null,e),i._reactRetry=r,null):(e=d.treeContext,vt=kr(i.nextSibling),yt=r,Fe=!0,Dt=null,e!==null&&(wt[Nt++]=sr,wt[Nt++]=nr,wt[Nt++]=Fr,sr=e.id,nr=e.overflow,Fr=r),r=Ai(r,n.children),r.flags|=4096,r)}function Wc(e,r,a){e.lanes|=r;var n=e.alternate;n!==null&&(n.lanes|=r),ii(e.return,r,a)}function Ti(e,r,a,n,i){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=n,d.tail=a,d.tailMode=i)}function qc(e,r,a){var n=r.pendingProps,i=n.revealOrder,d=n.tail;if(lt(e,r,n.children,a),n=Ue.current,(n&2)!==0)n=n&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wc(e,a,r);else if(e.tag===19)Wc(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Pe(Ue,n),(r.mode&1)===0)r.memoizedState=null;else switch(i){case"forwards":for(a=r.child,i=null;a!==null;)e=a.alternate,e!==null&&vn(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=r.child,r.child=null):(i=a.sibling,a.sibling=null),Ti(r,!1,i,a,d);break;case"backwards":for(a=null,i=r.child,r.child=null;i!==null;){if(e=i.alternate,e!==null&&vn(e)===null){r.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}Ti(r,!0,a,null,d);break;case"together":Ti(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function En(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function or(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),qr|=r.lanes,(a&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(o(153));if(r.child!==null){for(e=r.child,a=Or(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=Or(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function Nx(e,r,a){switch(r.tag){case 3:Uc(r),ma();break;case 5:nc(r);break;case 1:ct(r.type)&&dn(r);break;case 4:ci(r,r.stateNode.containerInfo);break;case 10:var n=r.type._context,i=r.memoizedProps.value;Pe(mn,n._currentValue),n._currentValue=i;break;case 13:if(n=r.memoizedState,n!==null)return n.dehydrated!==null?(Pe(Ue,Ue.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?Vc(e,r,a):(Pe(Ue,Ue.current&1),e=or(e,r,a),e!==null?e.sibling:null);Pe(Ue,Ue.current&1);break;case 19:if(n=(a&r.childLanes)!==0,(e.flags&128)!==0){if(n)return qc(e,r,a);r.flags|=128}if(i=r.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Ue,Ue.current),n)break;return null;case 22:case 23:return r.lanes=0,_c(e,r,a)}return or(e,r,a)}var Hc,Oi,Qc,Gc;Hc=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Oi=function(){},Qc=function(e,r,a,n){var i=e.memoizedProps;if(i!==n){e=r.stateNode,Vr(Qt.current);var d=null;switch(a){case"input":i=$(e,i),n=$(e,n),d=[];break;case"select":i=D({},i,{value:void 0}),n=D({},n,{value:void 0}),d=[];break;case"textarea":i=_a(e,i),n=_a(e,n),d=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=nn)}hl(a,n);var u;a=null;for(q in i)if(!n.hasOwnProperty(q)&&i.hasOwnProperty(q)&&i[q]!=null)if(q==="style"){var y=i[q];for(u in y)y.hasOwnProperty(u)&&(a||(a={}),a[u]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(h.hasOwnProperty(q)?d||(d=[]):(d=d||[]).push(q,null));for(q in n){var N=n[q];if(y=i?.[q],n.hasOwnProperty(q)&&N!==y&&(N!=null||y!=null))if(q==="style")if(y){for(u in y)!y.hasOwnProperty(u)||N&&N.hasOwnProperty(u)||(a||(a={}),a[u]="");for(u in N)N.hasOwnProperty(u)&&y[u]!==N[u]&&(a||(a={}),a[u]=N[u])}else a||(d||(d=[]),d.push(q,a)),a=N;else q==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,y=y?y.__html:void 0,N!=null&&y!==N&&(d=d||[]).push(q,N)):q==="children"?typeof N!="string"&&typeof N!="number"||(d=d||[]).push(q,""+N):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(h.hasOwnProperty(q)?(N!=null&&q==="onScroll"&&Le("scroll",e),d||y===N||(d=[])):(d=d||[]).push(q,N))}a&&(d=d||[]).push("style",a);var q=d;(r.updateQueue=q)&&(r.flags|=4)}},Gc=function(e,r,a,n){a!==n&&(r.flags|=4)};function ms(e,r){if(!Fe)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function st(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(r)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,r}function Sx(e,r,a){var n=r.pendingProps;switch(ei(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(r),null;case 1:return ct(r.type)&&on(),st(r),null;case 3:return n=r.stateNode,va(),_e(dt),_e(rt),xi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(xn(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Dt!==null&&(Vi(Dt),Dt=null))),Oi(e,r),st(r),null;case 5:ui(r);var i=Vr(cs.current);if(a=r.type,e!==null&&r.stateNode!=null)Qc(e,r,a,n,i),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!n){if(r.stateNode===null)throw Error(o(166));return st(r),null}if(e=Vr(Qt.current),xn(r)){n=r.stateNode,a=r.type;var d=r.memoizedProps;switch(n[Ht]=r,n[ns]=d,e=(r.mode&1)!==0,a){case"dialog":Le("cancel",n),Le("close",n);break;case"iframe":case"object":case"embed":Le("load",n);break;case"video":case"audio":for(i=0;i<rs.length;i++)Le(rs[i],n);break;case"source":Le("error",n);break;case"img":case"image":case"link":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"input":Te(n,d),Le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!d.multiple},Le("invalid",n);break;case"textarea":Rs(n,d),Le("invalid",n)}hl(a,d),i=null;for(var u in d)if(d.hasOwnProperty(u)){var y=d[u];u==="children"?typeof y=="string"?n.textContent!==y&&(d.suppressHydrationWarning!==!0&&sn(n.textContent,y,e),i=["children",y]):typeof y=="number"&&n.textContent!==""+y&&(d.suppressHydrationWarning!==!0&&sn(n.textContent,y,e),i=["children",""+y]):h.hasOwnProperty(u)&&y!=null&&u==="onScroll"&&Le("scroll",n)}switch(a){case"input":Ne(n),Wt(n,d,!0);break;case"textarea":Ne(n),Ls(n);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(n.onclick=nn)}n=i,r.updateQueue=n,n!==null&&(r.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Jr(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(a,{is:n.is}):(e=u.createElement(a),a==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,a),e[Ht]=r,e[ns]=n,Hc(e,r,!1,!1),r.stateNode=e;e:{switch(u=xl(a,n),a){case"dialog":Le("cancel",e),Le("close",e),i=n;break;case"iframe":case"object":case"embed":Le("load",e),i=n;break;case"video":case"audio":for(i=0;i<rs.length;i++)Le(rs[i],e);i=n;break;case"source":Le("error",e),i=n;break;case"img":case"image":case"link":Le("error",e),Le("load",e),i=n;break;case"details":Le("toggle",e),i=n;break;case"input":Te(e,n),i=$(e,n),Le("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=D({},n,{value:void 0}),Le("invalid",e);break;case"textarea":Rs(e,n),i=_a(e,n),Le("invalid",e);break;default:i=n}hl(a,i),y=i;for(d in y)if(y.hasOwnProperty(d)){var N=y[d];d==="style"?Lo(e,N):d==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&be(e,N)):d==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&ze(e,N):typeof N=="number"&&ze(e,""+N):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(h.hasOwnProperty(d)?N!=null&&d==="onScroll"&&Le("scroll",e):N!=null&&k(e,d,N,u))}switch(a){case"input":Ne(e),Wt(e,n,!1);break;case"textarea":Ne(e),Ls(e);break;case"option":n.value!=null&&e.setAttribute("value",""+F(n.value));break;case"select":e.multiple=!!n.multiple,d=n.value,d!=null?xr(e,!!n.multiple,d,!1):n.defaultValue!=null&&xr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=nn)}switch(a){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return st(r),null;case 6:if(e&&r.stateNode!=null)Gc(e,r,e.memoizedProps,n);else{if(typeof n!="string"&&r.stateNode===null)throw Error(o(166));if(a=Vr(cs.current),Vr(Qt.current),xn(r)){if(n=r.stateNode,a=r.memoizedProps,n[Ht]=r,(d=n.nodeValue!==a)&&(e=yt,e!==null))switch(e.tag){case 3:sn(n.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sn(n.nodeValue,a,(e.mode&1)!==0)}d&&(r.flags|=4)}else n=(a.nodeType===9?a:a.ownerDocument).createTextNode(n),n[Ht]=r,r.stateNode=n}return st(r),null;case 13:if(_e(Ue),n=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&vt!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Yd(),ma(),r.flags|=98560,d=!1;else if(d=xn(r),n!==null&&n.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[Ht]=r}else ma(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;st(r),d=!1}else Dt!==null&&(Vi(Dt),Dt=null),d=!0;if(!d)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Ue.current&1)!==0?Ke===0&&(Ke=3):Hi())),r.updateQueue!==null&&(r.flags|=4),st(r),null);case 4:return va(),Oi(e,r),e===null&&as(r.stateNode.containerInfo),st(r),null;case 10:return li(r.type._context),st(r),null;case 17:return ct(r.type)&&on(),st(r),null;case 19:if(_e(Ue),d=r.memoizedState,d===null)return st(r),null;if(n=(r.flags&128)!==0,u=d.rendering,u===null)if(n)ms(d,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(u=vn(e),u!==null){for(r.flags|=128,ms(d,!1),n=u.updateQueue,n!==null&&(r.updateQueue=n,r.flags|=4),r.subtreeFlags=0,n=a,a=r.child;a!==null;)d=a,e=n,d.flags&=14680066,u=d.alternate,u===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=u.childLanes,d.lanes=u.lanes,d.child=u.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=u.memoizedProps,d.memoizedState=u.memoizedState,d.updateQueue=u.updateQueue,d.type=u.type,e=u.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Pe(Ue,Ue.current&1|2),r.child}e=e.sibling}d.tail!==null&&qe()>wa&&(r.flags|=128,n=!0,ms(d,!1),r.lanes=4194304)}else{if(!n)if(e=vn(u),e!==null){if(r.flags|=128,n=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ms(d,!0),d.tail===null&&d.tailMode==="hidden"&&!u.alternate&&!Fe)return st(r),null}else 2*qe()-d.renderingStartTime>wa&&a!==1073741824&&(r.flags|=128,n=!0,ms(d,!1),r.lanes=4194304);d.isBackwards?(u.sibling=r.child,r.child=u):(a=d.last,a!==null?a.sibling=u:r.child=u,d.last=u)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=qe(),r.sibling=null,a=Ue.current,Pe(Ue,n?a&1|2:a&1),r):(st(r),null);case 22:case 23:return qi(),n=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(r.flags|=8192),n&&(r.mode&1)!==0?(bt&1073741824)!==0&&(st(r),r.subtreeFlags&6&&(r.flags|=8192)):st(r),null;case 24:return null;case 25:return null}throw Error(o(156,r.tag))}function Cx(e,r){switch(ei(r),r.tag){case 1:return ct(r.type)&&on(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return va(),_e(dt),_e(rt),xi(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return ui(r),null;case 13:if(_e(Ue),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(o(340));ma()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return _e(Ue),null;case 4:return va(),null;case 10:return li(r.type._context),null;case 22:case 23:return qi(),null;case 24:return null;default:return null}}var Mn=!1,nt=!1,Ex=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ka(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(n){We(e,r,n)}else a.current=null}function zi(e,r,a){try{a()}catch(n){We(e,r,n)}}var Kc=!1;function Mx(e,r){if(ql=Qs,e=Ed(),Ll(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var i=n.anchorOffset,d=n.focusNode;n=n.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var u=0,y=-1,N=-1,q=0,X=0,J=e,K=null;t:for(;;){for(var se;J!==a||i!==0&&J.nodeType!==3||(y=u+i),J!==d||n!==0&&J.nodeType!==3||(N=u+n),J.nodeType===3&&(u+=J.nodeValue.length),(se=J.firstChild)!==null;)K=J,J=se;for(;;){if(J===e)break t;if(K===a&&++q===i&&(y=u),K===d&&++X===n&&(N=u),(se=J.nextSibling)!==null)break;J=K,K=J.parentNode}J=se}a=y===-1||N===-1?null:{start:y,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hl={focusedElem:e,selectionRange:a},Qs=!1,oe=r;oe!==null;)if(r=oe,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,oe=e;else for(;oe!==null;){r=oe;try{var de=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var he=de.memoizedProps,He=de.memoizedState,_=r.stateNode,I=_.getSnapshotBeforeUpdate(r.elementType===r.type?he:Lt(r.type,he),He);_.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var U=r.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Z){We(r,r.return,Z)}if(e=r.sibling,e!==null){e.return=r.return,oe=e;break}oe=r.return}return de=Kc,Kc=!1,de}function ps(e,r,a){var n=r.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var d=i.destroy;i.destroy=void 0,d!==void 0&&zi(r,a,d)}i=i.next}while(i!==n)}}function In(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var n=a.create;a.destroy=n()}a=a.next}while(a!==r)}}function Pi(e){var r=e.ref;if(r!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof r=="function"?r(e):r.current=e}}function Xc(e){var r=e.alternate;r!==null&&(e.alternate=null,Xc(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Ht],delete r[ns],delete r[Xl],delete r[cx],delete r[ux])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yc(e){return e.tag===5||e.tag===3||e.tag===4}function Jc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ri(e,r,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=nn));else if(n!==4&&(e=e.child,e!==null))for(Ri(e,r,a),e=e.sibling;e!==null;)Ri(e,r,a),e=e.sibling}function Di(e,r,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Di(e,r,a),e=e.sibling;e!==null;)Di(e,r,a),e=e.sibling}var et=null,_t=!1;function Er(e,r,a){for(a=a.child;a!==null;)Zc(e,r,a),a=a.sibling}function Zc(e,r,a){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Us,a)}catch{}switch(a.tag){case 5:nt||ka(a,r);case 6:var n=et,i=_t;et=null,Er(e,r,a),et=n,_t=i,et!==null&&(_t?(e=et,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):et.removeChild(a.stateNode));break;case 18:et!==null&&(_t?(e=et,a=a.stateNode,e.nodeType===8?Kl(e.parentNode,a):e.nodeType===1&&Kl(e,a),Ga(e)):Kl(et,a.stateNode));break;case 4:n=et,i=_t,et=a.stateNode.containerInfo,_t=!0,Er(e,r,a),et=n,_t=i;break;case 0:case 11:case 14:case 15:if(!nt&&(n=a.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var d=i,u=d.destroy;d=d.tag,u!==void 0&&((d&2)!==0||(d&4)!==0)&&zi(a,r,u),i=i.next}while(i!==n)}Er(e,r,a);break;case 1:if(!nt&&(ka(a,r),n=a.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=a.memoizedProps,n.state=a.memoizedState,n.componentWillUnmount()}catch(y){We(a,r,y)}Er(e,r,a);break;case 21:Er(e,r,a);break;case 22:a.mode&1?(nt=(n=nt)||a.memoizedState!==null,Er(e,r,a),nt=n):Er(e,r,a);break;default:Er(e,r,a)}}function eu(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Ex),r.forEach(function(n){var i=Lx.bind(null,e,n);a.has(n)||(a.add(n),n.then(i,i))})}}function $t(e,r){var a=r.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n];try{var d=e,u=r,y=u;e:for(;y!==null;){switch(y.tag){case 5:et=y.stateNode,_t=!1;break e;case 3:et=y.stateNode.containerInfo,_t=!0;break e;case 4:et=y.stateNode.containerInfo,_t=!0;break e}y=y.return}if(et===null)throw Error(o(160));Zc(d,u,i),et=null,_t=!1;var N=i.alternate;N!==null&&(N.return=null),i.return=null}catch(q){We(i,r,q)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)tu(r,e),r=r.sibling}function tu(e,r){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($t(r,e),Kt(e),n&4){try{ps(3,e,e.return),In(3,e)}catch(he){We(e,e.return,he)}try{ps(5,e,e.return)}catch(he){We(e,e.return,he)}}break;case 1:$t(r,e),Kt(e),n&512&&a!==null&&ka(a,a.return);break;case 5:if($t(r,e),Kt(e),n&512&&a!==null&&ka(a,a.return),e.flags&32){var i=e.stateNode;try{ze(i,"")}catch(he){We(e,e.return,he)}}if(n&4&&(i=e.stateNode,i!=null)){var d=e.memoizedProps,u=a!==null?a.memoizedProps:d,y=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{y==="input"&&d.type==="radio"&&d.name!=null&&pt(i,d),xl(y,u);var q=xl(y,d);for(u=0;u<N.length;u+=2){var X=N[u],J=N[u+1];X==="style"?Lo(i,J):X==="dangerouslySetInnerHTML"?be(i,J):X==="children"?ze(i,J):k(i,X,J,q)}switch(y){case"input":jt(i,d);break;case"textarea":Ds(i,d);break;case"select":var K=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!d.multiple;var se=d.value;se!=null?xr(i,!!d.multiple,se,!1):K!==!!d.multiple&&(d.defaultValue!=null?xr(i,!!d.multiple,d.defaultValue,!0):xr(i,!!d.multiple,d.multiple?[]:"",!1))}i[ns]=d}catch(he){We(e,e.return,he)}}break;case 6:if($t(r,e),Kt(e),n&4){if(e.stateNode===null)throw Error(o(162));i=e.stateNode,d=e.memoizedProps;try{i.nodeValue=d}catch(he){We(e,e.return,he)}}break;case 3:if($t(r,e),Kt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Ga(r.containerInfo)}catch(he){We(e,e.return,he)}break;case 4:$t(r,e),Kt(e);break;case 13:$t(r,e),Kt(e),i=e.child,i.flags&8192&&(d=i.memoizedState!==null,i.stateNode.isHidden=d,!d||i.alternate!==null&&i.alternate.memoizedState!==null||($i=qe())),n&4&&eu(e);break;case 22:if(X=a!==null&&a.memoizedState!==null,e.mode&1?(nt=(q=nt)||X,$t(r,e),nt=q):$t(r,e),Kt(e),n&8192){if(q=e.memoizedState!==null,(e.stateNode.isHidden=q)&&!X&&(e.mode&1)!==0)for(oe=e,X=e.child;X!==null;){for(J=oe=X;oe!==null;){switch(K=oe,se=K.child,K.tag){case 0:case 11:case 14:case 15:ps(4,K,K.return);break;case 1:ka(K,K.return);var de=K.stateNode;if(typeof de.componentWillUnmount=="function"){n=K,a=K.return;try{r=n,de.props=r.memoizedProps,de.state=r.memoizedState,de.componentWillUnmount()}catch(he){We(n,a,he)}}break;case 5:ka(K,K.return);break;case 22:if(K.memoizedState!==null){su(J);continue}}se!==null?(se.return=K,oe=se):su(J)}X=X.sibling}e:for(X=null,J=e;;){if(J.tag===5){if(X===null){X=J;try{i=J.stateNode,q?(d=i.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(y=J.stateNode,N=J.memoizedProps.style,u=N!=null&&N.hasOwnProperty("display")?N.display:null,y.style.display=ea("display",u))}catch(he){We(e,e.return,he)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=q?"":J.memoizedProps}catch(he){We(e,e.return,he)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===e)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===e)break e;for(;J.sibling===null;){if(J.return===null||J.return===e)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:$t(r,e),Kt(e),n&4&&eu(e);break;case 21:break;default:$t(r,e),Kt(e)}}function Kt(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(Yc(a)){var n=a;break e}a=a.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ze(i,""),n.flags&=-33);var d=Jc(e);Di(e,d,i);break;case 3:case 4:var u=n.stateNode.containerInfo,y=Jc(e);Ri(e,y,u);break;default:throw Error(o(161))}}catch(N){We(e,e.return,N)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Ix(e,r,a){oe=e,ru(e)}function ru(e,r,a){for(var n=(e.mode&1)!==0;oe!==null;){var i=oe,d=i.child;if(i.tag===22&&n){var u=i.memoizedState!==null||Mn;if(!u){var y=i.alternate,N=y!==null&&y.memoizedState!==null||nt;y=Mn;var q=nt;if(Mn=u,(nt=N)&&!q)for(oe=i;oe!==null;)u=oe,N=u.child,u.tag===22&&u.memoizedState!==null?nu(i):N!==null?(N.return=u,oe=N):nu(i);for(;d!==null;)oe=d,ru(d),d=d.sibling;oe=i,Mn=y,nt=q}au(e)}else(i.subtreeFlags&8772)!==0&&d!==null?(d.return=i,oe=d):au(e)}}function au(e){for(;oe!==null;){var r=oe;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:nt||In(5,r);break;case 1:var n=r.stateNode;if(r.flags&4&&!nt)if(a===null)n.componentDidMount();else{var i=r.elementType===r.type?a.memoizedProps:Lt(r.type,a.memoizedProps);n.componentDidUpdate(i,a.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var d=r.updateQueue;d!==null&&sc(r,d,n);break;case 3:var u=r.updateQueue;if(u!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}sc(r,u,a)}break;case 5:var y=r.stateNode;if(a===null&&r.flags&4){a=y;var N=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var q=r.alternate;if(q!==null){var X=q.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&Ga(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}nt||r.flags&512&&Pi(r)}catch(K){We(r,r.return,K)}}if(r===e){oe=null;break}if(a=r.sibling,a!==null){a.return=r.return,oe=a;break}oe=r.return}}function su(e){for(;oe!==null;){var r=oe;if(r===e){oe=null;break}var a=r.sibling;if(a!==null){a.return=r.return,oe=a;break}oe=r.return}}function nu(e){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{In(4,r)}catch(N){We(r,a,N)}break;case 1:var n=r.stateNode;if(typeof n.componentDidMount=="function"){var i=r.return;try{n.componentDidMount()}catch(N){We(r,i,N)}}var d=r.return;try{Pi(r)}catch(N){We(r,d,N)}break;case 5:var u=r.return;try{Pi(r)}catch(N){We(r,u,N)}}}catch(N){We(r,r.return,N)}if(r===e){oe=null;break}var y=r.sibling;if(y!==null){y.return=r.return,oe=y;break}oe=r.return}}var Ax=Math.ceil,An=P.ReactCurrentDispatcher,Li=P.ReactCurrentOwner,Et=P.ReactCurrentBatchConfig,Ee=0,Ye=null,Qe=null,tt=0,bt=0,ja=jr(0),Ke=0,fs=null,qr=0,Tn=0,_i=0,ys=null,ht=null,$i=0,wa=1/0,dr=null,On=!1,Fi=null,Mr=null,zn=!1,Ir=null,Pn=0,vs=0,Ui=null,Rn=-1,Dn=0;function it(){return(Ee&6)!==0?qe():Rn!==-1?Rn:Rn=qe()}function Ar(e){return(e.mode&1)===0?1:(Ee&2)!==0&&tt!==0?tt&-tt:xx.transition!==null?(Dn===0&&(Dn=Jo()),Dn):(e=Oe,e!==0||(e=window.event,e=e===void 0?16:id(e.type)),e)}function Ft(e,r,a,n){if(50<vs)throw vs=0,Ui=null,Error(o(185));Va(e,a,n),((Ee&2)===0||e!==Ye)&&(e===Ye&&((Ee&2)===0&&(Tn|=a),Ke===4&&Tr(e,tt)),xt(e,n),a===1&&Ee===0&&(r.mode&1)===0&&(wa=qe()+500,cn&&Nr()))}function xt(e,r){var a=e.callbackNode;xh(e,r);var n=Ws(e,e===Ye?tt:0);if(n===0)a!==null&&Ko(a),e.callbackNode=null,e.callbackPriority=0;else if(r=n&-n,e.callbackPriority!==r){if(a!=null&&Ko(a),r===1)e.tag===0?hx(iu.bind(null,e)):Hd(iu.bind(null,e)),ox(function(){(Ee&6)===0&&Nr()}),a=null;else{switch(Zo(n)){case 1:a=bl;break;case 4:a=Xo;break;case 16:a=Fs;break;case 536870912:a=Yo;break;default:a=Fs}a=mu(a,lu.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function lu(e,r){if(Rn=-1,Dn=0,(Ee&6)!==0)throw Error(o(327));var a=e.callbackNode;if(Na()&&e.callbackNode!==a)return null;var n=Ws(e,e===Ye?tt:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||r)r=Ln(e,n);else{r=n;var i=Ee;Ee|=2;var d=du();(Ye!==e||tt!==r)&&(dr=null,wa=qe()+500,Qr(e,r));do try{zx();break}catch(y){ou(e,y)}while(!0);ni(),An.current=d,Ee=i,Qe!==null?r=0:(Ye=null,tt=0,r=Ke)}if(r!==0){if(r===2&&(i=kl(e),i!==0&&(n=i,r=Bi(e,i))),r===1)throw a=fs,Qr(e,0),Tr(e,n),xt(e,qe()),a;if(r===6)Tr(e,n);else{if(i=e.current.alternate,(n&30)===0&&!Tx(i)&&(r=Ln(e,n),r===2&&(d=kl(e),d!==0&&(n=d,r=Bi(e,d))),r===1))throw a=fs,Qr(e,0),Tr(e,n),xt(e,qe()),a;switch(e.finishedWork=i,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:Gr(e,ht,dr);break;case 3:if(Tr(e,n),(n&130023424)===n&&(r=$i+500-qe(),10<r)){if(Ws(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){it(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gl(Gr.bind(null,e,ht,dr),r);break}Gr(e,ht,dr);break;case 4:if(Tr(e,n),(n&4194240)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Pt(n);d=1<<u,u=r[u],u>i&&(i=u),n&=~d}if(n=i,n=qe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ax(n/1960))-n,10<n){e.timeoutHandle=Gl(Gr.bind(null,e,ht,dr),n);break}Gr(e,ht,dr);break;case 5:Gr(e,ht,dr);break;default:throw Error(o(329))}}}return xt(e,qe()),e.callbackNode===a?lu.bind(null,e):null}function Bi(e,r){var a=ys;return e.current.memoizedState.isDehydrated&&(Qr(e,r).flags|=256),e=Ln(e,r),e!==2&&(r=ht,ht=a,r!==null&&Vi(r)),e}function Vi(e){ht===null?ht=e:ht.push.apply(ht,e)}function Tx(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var n=0;n<a.length;n++){var i=a[n],d=i.getSnapshot;i=i.value;try{if(!Rt(d(),i))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Tr(e,r){for(r&=~_i,r&=~Tn,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-Pt(r),n=1<<a;e[a]=-1,r&=~n}}function iu(e){if((Ee&6)!==0)throw Error(o(327));Na();var r=Ws(e,0);if((r&1)===0)return xt(e,qe()),null;var a=Ln(e,r);if(e.tag!==0&&a===2){var n=kl(e);n!==0&&(r=n,a=Bi(e,n))}if(a===1)throw a=fs,Qr(e,0),Tr(e,r),xt(e,qe()),a;if(a===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Gr(e,ht,dr),xt(e,qe()),null}function Wi(e,r){var a=Ee;Ee|=1;try{return e(r)}finally{Ee=a,Ee===0&&(wa=qe()+500,cn&&Nr())}}function Hr(e){Ir!==null&&Ir.tag===0&&(Ee&6)===0&&Na();var r=Ee;Ee|=1;var a=Et.transition,n=Oe;try{if(Et.transition=null,Oe=1,e)return e()}finally{Oe=n,Et.transition=a,Ee=r,(Ee&6)===0&&Nr()}}function qi(){bt=ja.current,_e(ja)}function Qr(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,ix(a)),Qe!==null)for(a=Qe.return;a!==null;){var n=a;switch(ei(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&on();break;case 3:va(),_e(dt),_e(rt),xi();break;case 5:ui(n);break;case 4:va();break;case 13:_e(Ue);break;case 19:_e(Ue);break;case 10:li(n.type._context);break;case 22:case 23:qi()}a=a.return}if(Ye=e,Qe=e=Or(e.current,null),tt=bt=r,Ke=0,fs=null,_i=Tn=qr=0,ht=ys=null,Br!==null){for(r=0;r<Br.length;r++)if(a=Br[r],n=a.interleaved,n!==null){a.interleaved=null;var i=n.next,d=a.pending;if(d!==null){var u=d.next;d.next=i,n.next=u}a.pending=n}Br=null}return e}function ou(e,r){do{var a=Qe;try{if(ni(),bn.current=Nn,kn){for(var n=Be.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}kn=!1}if(Wr=0,Xe=Ge=Be=null,us=!1,hs=0,Li.current=null,a===null||a.return===null){Ke=1,fs=r,Qe=null;break}e:{var d=e,u=a.return,y=a,N=r;if(r=tt,y.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var q=N,X=y,J=X.tag;if((X.mode&1)===0&&(J===0||J===11||J===15)){var K=X.alternate;K?(X.updateQueue=K.updateQueue,X.memoizedState=K.memoizedState,X.lanes=K.lanes):(X.updateQueue=null,X.memoizedState=null)}var se=zc(u);if(se!==null){se.flags&=-257,Pc(se,u,y,d,r),se.mode&1&&Oc(d,q,r),r=se,N=q;var de=r.updateQueue;if(de===null){var he=new Set;he.add(N),r.updateQueue=he}else de.add(N);break e}else{if((r&1)===0){Oc(d,q,r),Hi();break e}N=Error(o(426))}}else if(Fe&&y.mode&1){var He=zc(u);if(He!==null){(He.flags&65536)===0&&(He.flags|=256),Pc(He,u,y,d,r),ai(ba(N,y));break e}}d=N=ba(N,y),Ke!==4&&(Ke=2),ys===null?ys=[d]:ys.push(d),d=u;do{switch(d.tag){case 3:d.flags|=65536,r&=-r,d.lanes|=r;var _=Ac(d,N,r);ac(d,_);break e;case 1:y=N;var I=d.type,U=d.stateNode;if((d.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Mr===null||!Mr.has(U)))){d.flags|=65536,r&=-r,d.lanes|=r;var Z=Tc(d,y,r);ac(d,Z);break e}}d=d.return}while(d!==null)}uu(a)}catch(ge){r=ge,Qe===a&&a!==null&&(Qe=a=a.return);continue}break}while(!0)}function du(){var e=An.current;return An.current=Nn,e===null?Nn:e}function Hi(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ye===null||(qr&268435455)===0&&(Tn&268435455)===0||Tr(Ye,tt)}function Ln(e,r){var a=Ee;Ee|=2;var n=du();(Ye!==e||tt!==r)&&(dr=null,Qr(e,r));do try{Ox();break}catch(i){ou(e,i)}while(!0);if(ni(),Ee=a,An.current=n,Qe!==null)throw Error(o(261));return Ye=null,tt=0,Ke}function Ox(){for(;Qe!==null;)cu(Qe)}function zx(){for(;Qe!==null&&!sh();)cu(Qe)}function cu(e){var r=gu(e.alternate,e,bt);e.memoizedProps=e.pendingProps,r===null?uu(e):Qe=r,Li.current=null}function uu(e){var r=e;do{var a=r.alternate;if(e=r.return,(r.flags&32768)===0){if(a=Sx(a,r,bt),a!==null){Qe=a;return}}else{if(a=Cx(a,r),a!==null){a.flags&=32767,Qe=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,Qe=null;return}}if(r=r.sibling,r!==null){Qe=r;return}Qe=r=e}while(r!==null);Ke===0&&(Ke=5)}function Gr(e,r,a){var n=Oe,i=Et.transition;try{Et.transition=null,Oe=1,Px(e,r,a,n)}finally{Et.transition=i,Oe=n}return null}function Px(e,r,a,n){do Na();while(Ir!==null);if((Ee&6)!==0)throw Error(o(327));a=e.finishedWork;var i=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var d=a.lanes|a.childLanes;if(gh(e,d),e===Ye&&(Qe=Ye=null,tt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||zn||(zn=!0,mu(Fs,function(){return Na(),null})),d=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||d){d=Et.transition,Et.transition=null;var u=Oe;Oe=1;var y=Ee;Ee|=4,Li.current=null,Mx(e,a),tu(a,e),ex(Hl),Qs=!!ql,Hl=ql=null,e.current=a,Ix(a),nh(),Ee=y,Oe=u,Et.transition=d}else e.current=a;if(zn&&(zn=!1,Ir=e,Pn=i),d=e.pendingLanes,d===0&&(Mr=null),oh(a.stateNode),xt(e,qe()),r!==null)for(n=e.onRecoverableError,a=0;a<r.length;a++)i=r[a],n(i.value,{componentStack:i.stack,digest:i.digest});if(On)throw On=!1,e=Fi,Fi=null,e;return(Pn&1)!==0&&e.tag!==0&&Na(),d=e.pendingLanes,(d&1)!==0?e===Ui?vs++:(vs=0,Ui=e):vs=0,Nr(),null}function Na(){if(Ir!==null){var e=Zo(Pn),r=Et.transition,a=Oe;try{if(Et.transition=null,Oe=16>e?16:e,Ir===null)var n=!1;else{if(e=Ir,Ir=null,Pn=0,(Ee&6)!==0)throw Error(o(331));var i=Ee;for(Ee|=4,oe=e.current;oe!==null;){var d=oe,u=d.child;if((oe.flags&16)!==0){var y=d.deletions;if(y!==null){for(var N=0;N<y.length;N++){var q=y[N];for(oe=q;oe!==null;){var X=oe;switch(X.tag){case 0:case 11:case 15:ps(8,X,d)}var J=X.child;if(J!==null)J.return=X,oe=J;else for(;oe!==null;){X=oe;var K=X.sibling,se=X.return;if(Xc(X),X===q){oe=null;break}if(K!==null){K.return=se,oe=K;break}oe=se}}}var de=d.alternate;if(de!==null){var he=de.child;if(he!==null){de.child=null;do{var He=he.sibling;he.sibling=null,he=He}while(he!==null)}}oe=d}}if((d.subtreeFlags&2064)!==0&&u!==null)u.return=d,oe=u;else e:for(;oe!==null;){if(d=oe,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:ps(9,d,d.return)}var _=d.sibling;if(_!==null){_.return=d.return,oe=_;break e}oe=d.return}}var I=e.current;for(oe=I;oe!==null;){u=oe;var U=u.child;if((u.subtreeFlags&2064)!==0&&U!==null)U.return=u,oe=U;else e:for(u=I;oe!==null;){if(y=oe,(y.flags&2048)!==0)try{switch(y.tag){case 0:case 11:case 15:In(9,y)}}catch(ge){We(y,y.return,ge)}if(y===u){oe=null;break e}var Z=y.sibling;if(Z!==null){Z.return=y.return,oe=Z;break e}oe=y.return}}if(Ee=i,Nr(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Us,e)}catch{}n=!0}return n}finally{Oe=a,Et.transition=r}}return!1}function hu(e,r,a){r=ba(a,r),r=Ac(e,r,1),e=Cr(e,r,1),r=it(),e!==null&&(Va(e,1,r),xt(e,r))}function We(e,r,a){if(e.tag===3)hu(e,e,a);else for(;r!==null;){if(r.tag===3){hu(r,e,a);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Mr===null||!Mr.has(n))){e=ba(a,e),e=Tc(r,e,1),r=Cr(r,e,1),e=it(),r!==null&&(Va(r,1,e),xt(r,e));break}}r=r.return}}function Rx(e,r,a){var n=e.pingCache;n!==null&&n.delete(r),r=it(),e.pingedLanes|=e.suspendedLanes&a,Ye===e&&(tt&a)===a&&(Ke===4||Ke===3&&(tt&130023424)===tt&&500>qe()-$i?Qr(e,0):_i|=a),xt(e,r)}function xu(e,r){r===0&&((e.mode&1)===0?r=1:(r=Vs,Vs<<=1,(Vs&130023424)===0&&(Vs=4194304)));var a=it();e=lr(e,r),e!==null&&(Va(e,r,a),xt(e,a))}function Dx(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),xu(e,a)}function Lx(e,r){var a=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}n!==null&&n.delete(r),xu(e,a)}var gu;gu=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||dt.current)ut=!0;else{if((e.lanes&a)===0&&(r.flags&128)===0)return ut=!1,Nx(e,r,a);ut=(e.flags&131072)!==0}else ut=!1,Fe&&(r.flags&1048576)!==0&&Qd(r,hn,r.index);switch(r.lanes=0,r.tag){case 2:var n=r.type;En(e,r),e=r.pendingProps;var i=ha(r,rt.current);ya(r,a),i=pi(null,r,n,e,i,a);var d=fi();return r.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,ct(n)?(d=!0,dn(r)):d=!1,r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,di(r),i.updater=Sn,r.stateNode=i,i._reactInternals=r,wi(r,n,e,a),r=Ei(null,r,n,!0,d,a)):(r.tag=0,Fe&&d&&Zl(r),lt(null,r,i,a),r=r.child),r;case 16:n=r.elementType;e:{switch(En(e,r),e=r.pendingProps,i=n._init,n=i(n._payload),r.type=n,i=r.tag=$x(n),e=Lt(n,e),i){case 0:r=Ci(null,r,n,e,a);break e;case 1:r=Fc(null,r,n,e,a);break e;case 11:r=Rc(null,r,n,e,a);break e;case 14:r=Dc(null,r,n,Lt(n.type,e),a);break e}throw Error(o(306,n,""))}return r;case 0:return n=r.type,i=r.pendingProps,i=r.elementType===n?i:Lt(n,i),Ci(e,r,n,i,a);case 1:return n=r.type,i=r.pendingProps,i=r.elementType===n?i:Lt(n,i),Fc(e,r,n,i,a);case 3:e:{if(Uc(r),e===null)throw Error(o(387));n=r.pendingProps,d=r.memoizedState,i=d.element,rc(e,r),yn(r,n,null,a);var u=r.memoizedState;if(n=u.element,d.isDehydrated)if(d={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){i=ba(Error(o(423)),r),r=Bc(e,r,n,a,i);break e}else if(n!==i){i=ba(Error(o(424)),r),r=Bc(e,r,n,a,i);break e}else for(vt=kr(r.stateNode.containerInfo.firstChild),yt=r,Fe=!0,Dt=null,a=ec(r,null,n,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ma(),n===i){r=or(e,r,a);break e}lt(e,r,n,a)}r=r.child}return r;case 5:return nc(r),e===null&&ri(r),n=r.type,i=r.pendingProps,d=e!==null?e.memoizedProps:null,u=i.children,Ql(n,i)?u=null:d!==null&&Ql(n,d)&&(r.flags|=32),$c(e,r),lt(e,r,u,a),r.child;case 6:return e===null&&ri(r),null;case 13:return Vc(e,r,a);case 4:return ci(r,r.stateNode.containerInfo),n=r.pendingProps,e===null?r.child=pa(r,null,n,a):lt(e,r,n,a),r.child;case 11:return n=r.type,i=r.pendingProps,i=r.elementType===n?i:Lt(n,i),Rc(e,r,n,i,a);case 7:return lt(e,r,r.pendingProps,a),r.child;case 8:return lt(e,r,r.pendingProps.children,a),r.child;case 12:return lt(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(n=r.type._context,i=r.pendingProps,d=r.memoizedProps,u=i.value,Pe(mn,n._currentValue),n._currentValue=u,d!==null)if(Rt(d.value,u)){if(d.children===i.children&&!dt.current){r=or(e,r,a);break e}}else for(d=r.child,d!==null&&(d.return=r);d!==null;){var y=d.dependencies;if(y!==null){u=d.child;for(var N=y.firstContext;N!==null;){if(N.context===n){if(d.tag===1){N=ir(-1,a&-a),N.tag=2;var q=d.updateQueue;if(q!==null){q=q.shared;var X=q.pending;X===null?N.next=N:(N.next=X.next,X.next=N),q.pending=N}}d.lanes|=a,N=d.alternate,N!==null&&(N.lanes|=a),ii(d.return,a,r),y.lanes|=a;break}N=N.next}}else if(d.tag===10)u=d.type===r.type?null:d.child;else if(d.tag===18){if(u=d.return,u===null)throw Error(o(341));u.lanes|=a,y=u.alternate,y!==null&&(y.lanes|=a),ii(u,a,r),u=d.sibling}else u=d.child;if(u!==null)u.return=d;else for(u=d;u!==null;){if(u===r){u=null;break}if(d=u.sibling,d!==null){d.return=u.return,u=d;break}u=u.return}d=u}lt(e,r,i.children,a),r=r.child}return r;case 9:return i=r.type,n=r.pendingProps.children,ya(r,a),i=St(i),n=n(i),r.flags|=1,lt(e,r,n,a),r.child;case 14:return n=r.type,i=Lt(n,r.pendingProps),i=Lt(n.type,i),Dc(e,r,n,i,a);case 15:return Lc(e,r,r.type,r.pendingProps,a);case 17:return n=r.type,i=r.pendingProps,i=r.elementType===n?i:Lt(n,i),En(e,r),r.tag=1,ct(n)?(e=!0,dn(r)):e=!1,ya(r,a),Mc(r,n,i),wi(r,n,i,a),Ei(null,r,n,!0,e,a);case 19:return qc(e,r,a);case 22:return _c(e,r,a)}throw Error(o(156,r.tag))};function mu(e,r){return Go(e,r)}function _x(e,r,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,r,a,n){return new _x(e,r,a,n)}function Qi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $x(e){if(typeof e=="function")return Qi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===v)return 11;if(e===xe)return 14}return 2}function Or(e,r){var a=e.alternate;return a===null?(a=Mt(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function _n(e,r,a,n,i,d){var u=2;if(n=e,typeof e=="function")Qi(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case ee:return Kr(a.children,i,d,r);case Q:u=8,i|=8;break;case ie:return e=Mt(12,a,r,i|2),e.elementType=ie,e.lanes=d,e;case A:return e=Mt(13,a,r,i),e.elementType=A,e.lanes=d,e;case te:return e=Mt(19,a,r,i),e.elementType=te,e.lanes=d,e;case je:return $n(a,i,d,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ce:u=10;break e;case W:u=9;break e;case v:u=11;break e;case xe:u=14;break e;case Se:u=16,n=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return r=Mt(u,a,r,i),r.elementType=e,r.type=n,r.lanes=d,r}function Kr(e,r,a,n){return e=Mt(7,e,n,r),e.lanes=a,e}function $n(e,r,a,n){return e=Mt(22,e,n,r),e.elementType=je,e.lanes=a,e.stateNode={isHidden:!1},e}function Gi(e,r,a){return e=Mt(6,e,null,r),e.lanes=a,e}function Ki(e,r,a){return r=Mt(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function Fx(e,r,a,n,i){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jl(0),this.expirationTimes=jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xi(e,r,a,n,i,d,u,y,N){return e=new Fx(e,r,a,y,N),r===1?(r=1,d===!0&&(r|=8)):r=0,d=Mt(3,null,null,r),e.current=d,d.stateNode=e,d.memoizedState={element:n,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},di(d),e}function Ux(e,r,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:n==null?null:""+n,children:e,containerInfo:r,implementation:a}}function pu(e){if(!e)return wr;e=e._reactInternals;e:{if(Lr(e)!==e||e.tag!==1)throw Error(o(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(ct(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(o(171))}if(e.tag===1){var a=e.type;if(ct(a))return Wd(e,a,r)}return r}function fu(e,r,a,n,i,d,u,y,N){return e=Xi(a,n,!0,e,i,d,u,y,N),e.context=pu(null),a=e.current,n=it(),i=Ar(a),d=ir(n,i),d.callback=r??null,Cr(a,d,i),e.current.lanes=i,Va(e,i,n),xt(e,n),e}function Fn(e,r,a,n){var i=r.current,d=it(),u=Ar(i);return a=pu(a),r.context===null?r.context=a:r.pendingContext=a,r=ir(d,u),r.payload={element:e},n=n===void 0?null:n,n!==null&&(r.callback=n),e=Cr(i,r,u),e!==null&&(Ft(e,i,u,d),fn(e,i,u)),u}function Un(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yu(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Yi(e,r){yu(e,r),(e=e.alternate)&&yu(e,r)}function Bx(){return null}var vu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ji(e){this._internalRoot=e}Bn.prototype.render=Ji.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(o(409));Fn(e,r,null,null)},Bn.prototype.unmount=Ji.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Hr(function(){Fn(null,e,null,null)}),r[rr]=null}};function Bn(e){this._internalRoot=e}Bn.prototype.unstable_scheduleHydration=function(e){if(e){var r=rd();e={blockedOn:null,target:e,priority:r};for(var a=0;a<yr.length&&r!==0&&r<yr[a].priority;a++);yr.splice(a,0,e),a===0&&nd(e)}};function Zi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bu(){}function Vx(e,r,a,n,i){if(i){if(typeof n=="function"){var d=n;n=function(){var q=Un(u);d.call(q)}}var u=fu(r,n,e,0,null,!1,!1,"",bu);return e._reactRootContainer=u,e[rr]=u.current,as(e.nodeType===8?e.parentNode:e),Hr(),u}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var y=n;n=function(){var q=Un(N);y.call(q)}}var N=Xi(e,0,!1,null,null,!1,!1,"",bu);return e._reactRootContainer=N,e[rr]=N.current,as(e.nodeType===8?e.parentNode:e),Hr(function(){Fn(r,N,a,n)}),N}function Wn(e,r,a,n,i){var d=a._reactRootContainer;if(d){var u=d;if(typeof i=="function"){var y=i;i=function(){var N=Un(u);y.call(N)}}Fn(r,u,e,i)}else u=Vx(a,r,e,i,n);return Un(u)}ed=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=Ba(r.pendingLanes);a!==0&&(wl(r,a|1),xt(r,qe()),(Ee&6)===0&&(wa=qe()+500,Nr()))}break;case 13:Hr(function(){var n=lr(e,1);if(n!==null){var i=it();Ft(n,e,1,i)}}),Yi(e,1)}},Nl=function(e){if(e.tag===13){var r=lr(e,134217728);if(r!==null){var a=it();Ft(r,e,134217728,a)}Yi(e,134217728)}},td=function(e){if(e.tag===13){var r=Ar(e),a=lr(e,r);if(a!==null){var n=it();Ft(a,e,r,n)}Yi(e,r)}},rd=function(){return Oe},ad=function(e,r){var a=Oe;try{return Oe=e,r()}finally{Oe=a}},pl=function(e,r,a){switch(r){case"input":if(jt(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var n=a[r];if(n!==e&&n.form===e.form){var i=ln(n);if(!i)throw Error(o(90));Re(n),jt(n,i)}}}break;case"textarea":Ds(e,a);break;case"select":r=a.value,r!=null&&xr(e,!!a.multiple,r,!1)}},Uo=Wi,Bo=Hr;var Wx={usingClientEntryPoint:!1,Events:[ls,ca,ln,$o,Fo,Wi]},bs={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qx={bundleType:bs.bundleType,version:bs.version,rendererPackageName:bs.rendererPackageName,rendererConfig:bs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ho(e),e===null?null:e.stateNode},findFiberByHostInstance:bs.findFiberByHostInstance||Bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qn.isDisabled&&qn.supportsFiber)try{Us=qn.inject(qx),qt=qn}catch{}}return gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wx,gt.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zi(r))throw Error(o(200));return Ux(e,r,null,a)},gt.createRoot=function(e,r){if(!Zi(e))throw Error(o(299));var a=!1,n="",i=vu;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(n=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),r=Xi(e,1,!1,null,null,a,!1,n,i),e[rr]=r.current,as(e.nodeType===8?e.parentNode:e),new Ji(r)},gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Ho(r),e=e===null?null:e.stateNode,e},gt.flushSync=function(e){return Hr(e)},gt.hydrate=function(e,r,a){if(!Vn(r))throw Error(o(200));return Wn(null,e,r,!0,a)},gt.hydrateRoot=function(e,r,a){if(!Zi(e))throw Error(o(405));var n=a!=null&&a.hydratedSources||null,i=!1,d="",u=vu;if(a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onRecoverableError!==void 0&&(u=a.onRecoverableError)),r=fu(r,null,e,1,a??null,i,!1,d,u),e[rr]=r.current,as(e),n)for(e=0;e<n.length;e++)a=n[e],i=a._getVersion,i=i(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,i]:r.mutableSourceEagerHydrationData.push(a,i);return new Bn(r)},gt.render=function(e,r,a){if(!Vn(r))throw Error(o(200));return Wn(null,e,r,!1,a)},gt.unmountComponentAtNode=function(e){if(!Vn(e))throw Error(o(40));return e._reactRootContainer?(Hr(function(){Wn(null,null,e,!1,function(){e._reactRootContainer=null,e[rr]=null})}),!0):!1},gt.unstable_batchedUpdates=Wi,gt.unstable_renderSubtreeIntoContainer=function(e,r,a,n){if(!Vn(a))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return Wn(e,r,a,!1,n)},gt.version="18.3.1-next-f1338f8080-20240426",gt}var Mu;function x0(){if(Mu)return ro.exports;Mu=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(l){console.error(l)}}return s(),ro.exports=eg(),ro.exports}var Iu;function tg(){if(Iu)return Hn;Iu=1;var s=x0();return Hn.createRoot=s.createRoot,Hn.hydrateRoot=s.hydrateRoot,Hn}var rg=tg();const ag=h0(rg);var rl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},sg={setTimeout:(s,l)=>setTimeout(s,l),clearTimeout:s=>clearTimeout(s),setInterval:(s,l)=>setInterval(s,l),clearInterval:s=>clearInterval(s)},ng=class{#e=sg;#t=!1;setTimeoutProvider(s){this.#e=s}setTimeout(s,l){return this.#e.setTimeout(s,l)}clearTimeout(s){this.#e.clearTimeout(s)}setInterval(s,l){return this.#e.setInterval(s,l)}clearInterval(s){this.#e.clearInterval(s)}},co=new ng;function lg(s){setTimeout(s,0)}var al=typeof window>"u"||"Deno"in globalThis;function Ut(){}function ig(s,l){return typeof s=="function"?s(l):s}function og(s){return typeof s=="number"&&s>=0&&s!==1/0}function dg(s,l){return Math.max(s+(l||0)-Date.now(),0)}function uo(s,l){return typeof s=="function"?s(l):s}function cg(s,l){return typeof s=="function"?s(l):s}function Au(s,l){const{type:o="all",exact:c,fetchStatus:h,predicate:x,queryKey:m,stale:f}=s;if(m){if(c){if(l.queryHash!==wo(m,l.options))return!1}else if(!Es(l.queryKey,m))return!1}if(o!=="all"){const w=l.isActive();if(o==="active"&&!w||o==="inactive"&&w)return!1}return!(typeof f=="boolean"&&l.isStale()!==f||h&&h!==l.state.fetchStatus||x&&!x(l))}function Tu(s,l){const{exact:o,status:c,predicate:h,mutationKey:x}=s;if(x){if(!l.options.mutationKey)return!1;if(o){if(Cs(l.options.mutationKey)!==Cs(x))return!1}else if(!Es(l.options.mutationKey,x))return!1}return!(c&&l.state.status!==c||h&&!h(l))}function wo(s,l){return(l?.queryKeyHashFn||Cs)(s)}function Cs(s){return JSON.stringify(s,(l,o)=>ho(o)?Object.keys(o).sort().reduce((c,h)=>(c[h]=o[h],c),{}):o)}function Es(s,l){return s===l?!0:typeof s!=typeof l?!1:s&&l&&typeof s=="object"&&typeof l=="object"?Object.keys(l).every(o=>Es(s[o],l[o])):!1}var ug=Object.prototype.hasOwnProperty;function g0(s,l){if(s===l)return s;const o=Ou(s)&&Ou(l);if(!o&&!(ho(s)&&ho(l)))return l;const h=(o?s:Object.keys(s)).length,x=o?l:Object.keys(l),m=x.length,f=o?new Array(m):{};let w=0;for(let M=0;M<m;M++){const b=o?M:x[M],j=s[b],T=l[b];if(j===T){f[b]=j,(o?M<h:ug.call(s,b))&&w++;continue}if(j===null||T===null||typeof j!="object"||typeof T!="object"){f[b]=T;continue}const O=g0(j,T);f[b]=O,O===j&&w++}return h===m&&w===h?s:f}function Ou(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function ho(s){if(!zu(s))return!1;const l=s.constructor;if(l===void 0)return!0;const o=l.prototype;return!(!zu(o)||!o.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function zu(s){return Object.prototype.toString.call(s)==="[object Object]"}function hg(s){return new Promise(l=>{co.setTimeout(l,s)})}function xg(s,l,o){return typeof o.structuralSharing=="function"?o.structuralSharing(s,l):o.structuralSharing!==!1?g0(s,l):l}function gg(s,l,o=0){const c=[...s,l];return o&&c.length>o?c.slice(1):c}function mg(s,l,o=0){const c=[l,...s];return o&&c.length>o?c.slice(0,-1):c}var No=Symbol();function m0(s,l){return!s.queryFn&&l?.initialPromise?()=>l.initialPromise:!s.queryFn||s.queryFn===No?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var pg=class extends rl{#e;#t;#r;constructor(){super(),this.#r=s=>{if(!al&&window.addEventListener){const l=()=>s();return window.addEventListener("visibilitychange",l,!1),()=>{window.removeEventListener("visibilitychange",l)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#r=s,this.#t?.(),this.#t=s(l=>{typeof l=="boolean"?this.setFocused(l):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(l=>{l(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},p0=new pg;function fg(){let s,l;const o=new Promise((h,x)=>{s=h,l=x});o.status="pending",o.catch(()=>{});function c(h){Object.assign(o,h),delete o.resolve,delete o.reject}return o.resolve=h=>{c({status:"fulfilled",value:h}),s(h)},o.reject=h=>{c({status:"rejected",reason:h}),l(h)},o}var yg=lg;function vg(){let s=[],l=0,o=f=>{f()},c=f=>{f()},h=yg;const x=f=>{l?s.push(f):h(()=>{o(f)})},m=()=>{const f=s;s=[],f.length&&h(()=>{c(()=>{f.forEach(w=>{o(w)})})})};return{batch:f=>{let w;l++;try{w=f()}finally{l--,l||m()}return w},batchCalls:f=>(...w)=>{x(()=>{f(...w)})},schedule:x,setNotifyFunction:f=>{o=f},setBatchNotifyFunction:f=>{c=f},setScheduler:f=>{h=f}}}var ot=vg(),bg=class extends rl{#e=!0;#t;#r;constructor(){super(),this.#r=s=>{if(!al&&window.addEventListener){const l=()=>s(!0),o=()=>s(!1);return window.addEventListener("online",l,!1),window.addEventListener("offline",o,!1),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",o)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#r=s,this.#t?.(),this.#t=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(o=>{o(s)}))}isOnline(){return this.#e}},Yn=new bg;function kg(s){return Math.min(1e3*2**s,3e4)}function f0(s){return(s??"online")==="online"?Yn.isOnline():!0}var xo=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function y0(s){let l=!1,o=0,c;const h=fg(),x=()=>h.status!=="pending",m=z=>{if(!x()){const E=new xo(z);T(E),s.onCancel?.(E)}},f=()=>{l=!0},w=()=>{l=!1},M=()=>p0.isFocused()&&(s.networkMode==="always"||Yn.isOnline())&&s.canRun(),b=()=>f0(s.networkMode)&&s.canRun(),j=z=>{x()||(c?.(),h.resolve(z))},T=z=>{x()||(c?.(),h.reject(z))},O=()=>new Promise(z=>{c=E=>{(x()||M())&&z(E)},s.onPause?.()}).then(()=>{c=void 0,x()||s.onContinue?.()}),L=()=>{if(x())return;let z;const E=o===0?s.initialPromise:void 0;try{z=E??s.fn()}catch(V){z=Promise.reject(V)}Promise.resolve(z).then(j).catch(V=>{if(x())return;const C=s.retry??(al?0:3),k=s.retryDelay??kg,P=typeof k=="function"?k(o,V):k,Y=C===!0||typeof C=="number"&&o<C||typeof C=="function"&&C(o,V);if(l||!Y){T(V);return}o++,s.onFail?.(o,V),hg(P).then(()=>M()?void 0:O()).then(()=>{l?T(V):L()})})};return{promise:h,status:()=>h.status,cancel:m,continue:()=>(c?.(),h),cancelRetry:f,continueRetry:w,canStart:b,start:()=>(b()?L():O().then(L),h)}}var v0=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),og(this.gcTime)&&(this.#e=co.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(al?1/0:300*1e3))}clearGcTimeout(){this.#e&&(co.clearTimeout(this.#e),this.#e=void 0)}},jg=class extends v0{#e;#t;#r;#s;#a;#l;#i;constructor(s){super(),this.#i=!1,this.#l=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#s=s.client,this.#r=this.#s.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=Ru(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(s){if(this.options={...this.#l,...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const l=Ru(this.options);l.data!==void 0&&(this.setState(Pu(l.data,l.dataUpdatedAt)),this.#e=l)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(s,l){const o=xg(this.state.data,s,this.options);return this.#n({data:o,type:"success",dataUpdatedAt:l?.updatedAt,manual:l?.manual}),o}setState(s,l){this.#n({type:"setState",state:s,setStateOptions:l})}cancel(s){const l=this.#a?.promise;return this.#a?.cancel(s),l?l.then(Ut).catch(Ut):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>cg(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===No||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>uo(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!dg(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(l=>l.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(l=>l.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(l=>l!==s),this.observers.length||(this.#a&&(this.#i?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(s,l){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&l?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(s&&this.setOptions(s),!this.options.queryFn){const f=this.observers.find(w=>w.options.queryFn);f&&this.setOptions(f.options)}const o=new AbortController,c=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#i=!0,o.signal)})},h=()=>{const f=m0(this.options,l),M=(()=>{const b={client:this.#s,queryKey:this.queryKey,meta:this.meta};return c(b),b})();return this.#i=!1,this.options.persister?this.options.persister(f,M,this):f(M)},m=(()=>{const f={fetchOptions:l,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:h};return c(f),f})();this.options.behavior?.onFetch(m,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==m.fetchOptions?.meta)&&this.#n({type:"fetch",meta:m.fetchOptions?.meta}),this.#a=y0({initialPromise:l?.initialPromise,fn:m.fetchFn,onCancel:f=>{f instanceof xo&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),o.abort()},onFail:(f,w)=>{this.#n({type:"failed",failureCount:f,error:w})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0});try{const f=await this.#a.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#r.config.onSuccess?.(f,this),this.#r.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof xo){if(f.silent)return this.#a.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#n({type:"error",error:f}),this.#r.config.onError?.(f,this),this.#r.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#n(s){const l=o=>{switch(s.type){case"failed":return{...o,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...o,fetchStatus:"paused"};case"continue":return{...o,fetchStatus:"fetching"};case"fetch":return{...o,...wg(o.data,this.options),fetchMeta:s.meta??null};case"success":const c={...o,...Pu(s.data,s.dataUpdatedAt),dataUpdateCount:o.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=s.manual?c:void 0,c;case"error":const h=s.error;return{...o,error:h,errorUpdateCount:o.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:o.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...o,isInvalidated:!0};case"setState":return{...o,...s.state}}};this.state=l(this.state),ot.batch(()=>{this.observers.forEach(o=>{o.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:s})})}};function wg(s,l){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:f0(l.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Pu(s,l){return{data:s,dataUpdatedAt:l??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Ru(s){const l=typeof s.initialData=="function"?s.initialData():s.initialData,o=l!==void 0,c=o?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:l,dataUpdateCount:0,dataUpdatedAt:o?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:o?"success":"pending",fetchStatus:"idle"}}function Du(s){return{onFetch:(l,o)=>{const c=l.options,h=l.fetchOptions?.meta?.fetchMore?.direction,x=l.state.data?.pages||[],m=l.state.data?.pageParams||[];let f={pages:[],pageParams:[]},w=0;const M=async()=>{let b=!1;const j=L=>{Object.defineProperty(L,"signal",{enumerable:!0,get:()=>(l.signal.aborted?b=!0:l.signal.addEventListener("abort",()=>{b=!0}),l.signal)})},T=m0(l.options,l.fetchOptions),O=async(L,z,E)=>{if(b)return Promise.reject();if(z==null&&L.pages.length)return Promise.resolve(L);const C=(()=>{const B={client:l.client,queryKey:l.queryKey,pageParam:z,direction:E?"backward":"forward",meta:l.options.meta};return j(B),B})(),k=await T(C),{maxPages:P}=l.options,Y=E?mg:gg;return{pages:Y(L.pages,k,P),pageParams:Y(L.pageParams,z,P)}};if(h&&x.length){const L=h==="backward",z=L?Ng:Lu,E={pages:x,pageParams:m},V=z(c,E);f=await O(E,V,L)}else{const L=s??x.length;do{const z=w===0?m[0]??c.initialPageParam:Lu(c,f);if(w>0&&z==null)break;f=await O(f,z),w++}while(w<L)}return f};l.options.persister?l.fetchFn=()=>l.options.persister?.(M,{client:l.client,queryKey:l.queryKey,meta:l.options.meta,signal:l.signal},o):l.fetchFn=M}}}function Lu(s,{pages:l,pageParams:o}){const c=l.length-1;return l.length>0?s.getNextPageParam(l[c],l,o[c],o):void 0}function Ng(s,{pages:l,pageParams:o}){return l.length>0?s.getPreviousPageParam?.(l[0],l,o[0],o):void 0}var Sg=class extends v0{#e;#t;#r;#s;constructor(s){super(),this.#e=s.client,this.mutationId=s.mutationId,this.#r=s.mutationCache,this.#t=[],this.state=s.state||Cg(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#t.includes(s)||(this.#t.push(s),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#t=this.#t.filter(l=>l!==s),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(s){const l=()=>{this.#a({type:"continue"})},o={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=y0({fn:()=>this.options.mutationFn?this.options.mutationFn(s,o):Promise.reject(new Error("No mutationFn found")),onFail:(x,m)=>{this.#a({type:"failed",failureCount:x,error:m})},onPause:()=>{this.#a({type:"pause"})},onContinue:l,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const c=this.state.status==="pending",h=!this.#s.canStart();try{if(c)l();else{this.#a({type:"pending",variables:s,isPaused:h}),await this.#r.config.onMutate?.(s,this,o);const m=await this.options.onMutate?.(s,o);m!==this.state.context&&this.#a({type:"pending",context:m,variables:s,isPaused:h})}const x=await this.#s.start();return await this.#r.config.onSuccess?.(x,s,this.state.context,this,o),await this.options.onSuccess?.(x,s,this.state.context,o),await this.#r.config.onSettled?.(x,null,this.state.variables,this.state.context,this,o),await this.options.onSettled?.(x,null,s,this.state.context,o),this.#a({type:"success",data:x}),x}catch(x){try{throw await this.#r.config.onError?.(x,s,this.state.context,this,o),await this.options.onError?.(x,s,this.state.context,o),await this.#r.config.onSettled?.(void 0,x,this.state.variables,this.state.context,this,o),await this.options.onSettled?.(void 0,x,s,this.state.context,o),x}finally{this.#a({type:"error",error:x})}}finally{this.#r.runNext(this)}}#a(s){const l=o=>{switch(s.type){case"failed":return{...o,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...o,isPaused:!0};case"continue":return{...o,isPaused:!1};case"pending":return{...o,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...o,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...o,data:void 0,error:s.error,failureCount:o.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=l(this.state),ot.batch(()=>{this.#t.forEach(o=>{o.onMutationUpdate(s)}),this.#r.notify({mutation:this,type:"updated",action:s})})}};function Cg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Eg=class extends rl{constructor(s={}){super(),this.config=s,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(s,l,o){const c=new Sg({client:s,mutationCache:this,mutationId:++this.#r,options:s.defaultMutationOptions(l),state:o});return this.add(c),c}add(s){this.#e.add(s);const l=Qn(s);if(typeof l=="string"){const o=this.#t.get(l);o?o.push(s):this.#t.set(l,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#e.delete(s)){const l=Qn(s);if(typeof l=="string"){const o=this.#t.get(l);if(o)if(o.length>1){const c=o.indexOf(s);c!==-1&&o.splice(c,1)}else o[0]===s&&this.#t.delete(l)}}this.notify({type:"removed",mutation:s})}canRun(s){const l=Qn(s);if(typeof l=="string"){const c=this.#t.get(l)?.find(h=>h.state.status==="pending");return!c||c===s}else return!0}runNext(s){const l=Qn(s);return typeof l=="string"?this.#t.get(l)?.find(c=>c!==s&&c.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){ot.batch(()=>{this.#e.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(s){const l={exact:!0,...s};return this.getAll().find(o=>Tu(l,o))}findAll(s={}){return this.getAll().filter(l=>Tu(s,l))}notify(s){ot.batch(()=>{this.listeners.forEach(l=>{l(s)})})}resumePausedMutations(){const s=this.getAll().filter(l=>l.state.isPaused);return ot.batch(()=>Promise.all(s.map(l=>l.continue().catch(Ut))))}};function Qn(s){return s.options.scope?.id}var Mg=class extends rl{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,l,o){const c=l.queryKey,h=l.queryHash??wo(c,l);let x=this.get(h);return x||(x=new jg({client:s,queryKey:c,queryHash:h,options:s.defaultQueryOptions(l),state:o,defaultOptions:s.getQueryDefaults(c)}),this.add(x)),x}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const l=this.#e.get(s.queryHash);l&&(s.destroy(),l===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){ot.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){const l={exact:!0,...s};return this.getAll().find(o=>Au(l,o))}findAll(s={}){const l=this.getAll();return Object.keys(s).length>0?l.filter(o=>Au(s,o)):l}notify(s){ot.batch(()=>{this.listeners.forEach(l=>{l(s)})})}onFocus(){ot.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){ot.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Ig=class{#e;#t;#r;#s;#a;#l;#i;#n;constructor(s={}){this.#e=s.queryCache||new Mg,this.#t=s.mutationCache||new Eg,this.#r=s.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#l=0}mount(){this.#l++,this.#l===1&&(this.#i=p0.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Yn.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#l--,this.#l===0&&(this.#i?.(),this.#i=void 0,this.#n?.(),this.#n=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#t.findAll({...s,status:"pending"}).length}getQueryData(s){const l=this.defaultQueryOptions({queryKey:s});return this.#e.get(l.queryHash)?.state.data}ensureQueryData(s){const l=this.defaultQueryOptions(s),o=this.#e.build(this,l),c=o.state.data;return c===void 0?this.fetchQuery(s):(s.revalidateIfStale&&o.isStaleByTime(uo(l.staleTime,o))&&this.prefetchQuery(l),Promise.resolve(c))}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:l,state:o})=>{const c=o.data;return[l,c]})}setQueryData(s,l,o){const c=this.defaultQueryOptions({queryKey:s}),x=this.#e.get(c.queryHash)?.state.data,m=ig(l,x);if(m!==void 0)return this.#e.build(this,c).setData(m,{...o,manual:!0})}setQueriesData(s,l,o){return ot.batch(()=>this.#e.findAll(s).map(({queryKey:c})=>[c,this.setQueryData(c,l,o)]))}getQueryState(s){const l=this.defaultQueryOptions({queryKey:s});return this.#e.get(l.queryHash)?.state}removeQueries(s){const l=this.#e;ot.batch(()=>{l.findAll(s).forEach(o=>{l.remove(o)})})}resetQueries(s,l){const o=this.#e;return ot.batch(()=>(o.findAll(s).forEach(c=>{c.reset()}),this.refetchQueries({type:"active",...s},l)))}cancelQueries(s,l={}){const o={revert:!0,...l},c=ot.batch(()=>this.#e.findAll(s).map(h=>h.cancel(o)));return Promise.all(c).then(Ut).catch(Ut)}invalidateQueries(s,l={}){return ot.batch(()=>(this.#e.findAll(s).forEach(o=>{o.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},l)))}refetchQueries(s,l={}){const o={...l,cancelRefetch:l.cancelRefetch??!0},c=ot.batch(()=>this.#e.findAll(s).filter(h=>!h.isDisabled()&&!h.isStatic()).map(h=>{let x=h.fetch(void 0,o);return o.throwOnError||(x=x.catch(Ut)),h.state.fetchStatus==="paused"?Promise.resolve():x}));return Promise.all(c).then(Ut)}fetchQuery(s){const l=this.defaultQueryOptions(s);l.retry===void 0&&(l.retry=!1);const o=this.#e.build(this,l);return o.isStaleByTime(uo(l.staleTime,o))?o.fetch(l):Promise.resolve(o.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(Ut).catch(Ut)}fetchInfiniteQuery(s){return s.behavior=Du(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(Ut).catch(Ut)}ensureInfiniteQueryData(s){return s.behavior=Du(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Yn.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(s){this.#r=s}setQueryDefaults(s,l){this.#s.set(Cs(s),{queryKey:s,defaultOptions:l})}getQueryDefaults(s){const l=[...this.#s.values()],o={};return l.forEach(c=>{Es(s,c.queryKey)&&Object.assign(o,c.defaultOptions)}),o}setMutationDefaults(s,l){this.#a.set(Cs(s),{mutationKey:s,defaultOptions:l})}getMutationDefaults(s){const l=[...this.#a.values()],o={};return l.forEach(c=>{Es(s,c.mutationKey)&&Object.assign(o,c.defaultOptions)}),o}defaultQueryOptions(s){if(s._defaulted)return s;const l={...this.#r.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return l.queryHash||(l.queryHash=wo(l.queryKey,l)),l.refetchOnReconnect===void 0&&(l.refetchOnReconnect=l.networkMode!=="always"),l.throwOnError===void 0&&(l.throwOnError=!!l.suspense),!l.networkMode&&l.persister&&(l.networkMode="offlineFirst"),l.queryFn===No&&(l.enabled=!1),l}defaultMutationOptions(s){return s?._defaulted?s:{...this.#r.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Ag=g.createContext(void 0),Tg=({client:s,children:l})=>(g.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),t.jsx(Ag.Provider,{value:s,children:l}));x0();function Ms(){return Ms=Object.assign?Object.assign.bind():function(s){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s},Ms.apply(this,arguments)}var Pr;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Pr||(Pr={}));const _u="popstate";function Og(s){s===void 0&&(s={});function l(c,h){let{pathname:x,search:m,hash:f}=c.location;return go("",{pathname:x,search:m,hash:f},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function o(c,h){return typeof h=="string"?h:Jn(h)}return Pg(l,o,null,s)}function Ve(s,l){if(s===!1||s===null||typeof s>"u")throw new Error(l)}function So(s,l){if(!s){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function zg(){return Math.random().toString(36).substr(2,8)}function $u(s,l){return{usr:s.state,key:s.key,idx:l}}function go(s,l,o,c){return o===void 0&&(o=null),Ms({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof l=="string"?za(l):l,{state:o,key:l&&l.key||c||zg()})}function Jn(s){let{pathname:l="/",search:o="",hash:c=""}=s;return o&&o!=="?"&&(l+=o.charAt(0)==="?"?o:"?"+o),c&&c!=="#"&&(l+=c.charAt(0)==="#"?c:"#"+c),l}function za(s){let l={};if(s){let o=s.indexOf("#");o>=0&&(l.hash=s.substr(o),s=s.substr(0,o));let c=s.indexOf("?");c>=0&&(l.search=s.substr(c),s=s.substr(0,c)),s&&(l.pathname=s)}return l}function Pg(s,l,o,c){c===void 0&&(c={});let{window:h=document.defaultView,v5Compat:x=!1}=c,m=h.history,f=Pr.Pop,w=null,M=b();M==null&&(M=0,m.replaceState(Ms({},m.state,{idx:M}),""));function b(){return(m.state||{idx:null}).idx}function j(){f=Pr.Pop;let E=b(),V=E==null?null:E-M;M=E,w&&w({action:f,location:z.location,delta:V})}function T(E,V){f=Pr.Push;let C=go(z.location,E,V);M=b()+1;let k=$u(C,M),P=z.createHref(C);try{m.pushState(k,"",P)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;h.location.assign(P)}x&&w&&w({action:f,location:z.location,delta:1})}function O(E,V){f=Pr.Replace;let C=go(z.location,E,V);M=b();let k=$u(C,M),P=z.createHref(C);m.replaceState(k,"",P),x&&w&&w({action:f,location:z.location,delta:0})}function L(E){let V=h.location.origin!=="null"?h.location.origin:h.location.href,C=typeof E=="string"?E:Jn(E);return C=C.replace(/ $/,"%20"),Ve(V,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,V)}let z={get action(){return f},get location(){return s(h,m)},listen(E){if(w)throw new Error("A history only accepts one active listener");return h.addEventListener(_u,j),w=E,()=>{h.removeEventListener(_u,j),w=null}},createHref(E){return l(h,E)},createURL:L,encodeLocation(E){let V=L(E);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:T,replace:O,go(E){return m.go(E)}};return z}var Fu;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Fu||(Fu={}));function Rg(s,l,o){return o===void 0&&(o="/"),Dg(s,l,o)}function Dg(s,l,o,c){let h=typeof l=="string"?za(l):l,x=Ia(h.pathname||"/",o);if(x==null)return null;let m=b0(s);Lg(m);let f=null;for(let w=0;f==null&&w<m.length;++w){let M=Gg(x);f=Hg(m[w],M)}return f}function b0(s,l,o,c){l===void 0&&(l=[]),o===void 0&&(o=[]),c===void 0&&(c="");let h=(x,m,f)=>{let w={relativePath:f===void 0?x.path||"":f,caseSensitive:x.caseSensitive===!0,childrenIndex:m,route:x};w.relativePath.startsWith("/")&&(Ve(w.relativePath.startsWith(c),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+c+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(c.length));let M=Rr([c,w.relativePath]),b=o.concat(w);x.children&&x.children.length>0&&(Ve(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+M+'".')),b0(x.children,l,b,M)),!(x.path==null&&!x.index)&&l.push({path:M,score:Wg(M,x.index),routesMeta:b})};return s.forEach((x,m)=>{var f;if(x.path===""||!((f=x.path)!=null&&f.includes("?")))h(x,m);else for(let w of k0(x.path))h(x,m,w)}),l}function k0(s){let l=s.split("/");if(l.length===0)return[];let[o,...c]=l,h=o.endsWith("?"),x=o.replace(/\?$/,"");if(c.length===0)return h?[x,""]:[x];let m=k0(c.join("/")),f=[];return f.push(...m.map(w=>w===""?x:[x,w].join("/"))),h&&f.push(...m),f.map(w=>s.startsWith("/")&&w===""?"/":w)}function Lg(s){s.sort((l,o)=>l.score!==o.score?o.score-l.score:qg(l.routesMeta.map(c=>c.childrenIndex),o.routesMeta.map(c=>c.childrenIndex)))}const _g=/^:[\w-]+$/,$g=3,Fg=2,Ug=1,Bg=10,Vg=-2,Uu=s=>s==="*";function Wg(s,l){let o=s.split("/"),c=o.length;return o.some(Uu)&&(c+=Vg),l&&(c+=Fg),o.filter(h=>!Uu(h)).reduce((h,x)=>h+(_g.test(x)?$g:x===""?Ug:Bg),c)}function qg(s,l){return s.length===l.length&&s.slice(0,-1).every((c,h)=>c===l[h])?s[s.length-1]-l[l.length-1]:0}function Hg(s,l,o){let{routesMeta:c}=s,h={},x="/",m=[];for(let f=0;f<c.length;++f){let w=c[f],M=f===c.length-1,b=x==="/"?l:l.slice(x.length)||"/",j=mo({path:w.relativePath,caseSensitive:w.caseSensitive,end:M},b),T=w.route;if(!j)return null;Object.assign(h,j.params),m.push({params:h,pathname:Rr([x,j.pathname]),pathnameBase:Zg(Rr([x,j.pathnameBase])),route:T}),j.pathnameBase!=="/"&&(x=Rr([x,j.pathnameBase]))}return m}function mo(s,l){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[o,c]=Qg(s.path,s.caseSensitive,s.end),h=l.match(o);if(!h)return null;let x=h[0],m=x.replace(/(.)\/+$/,"$1"),f=h.slice(1);return{params:c.reduce((M,b,j)=>{let{paramName:T,isOptional:O}=b;if(T==="*"){let z=f[j]||"";m=x.slice(0,x.length-z.length).replace(/(.)\/+$/,"$1")}const L=f[j];return O&&!L?M[T]=void 0:M[T]=(L||"").replace(/%2F/g,"/"),M},{}),pathname:x,pathnameBase:m,pattern:s}}function Qg(s,l,o){l===void 0&&(l=!1),o===void 0&&(o=!0),So(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let c=[],h="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,f,w)=>(c.push({paramName:f,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(c.push({paramName:"*"}),h+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?h+="\\/*$":s!==""&&s!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,l?void 0:"i"),c]}function Gg(s){try{return s.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return So(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+l+").")),s}}function Ia(s,l){if(l==="/")return s;if(!s.toLowerCase().startsWith(l.toLowerCase()))return null;let o=l.endsWith("/")?l.length-1:l.length,c=s.charAt(o);return c&&c!=="/"?null:s.slice(o)||"/"}const Kg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xg=s=>Kg.test(s);function Yg(s,l){l===void 0&&(l="/");let{pathname:o,search:c="",hash:h=""}=typeof s=="string"?za(s):s,x;if(o)if(Xg(o))x=o;else{if(o.includes("//")){let m=o;o=o.replace(/\/\/+/g,"/"),So(!1,"Pathnames cannot have embedded double slashes - normalizing "+(m+" -> "+o))}o.startsWith("/")?x=Bu(o.substring(1),"/"):x=Bu(o,l)}else x=l;return{pathname:x,search:em(c),hash:tm(h)}}function Bu(s,l){let o=l.replace(/\/+$/,"").split("/");return s.split("/").forEach(h=>{h===".."?o.length>1&&o.pop():h!=="."&&o.push(h)}),o.length>1?o.join("/"):"/"}function no(s,l,o,c){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+l+"` field ["+JSON.stringify(c)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Jg(s){return s.filter((l,o)=>o===0||l.route.path&&l.route.path.length>0)}function Co(s,l){let o=Jg(s);return l?o.map((c,h)=>h===o.length-1?c.pathname:c.pathnameBase):o.map(c=>c.pathnameBase)}function Eo(s,l,o,c){c===void 0&&(c=!1);let h;typeof s=="string"?h=za(s):(h=Ms({},s),Ve(!h.pathname||!h.pathname.includes("?"),no("?","pathname","search",h)),Ve(!h.pathname||!h.pathname.includes("#"),no("#","pathname","hash",h)),Ve(!h.search||!h.search.includes("#"),no("#","search","hash",h)));let x=s===""||h.pathname==="",m=x?"/":h.pathname,f;if(m==null)f=o;else{let j=l.length-1;if(!c&&m.startsWith("..")){let T=m.split("/");for(;T[0]==="..";)T.shift(),j-=1;h.pathname=T.join("/")}f=j>=0?l[j]:"/"}let w=Yg(h,f),M=m&&m!=="/"&&m.endsWith("/"),b=(x||m===".")&&o.endsWith("/");return!w.pathname.endsWith("/")&&(M||b)&&(w.pathname+="/"),w}const Rr=s=>s.join("/").replace(/\/\/+/g,"/"),Zg=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),em=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,tm=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function rm(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const j0=["post","put","patch","delete"];new Set(j0);const am=["get",...j0];new Set(am);function Is(){return Is=Object.assign?Object.assign.bind():function(s){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s},Is.apply(this,arguments)}const sl=g.createContext(null),w0=g.createContext(null),hr=g.createContext(null),nl=g.createContext(null),er=g.createContext({outlet:null,matches:[],isDataRoute:!1}),N0=g.createContext(null);function sm(s,l){let{relative:o}=l===void 0?{}:l;Pa()||Ve(!1);let{basename:c,navigator:h}=g.useContext(hr),{hash:x,pathname:m,search:f}=ll(s,{relative:o}),w=m;return c!=="/"&&(w=m==="/"?c:Rr([c,m])),h.createHref({pathname:w,search:f,hash:x})}function Pa(){return g.useContext(nl)!=null}function Yr(){return Pa()||Ve(!1),g.useContext(nl).location}function S0(s){g.useContext(hr).static||g.useLayoutEffect(s)}function Ot(){let{isDataRoute:s}=g.useContext(er);return s?vm():nm()}function nm(){Pa()||Ve(!1);let s=g.useContext(sl),{basename:l,future:o,navigator:c}=g.useContext(hr),{matches:h}=g.useContext(er),{pathname:x}=Yr(),m=JSON.stringify(Co(h,o.v7_relativeSplatPath)),f=g.useRef(!1);return S0(()=>{f.current=!0}),g.useCallback(function(M,b){if(b===void 0&&(b={}),!f.current)return;if(typeof M=="number"){c.go(M);return}let j=Eo(M,JSON.parse(m),x,b.relative==="path");s==null&&l!=="/"&&(j.pathname=j.pathname==="/"?l:Rr([l,j.pathname])),(b.replace?c.replace:c.push)(j,b.state,b)},[l,c,m,x,s])}const lm=g.createContext(null);function im(s){let l=g.useContext(er).outlet;return l&&g.createElement(lm.Provider,{value:s},l)}function Mo(){let{matches:s}=g.useContext(er),l=s[s.length-1];return l?l.params:{}}function ll(s,l){let{relative:o}=l===void 0?{}:l,{future:c}=g.useContext(hr),{matches:h}=g.useContext(er),{pathname:x}=Yr(),m=JSON.stringify(Co(h,c.v7_relativeSplatPath));return g.useMemo(()=>Eo(s,JSON.parse(m),x,o==="path"),[s,m,x,o])}function om(s,l){return dm(s,l)}function dm(s,l,o,c){Pa()||Ve(!1);let{navigator:h}=g.useContext(hr),{matches:x}=g.useContext(er),m=x[x.length-1],f=m?m.params:{};m&&m.pathname;let w=m?m.pathnameBase:"/";m&&m.route;let M=Yr(),b;if(l){var j;let E=typeof l=="string"?za(l):l;w==="/"||(j=E.pathname)!=null&&j.startsWith(w)||Ve(!1),b=E}else b=M;let T=b.pathname||"/",O=T;if(w!=="/"){let E=w.replace(/^\//,"").split("/");O="/"+T.replace(/^\//,"").split("/").slice(E.length).join("/")}let L=Rg(s,{pathname:O}),z=gm(L&&L.map(E=>Object.assign({},E,{params:Object.assign({},f,E.params),pathname:Rr([w,h.encodeLocation?h.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?w:Rr([w,h.encodeLocation?h.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),x,o,c);return l&&z?g.createElement(nl.Provider,{value:{location:Is({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:Pr.Pop}},z):z}function cm(){let s=ym(),l=rm(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),o=s instanceof Error?s.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},l),o?g.createElement("pre",{style:h},o):null,null)}const um=g.createElement(cm,null);class hm extends g.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,o){return o.location!==l.location||o.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:o.error,location:o.location,revalidation:l.revalidation||o.revalidation}}componentDidCatch(l,o){console.error("React Router caught the following error during render",l,o)}render(){return this.state.error!==void 0?g.createElement(er.Provider,{value:this.props.routeContext},g.createElement(N0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xm(s){let{routeContext:l,match:o,children:c}=s,h=g.useContext(sl);return h&&h.static&&h.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=o.route.id),g.createElement(er.Provider,{value:l},c)}function gm(s,l,o,c){var h;if(l===void 0&&(l=[]),o===void 0&&(o=null),c===void 0&&(c=null),s==null){var x;if(!o)return null;if(o.errors)s=o.matches;else if((x=c)!=null&&x.v7_partialHydration&&l.length===0&&!o.initialized&&o.matches.length>0)s=o.matches;else return null}let m=s,f=(h=o)==null?void 0:h.errors;if(f!=null){let b=m.findIndex(j=>j.route.id&&f?.[j.route.id]!==void 0);b>=0||Ve(!1),m=m.slice(0,Math.min(m.length,b+1))}let w=!1,M=-1;if(o&&c&&c.v7_partialHydration)for(let b=0;b<m.length;b++){let j=m[b];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(M=b),j.route.id){let{loaderData:T,errors:O}=o,L=j.route.loader&&T[j.route.id]===void 0&&(!O||O[j.route.id]===void 0);if(j.route.lazy||L){w=!0,M>=0?m=m.slice(0,M+1):m=[m[0]];break}}}return m.reduceRight((b,j,T)=>{let O,L=!1,z=null,E=null;o&&(O=f&&j.route.id?f[j.route.id]:void 0,z=j.route.errorElement||um,w&&(M<0&&T===0?(bm("route-fallback"),L=!0,E=null):M===T&&(L=!0,E=j.route.hydrateFallbackElement||null)));let V=l.concat(m.slice(0,T+1)),C=()=>{let k;return O?k=z:L?k=E:j.route.Component?k=g.createElement(j.route.Component,null):j.route.element?k=j.route.element:k=b,g.createElement(xm,{match:j,routeContext:{outlet:b,matches:V,isDataRoute:o!=null},children:k})};return o&&(j.route.ErrorBoundary||j.route.errorElement||T===0)?g.createElement(hm,{location:o.location,revalidation:o.revalidation,component:z,error:O,children:C(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):C()},null)}var C0=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(C0||{}),E0=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(E0||{});function mm(s){let l=g.useContext(sl);return l||Ve(!1),l}function pm(s){let l=g.useContext(w0);return l||Ve(!1),l}function fm(s){let l=g.useContext(er);return l||Ve(!1),l}function M0(s){let l=fm(),o=l.matches[l.matches.length-1];return o.route.id||Ve(!1),o.route.id}function ym(){var s;let l=g.useContext(N0),o=pm(),c=M0();return l!==void 0?l:(s=o.errors)==null?void 0:s[c]}function vm(){let{router:s}=mm(C0.UseNavigateStable),l=M0(E0.UseNavigateStable),o=g.useRef(!1);return S0(()=>{o.current=!0}),g.useCallback(function(h,x){x===void 0&&(x={}),o.current&&(typeof h=="number"?s.navigate(h):s.navigate(h,Is({fromRouteId:l},x)))},[s,l])}const Vu={};function bm(s,l,o){Vu[s]||(Vu[s]=!0)}function km(s,l){s?.v7_startTransition,s?.v7_relativeSplatPath}function Xt(s){let{to:l,replace:o,state:c,relative:h}=s;Pa()||Ve(!1);let{future:x,static:m}=g.useContext(hr),{matches:f}=g.useContext(er),{pathname:w}=Yr(),M=Ot(),b=Eo(l,Co(f,x.v7_relativeSplatPath),w,h==="path"),j=JSON.stringify(b);return g.useEffect(()=>M(JSON.parse(j),{replace:o,state:c,relative:h}),[M,j,h,o,c]),null}function jm(s){return im(s.context)}function $e(s){Ve(!1)}function wm(s){let{basename:l="/",children:o=null,location:c,navigationType:h=Pr.Pop,navigator:x,static:m=!1,future:f}=s;Pa()&&Ve(!1);let w=l.replace(/^\/*/,"/"),M=g.useMemo(()=>({basename:w,navigator:x,static:m,future:Is({v7_relativeSplatPath:!1},f)}),[w,f,x,m]);typeof c=="string"&&(c=za(c));let{pathname:b="/",search:j="",hash:T="",state:O=null,key:L="default"}=c,z=g.useMemo(()=>{let E=Ia(b,w);return E==null?null:{location:{pathname:E,search:j,hash:T,state:O,key:L},navigationType:h}},[w,b,j,T,O,L,h]);return z==null?null:g.createElement(hr.Provider,{value:M},g.createElement(nl.Provider,{children:o,value:z}))}function Nm(s){let{children:l,location:o}=s;return om(po(l),o)}new Promise(()=>{});function po(s,l){l===void 0&&(l=[]);let o=[];return g.Children.forEach(s,(c,h)=>{if(!g.isValidElement(c))return;let x=[...l,h];if(c.type===g.Fragment){o.push.apply(o,po(c.props.children,x));return}c.type!==$e&&Ve(!1),!c.props.index||!c.props.children||Ve(!1);let m={id:c.props.id||x.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,loader:c.props.loader,action:c.props.action,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(m.children=po(c.props.children,x)),o.push(m)}),o}function Zn(){return Zn=Object.assign?Object.assign.bind():function(s){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s},Zn.apply(this,arguments)}function I0(s,l){if(s==null)return{};var o={},c=Object.keys(s),h,x;for(x=0;x<c.length;x++)h=c[x],!(l.indexOf(h)>=0)&&(o[h]=s[h]);return o}function Sm(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Cm(s,l){return s.button===0&&(!l||l==="_self")&&!Sm(s)}function fo(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((l,o)=>{let c=s[o];return l.concat(Array.isArray(c)?c.map(h=>[o,h]):[[o,c]])},[]))}function Em(s,l){let o=fo(s);return l&&l.forEach((c,h)=>{o.has(h)||l.getAll(h).forEach(x=>{o.append(h,x)})}),o}const Mm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Im=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Am="6";try{window.__reactRouterVersion=Am}catch{}const Tm=g.createContext({isTransitioning:!1}),Om="startTransition",Wu=Yx[Om];function zm(s){let{basename:l,children:o,future:c,window:h}=s,x=g.useRef();x.current==null&&(x.current=Og({window:h,v5Compat:!0}));let m=x.current,[f,w]=g.useState({action:m.action,location:m.location}),{v7_startTransition:M}=c||{},b=g.useCallback(j=>{M&&Wu?Wu(()=>w(j)):w(j)},[w,M]);return g.useLayoutEffect(()=>m.listen(b),[m,b]),g.useEffect(()=>km(c),[c]),g.createElement(wm,{basename:l,children:o,location:f.location,navigationType:f.action,navigator:m,future:c})}const Pm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,It=g.forwardRef(function(l,o){let{onClick:c,relative:h,reloadDocument:x,replace:m,state:f,target:w,to:M,preventScrollReset:b,viewTransition:j}=l,T=I0(l,Mm),{basename:O}=g.useContext(hr),L,z=!1;if(typeof M=="string"&&Rm.test(M)&&(L=M,Pm))try{let k=new URL(window.location.href),P=M.startsWith("//")?new URL(k.protocol+M):new URL(M),Y=Ia(P.pathname,O);P.origin===k.origin&&Y!=null?M=Y+P.search+P.hash:z=!0}catch{}let E=sm(M,{relative:h}),V=Lm(M,{replace:m,state:f,target:w,preventScrollReset:b,relative:h,viewTransition:j});function C(k){c&&c(k),k.defaultPrevented||V(k)}return g.createElement("a",Zn({},T,{href:L||E,onClick:z||x?c:C,ref:o,target:w}))}),qu=g.forwardRef(function(l,o){let{"aria-current":c="page",caseSensitive:h=!1,className:x="",end:m=!1,style:f,to:w,viewTransition:M,children:b}=l,j=I0(l,Im),T=ll(w,{relative:j.relative}),O=Yr(),L=g.useContext(w0),{navigator:z,basename:E}=g.useContext(hr),V=L!=null&&$m(T)&&M===!0,C=z.encodeLocation?z.encodeLocation(T).pathname:T.pathname,k=O.pathname,P=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;h||(k=k.toLowerCase(),P=P?P.toLowerCase():null,C=C.toLowerCase()),P&&E&&(P=Ia(P,E)||P);const Y=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let B=k===C||!m&&k.startsWith(C)&&k.charAt(Y)==="/",ee=P!=null&&(P===C||!m&&P.startsWith(C)&&P.charAt(C.length)==="/"),Q={isActive:B,isPending:ee,isTransitioning:V},ie=B?c:void 0,ce;typeof x=="function"?ce=x(Q):ce=[x,B?"active":null,ee?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let W=typeof f=="function"?f(Q):f;return g.createElement(It,Zn({},j,{"aria-current":ie,className:ce,ref:o,style:W,to:w,viewTransition:M}),typeof b=="function"?b(Q):b)});var yo;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(yo||(yo={}));var Hu;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Hu||(Hu={}));function Dm(s){let l=g.useContext(sl);return l||Ve(!1),l}function Lm(s,l){let{target:o,replace:c,state:h,preventScrollReset:x,relative:m,viewTransition:f}=l===void 0?{}:l,w=Ot(),M=Yr(),b=ll(s,{relative:m});return g.useCallback(j=>{if(Cm(j,o)){j.preventDefault();let T=c!==void 0?c:Jn(M)===Jn(b);w(s,{replace:T,state:h,preventScrollReset:x,relative:m,viewTransition:f})}},[M,w,b,c,h,o,s,x,m,f])}function _m(s){let l=g.useRef(fo(s)),o=g.useRef(!1),c=Yr(),h=g.useMemo(()=>Em(c.search,o.current?null:l.current),[c.search]),x=Ot(),m=g.useCallback((f,w)=>{const M=fo(typeof f=="function"?f(h):f);o.current=!0,x("?"+M,w)},[x,h]);return[h,m]}function $m(s,l){l===void 0&&(l={});let o=g.useContext(Tm);o==null&&Ve(!1);let{basename:c}=Dm(yo.useViewTransitionState),h=ll(s,{relative:l.relative});if(!o.isTransitioning)return!1;let x=Ia(o.currentLocation.pathname,c)||o.currentLocation.pathname,m=Ia(o.nextLocation.pathname,c)||o.nextLocation.pathname;return mo(h.pathname,m)!=null||mo(h.pathname,x)!=null}const A0=g.createContext(null),Ra=()=>{const s=g.useContext(A0);return s||{user:null,loading:!0,logout:()=>{}}},T0=g.createContext(null),Fm=()=>{const s=g.useContext(T0);if(!s)throw new Error("useTheme must be used within ThemeProvider");return s};function Qu({children:s}){const[l,o]=g.useState(()=>{const w=localStorage.getItem("theme");return w||"light"});g.useEffect(()=>{document.documentElement.setAttribute("data-theme",l),l==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",l)},[l]);const c=()=>{o(w=>w==="light"?"dark":"light")},h=()=>o("light"),x=()=>o("dark"),m=l==="dark",f=l==="light";return t.jsx(T0.Provider,{value:{theme:l,toggleTheme:c,setLightTheme:h,setDarkTheme:x,isDark:m,isLight:f},children:s})}const Io=g.createContext(null),mt=()=>{const s=g.useContext(Io);if(!s)throw new Error("useOrganization must be used within an OrganizationProvider");return s},Um=({children:s})=>{const{user:l}=Ra(),[o,c]=g.useState(null),[h,x]=g.useState([]),[m,f]=g.useState(!0);g.useEffect(()=>{if(l)if(l.organizations&&l.organizations.length>0){if(x(l.organizations),l.organizations.length===1)c(l.organizations[0]);else{const O=localStorage.getItem("currentOrgId");if(O){const L=l.organizations.find(z=>z.id===O);L&&c(L)}}f(!1)}else w();else c(null),x([]),f(!1)},[l]);const w=async()=>{try{f(!0);const O=await fetch("/api/organizations/my",{credentials:"include"});if(O.ok){const L=await O.json();if(x(Array.isArray(L)?L:[]),Array.isArray(L)&&L.length===1)c(L[0]),localStorage.setItem("currentOrgId",L[0].id);else{const z=localStorage.getItem("currentOrgId");if(z&&Array.isArray(L)){const E=L.find(V=>V.id===z);E&&c(E)}}}}catch(O){console.error("Error fetching organizations:",O)}finally{f(!1)}},M=g.useCallback(O=>{console.log(" [ORG] Selecting organization:",O?.name,O?.id),c(O),O?(localStorage.setItem("currentOrgId",O.id),localStorage.setItem("currentOrgSlug",O.slug),console.log(" [ORG] Saved to localStorage:",{id:O.id,slug:O.slug}),fetch("/api/organizations/select",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({organizationId:O.id})}).catch(console.error)):(localStorage.removeItem("currentOrgId"),localStorage.removeItem("currentOrgSlug"))},[]),b=g.useCallback(async O=>{if(!O)return;let L=h.find(z=>z.slug===O);if(L){(!o||o.slug!==O)&&M(L);return}try{const z=await fetch(`/api/organizations/by-slug/${O}`,{credentials:"include"});if(z.ok){const E=await z.json();E&&(x(V=>V.find(C=>C.id===E.id)?V:[...V,E]),M(E))}}catch(z){console.error("Error fetching organization by slug:",z)}},[h,o,M]),j=g.useCallback(()=>{w()},[]),T={currentOrganization:o,organizations:h,loading:m,selectOrganization:M,setCurrentOrganizationBySlug:b,refreshOrganizations:j,hasMultipleOrgs:h.length>1};return t.jsx(Io.Provider,{value:T,children:s})},re={ADMIN:"ADMIN",MANAGER:"MANAGER",MEMBER:"MEMBER",VIEWER:"VIEWER"},Gu=[re.ADMIN,re.MANAGER,re.MEMBER,re.VIEWER],Bm={"users:read":[re.ADMIN],"users:create":[re.ADMIN],"users:update":[re.ADMIN],"users:delete":[re.ADMIN],"users:manage-roles":[re.ADMIN],"team:read":[re.ADMIN,re.MANAGER,re.MEMBER,re.VIEWER],"team:create":[re.ADMIN,re.MANAGER],"team:update":[re.ADMIN,re.MANAGER],"team:delete":[re.ADMIN],"rocks:read":[re.ADMIN,re.MANAGER,re.MEMBER,re.VIEWER],"rocks:create":[re.ADMIN,re.MANAGER],"rocks:update":[re.ADMIN,re.MANAGER],"rocks:delete":[re.ADMIN,re.MANAGER],"sprints:read":[re.ADMIN,re.MANAGER,re.MEMBER,re.VIEWER],"sprints:create":[re.ADMIN,re.MANAGER],"sprints:update":[re.ADMIN,re.MANAGER],"sprints:delete":[re.ADMIN,re.MANAGER],"stories:read":[re.ADMIN,re.MANAGER,re.MEMBER,re.VIEWER],"stories:create":[re.ADMIN,re.MANAGER,re.MEMBER],"stories:update":[re.ADMIN,re.MANAGER,re.MEMBER],"stories:delete":[re.ADMIN,re.MANAGER],"dashboard:read":[re.ADMIN,re.MANAGER,re.MEMBER,re.VIEWER]},Jt={[re.ADMIN]:" ",[re.MANAGER]:"",[re.MEMBER]:" ",[re.VIEWER]:""},Vm={[re.ADMIN]:"      ",[re.MANAGER]:",    ,   ",[re.MEMBER]:"  +    ",[re.VIEWER]:" "},Ea={[re.ADMIN]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",[re.MANAGER]:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",[re.MEMBER]:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",[re.VIEWER]:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"};function js(s,l){const o=Bm[l];return o?o.includes(s):!1}function lo(s,l){const o=Gu.indexOf(s),c=Gu.indexOf(l);return o===-1||c===-1?!1:o<=c}function zt(){const{user:s}=Ra(),l=s?.role||re.VIEWER;return{role:l,isAdmin:l===re.ADMIN,isManager:lo(l,re.MANAGER),isMember:lo(l,re.MEMBER),can:o=>js(l,o),hasRole:o=>lo(l,o),canCreate:o=>js(l,`${o}:create`),canUpdate:o=>js(l,`${o}:update`),canDelete:o=>js(l,`${o}:delete`),canRead:o=>js(l,`${o}:read`)}}const Wm=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O0=(...s)=>s.filter((l,o,c)=>!!l&&l.trim()!==""&&c.indexOf(l)===o).join(" ").trim();var qm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hm=g.forwardRef(({color:s="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:h="",children:x,iconNode:m,...f},w)=>g.createElement("svg",{ref:w,...qm,width:l,height:l,stroke:s,strokeWidth:c?Number(o)*24/Number(l):o,className:O0("lucide",h),...f},[...m.map(([M,b])=>g.createElement(M,b)),...Array.isArray(x)?x:[x]]));const le=(s,l)=>{const o=g.forwardRef(({className:c,...h},x)=>g.createElement(Hm,{ref:x,iconNode:l,className:O0(`lucide-${Wm(s)}`,c),...h}));return o.displayName=`${s}`,o};const Qm=le("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const Ma=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Ao=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Gm=le("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const vo=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const At=le("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const z0=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Km=le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Os=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Da=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const P0=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const el=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Ca=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const To=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const As=le("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Ts=le("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Oo=le("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const tl=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Xm=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const Ku=le("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const R0=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const D0=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Ym=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const L0=le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const bo=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const _0=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const $0=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const Jm=le("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const Zm=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const ep=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const tp=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const rp=le("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const F0=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const Ss=le("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const Xu=le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const ap=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Zt=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const sp=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const np=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const cr=le("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);const lp=le("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const ur=le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Ze=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Yu=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const U0=le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const il=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const B0=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const ip=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Ju=le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const V0=le("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const Aa=le("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const W0=le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const op=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const q0=le("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const Xr=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Tt=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const dp=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const zo=le("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const H0=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Q0=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const G0=le("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);const Ta=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const cp=le("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);const kt=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Zu=le("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);const Bt=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const zs=le("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function up(){const{user:s,logout:l}=Ra(),{theme:o,toggleTheme:c}=Fm(),{currentOrganization:h,organizations:x,selectOrganization:m,setCurrentOrganizationBySlug:f,hasMultipleOrgs:w}=mt(),{isAdmin:M,role:b}=zt(),[j,T]=g.useState(!1),[O,L]=g.useState(!1),z=Ot(),{slug:E}=Mo();g.useEffect(()=>{E&&f&&f(E)},[E,f]);const V=E?`/${E}`:"",C=[{name:"",href:`${V}/dashboard`,icon:tp},{name:"",href:`${V}/objectives`,icon:Xr},{name:"",href:`${V}/rocks`,icon:cr},{name:" ",href:`${V}/stories`,icon:Ss},{name:"",href:`${V}/tasks`,icon:Aa},{name:"",href:`${V}/sprints`,icon:zs},{name:"",href:`${V}/team`,icon:kt},{name:" ",href:`${V}/data`,icon:R0},...M?[{name:" ",href:`${V}/admin`,icon:ip},{name:" ",href:`${V}/teams`,icon:cp},{name:"",href:`${V}/labels`,icon:q0},{name:" ",href:`${V}/audit`,icon:bo}]:[]],k=async()=>{await l(),z("/")},P=B=>{m(B),L(!1),z(`/${B.slug}/dashboard`)},Y=({isActive:B})=>`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${B?"bg-gradient-to-l from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/25":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`;return t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[t.jsx("div",{className:"lg:hidden fixed top-4 right-4 z-50",children:t.jsx("button",{onClick:()=>T(!j),className:"p-2 rounded-xl bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700",children:j?t.jsx(Bt,{size:24}):t.jsx(sp,{size:24})})}),t.jsxs("aside",{className:`
        fixed top-0 right-0 h-full w-72 bg-white dark:bg-gray-800 shadow-2xl z-40
        transform transition-transform duration-300 ease-in-out
        lg:translate-x-0 border-l border-gray-200 dark:border-gray-700
        ${j?"translate-x-0":"translate-x-full lg:translate-x-0"}
      `,children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[s?.isSuperAdmin&&t.jsxs("div",{className:"mb-3 px-3 py-1.5 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg flex items-center gap-2 text-white text-sm",children:[t.jsx(Ku,{size:14}),t.jsx("span",{className:"font-medium",children:"Super Admin"}),t.jsx("button",{onClick:()=>z("/super-admin"),className:"mr-auto text-xs bg-white/20 hover:bg-white/30 px-2 py-0.5 rounded transition-colors",children:" "})]}),t.jsxs("div",{className:"relative mb-3",children:[t.jsxs("button",{onClick:()=>(w||s?.isSuperAdmin)&&L(!O),className:`w-full flex items-center gap-3 p-2 rounded-xl transition-all ${w||s?.isSuperAdmin?"hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer":""}`,children:[h?.logo?t.jsx("img",{src:h.logo,alt:h.name,className:"w-10 h-10 rounded-xl object-cover shadow-md ring-2 ring-white dark:ring-gray-700",onError:B=>{B.target.style.display="none",B.target.nextSibling.style.display="flex"}}):null,t.jsx("div",{className:`${h?.logo?"hidden":"flex"} w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 items-center justify-center shadow-md ring-2 ring-white dark:ring-gray-700`,children:h?t.jsx("span",{className:"text-white font-bold text-lg",children:h.name.charAt(0)}):t.jsx(At,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{className:"flex-1 text-right",children:[t.jsx("h2",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:h?.name||" "}),(w||s?.isSuperAdmin)&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" "})]}),(w||s?.isSuperAdmin)&&t.jsx(Da,{size:18,className:`text-gray-400 transition-transform ${O?"rotate-180":""}`})]}),O&&(w||s?.isSuperAdmin)&&t.jsxs("div",{className:"absolute top-full right-0 left-0 mt-1 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden max-h-64 overflow-y-auto",children:[x.map(B=>t.jsxs("button",{onClick:()=>P(B),className:`w-full flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${h?.id===B.id?"bg-purple-50 dark:bg-purple-900/20":""}`,children:[B.logo?t.jsx("img",{src:B.logo,alt:B.name,className:"w-8 h-8 rounded-lg object-cover"}):t.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-sm",children:B.name.charAt(0)})}),t.jsxs("div",{className:"flex-1 text-right",children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm block",children:B.name}),t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["/",B.slug]})]}),h?.id===B.id&&t.jsx(To,{size:16,className:"text-purple-600"})]},B.id)),s?.isSuperAdmin&&t.jsxs("button",{onClick:()=>{L(!1),z("/super-admin")},className:"w-full flex items-center gap-3 p-3 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors border-t border-gray-100 dark:border-gray-700 text-amber-600 dark:text-amber-400",children:[t.jsx(Ku,{size:16}),t.jsx("span",{className:"text-sm font-medium",children:"  (Super Admin)"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 shadow-lg",children:t.jsx(cr,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:""}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"   "})]})]})]}),t.jsxs("nav",{className:"p-4 space-y-2",children:[C.map((B,ee)=>t.jsxs(qu,{to:B.href,className:Y,onClick:()=>T(!1),end:B.href.endsWith("/dashboard"),style:{animationDelay:`${ee*.05}s`},children:[t.jsx(B.icon,{size:20}),t.jsx("span",{className:"font-medium",children:B.name})]},B.href)),M&&t.jsxs(qu,{to:`${V}/settings`,className:Y,onClick:()=>T(!1),children:[t.jsx(B0,{size:20}),t.jsx("span",{className:"font-medium",children:" "})]})]}),t.jsx("div",{className:"px-4 py-3",children:t.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-xl p-1 flex",children:[t.jsxs("button",{onClick:()=>o!=="light"&&c(),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="light"?"bg-white dark:bg-gray-600 shadow text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[t.jsx(op,{size:16,className:o==="light"?"text-yellow-500":""}),t.jsx("span",{children:""})]}),t.jsxs("button",{onClick:()=>o!=="dark"&&c(),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${o==="dark"?"bg-white dark:bg-gray-600 shadow text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[t.jsx(np,{size:16,className:o==="dark"?"text-purple-500":""}),t.jsx("span",{children:""})]})]})}),t.jsxs("div",{className:"absolute bottom-0 right-0 left-0 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s?.picture?t.jsx("img",{src:s.picture,alt:s.name,className:"w-10 h-10 rounded-xl ring-2 ring-white dark:ring-gray-700 shadow-lg"}):t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center shadow-lg",children:t.jsx("span",{className:"text-white font-bold",children:s?.name?.charAt(0)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:s?.name}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:s?.email}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Ea[b]}`,children:Jt[b]}),s?.isSuperAdmin&&t.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:"SA"})]})]})]}),t.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 text-sm text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-xl transition-colors font-medium",children:[t.jsx(ap,{size:18}),t.jsx("span",{children:""})]})]})]}),j&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-30 lg:hidden animate-fade-in",onClick:()=>T(!1)}),t.jsx("main",{className:"lg:mr-72 min-h-screen transition-all duration-300",children:t.jsx("div",{className:"p-4 pt-16 sm:p-6 sm:pt-16 lg:p-8 lg:pt-8",children:t.jsx(jm,{})})})]})}function hp(){const s=[{icon:cr,title:" (Rocks)",description:"       "},{icon:zs,title:"",description:"  -     "},{icon:kt,title:" ",description:"        "},{icon:Km,title:" ",description:"       "}];return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[t.jsx("div",{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-pink-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),t.jsxs("nav",{className:"relative z-10 flex items-center justify-between p-6 lg:px-12",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 shadow-lg",children:t.jsx(cr,{className:"w-6 h-6 text-white"})}),t.jsx("span",{className:"text-xl font-bold text-white",children:""})]}),t.jsxs(It,{to:"/login",className:"flex items-center gap-2 px-5 py-2.5 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white rounded-xl font-medium transition-all border border-white/20",children:[t.jsx("span",{children:""}),t.jsx(Ma,{size:18})]})]}),t.jsxs("section",{className:"relative z-10 max-w-6xl mx-auto px-6 pt-16 pb-24 text-center",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full text-purple-200 text-sm mb-8 border border-white/10",children:[t.jsx(V0,{size:16}),t.jsx("span",{children:"    "})]}),t.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight",children:["   ",t.jsx("br",{}),t.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"  "})]}),t.jsx("p",{className:"text-lg md:text-xl text-gray-300 max-w-2xl mx-auto mb-10",children:"  ,   .        ."}),t.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:t.jsxs(It,{to:"/login",className:"group flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl font-bold text-lg shadow-xl shadow-purple-500/25 transition-all transform hover:scale-105",children:[t.jsx("span",{children:" "}),t.jsx(Ma,{size:20,className:"group-hover:-translate-x-1 transition-transform"})]})})]}),t.jsx("section",{className:"relative z-10 max-w-6xl mx-auto px-6 pb-24",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((l,o)=>t.jsxs("div",{className:"group p-6 bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 hover:border-purple-500/50 hover:bg-white/10 transition-all duration-300",style:{animationDelay:`${o*.1}s`},children:[t.jsx("div",{className:"w-12 h-12 mb-4 rounded-xl bg-gradient-to-br from-blue-600/20 to-purple-600/20 flex items-center justify-center group-hover:from-blue-600/30 group-hover:to-purple-600/30 transition-all",children:t.jsx(l.icon,{className:"w-6 h-6 text-purple-400"})}),t.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:l.title}),t.jsx("p",{className:"text-gray-400 text-sm",children:l.description})]},o))})}),t.jsx("section",{className:"relative z-10 max-w-4xl mx-auto px-6 pb-24",children:t.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-3xl border border-white/10 p-8 md:p-12",children:[t.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white text-center mb-8",children:"  ?"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["  ","   -RTL","  ","  ","  ","  "].map((l,o)=>t.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[t.jsx(As,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),t.jsx("span",{children:l})]},o))})]})}),t.jsx("footer",{className:"relative z-10 border-t border-white/10 py-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto px-6 text-center text-gray-500 text-sm",children:[" ",new Date().getFullYear()," .   ."]})})]})}const xp={oauth_not_configured:{title:"  ",message:"  Google   .   .",type:"warning"},auth_failed:{title:" ",message:"   .  .",type:"error"},unauthorized:{title:" ",message:"    .      .",type:"error"},account_disabled:{title:" ",message:"  .      .",type:"error"},server_error:{title:" ",message:"  .    .",type:"error"},login_failed:{title:" ",message:"     .  .",type:"error"},access_denied:{title:" ",message:"  Google .      .",type:"warning"}};function gp(){const[s,l]=_m(),[o,c]=g.useState(null);g.useEffect(()=>{const m=s.get("error");if(m){const f=xp[m]||{title:"",message:"   .  .",type:"error"};c(f);const w=new URLSearchParams(s);w.delete("error"),l(w,{replace:!0})}},[s,l]);const h=()=>{c(null),window.location.href="/api/auth/google"},x=()=>{c(null)};return t.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[t.jsx("div",{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-purple-500/30 rounded-full blur-3xl animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-96 h-96 bg-blue-500/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-pink-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),t.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,backgroundSize:"50px 50px"}})]}),t.jsx("div",{className:"absolute top-6 right-6 z-20",children:t.jsxs(It,{to:"/",className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-xl text-white text-sm transition-all border border-white/20",children:[t.jsx("span",{children:"  "}),t.jsx(Ao,{size:16})]})}),t.jsxs("div",{className:"relative z-10 min-h-screen flex",children:[t.jsxs("div",{className:"hidden lg:flex lg:w-1/2 flex-col justify-center p-16 text-white",children:[t.jsxs("div",{className:"animate-slide-in-up",children:[t.jsx("h1",{className:"text-5xl font-bold mb-6 bg-gradient-to-r from-white to-purple-200 bg-clip-text text-transparent",children:""}),t.jsx("p",{className:"text-xl text-purple-200 mb-12",children:"     "})]}),t.jsx("div",{className:"space-y-6",children:[{icon:cr,title:"",desc:"   "},{icon:zs,title:"",desc:"    1-2 "},{icon:Xr,title:" ",desc:"    "},{icon:kt,title:"",desc:"   "}].map((m,f)=>t.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10 hover:bg-white/10 transition-all duration-300 animate-slide-in-up",style:{animationDelay:`${.2+f*.1}s`},children:[t.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-purple-500 to-blue-500",children:t.jsx(m.icon,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white",children:m.title}),t.jsx("p",{className:"text-sm text-purple-200",children:m.desc})]})]},m.title))})]}),t.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:t.jsxs("div",{className:"w-full max-w-md animate-scale-in",children:[o&&t.jsx("div",{className:`mb-6 p-4 rounded-2xl border backdrop-blur-xl animate-shake ${o.type==="error"?"bg-red-500/20 border-red-500/30":"bg-yellow-500/20 border-yellow-500/30"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${o.type==="error"?"bg-red-500/30":"bg-yellow-500/30"}`,children:o.type==="error"?t.jsx(Ts,{className:"w-5 h-5 text-red-300"}):t.jsx(zo,{className:"w-5 h-5 text-yellow-300"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:`font-bold ${o.type==="error"?"text-red-200":"text-yellow-200"}`,children:o.title}),t.jsx("p",{className:`text-sm mt-1 ${o.type==="error"?"text-red-300":"text-yellow-300"}`,children:o.message})]}),t.jsx("button",{onClick:x,className:"text-white/50 hover:text-white transition-colors",children:t.jsx(Ts,{size:20})})]})}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl p-8 border border-white/20 shadow-2xl",children:[t.jsxs("div",{className:"lg:hidden text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-2xl mb-4 shadow-lg",children:t.jsx(cr,{className:"w-8 h-8 text-white"})}),t.jsx("h1",{className:"text-3xl font-bold text-white",children:""})]}),t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" ! "}),t.jsx("p",{className:"text-purple-200",children:"      "})]}),t.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-white rounded-xl hover:bg-gray-50 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 group",children:[t.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),t.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),t.jsx("span",{className:"text-gray-700 font-semibold text-lg",children:"  Google"}),t.jsx(Ma,{className:"w-5 h-5 text-gray-400 group-hover:translate-x-[-4px] transition-transform"})]}),t.jsxs("div",{className:"flex items-center gap-4 my-8",children:[t.jsx("div",{className:"flex-1 h-px bg-white/20"}),t.jsx("span",{className:"text-purple-200 text-sm",children:" "}),t.jsx("div",{className:"flex-1 h-px bg-white/20"})]}),t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("p",{className:"text-sm text-purple-200",children:"   Google OAuth 2.0"}),t.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-purple-300",children:[t.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t.jsx("span",{children:"   "})]})]})]}),t.jsx("p",{className:"text-center text-sm text-purple-300 mt-6",children:"   "})]})})]})]})}function Ie({className:s="",...l}){return t.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${s}`,...l})}function mp({className:s=""}){return t.jsx("div",{className:`bg-white rounded-xl shadow-sm p-6 ${s}`,children:t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx(Ie,{className:"w-12 h-12 rounded-lg"}),t.jsxs("div",{className:"flex-1",children:[t.jsx(Ie,{className:"h-4 w-24 mb-2"}),t.jsx(Ie,{className:"h-6 w-16"})]})]})})}function pp(){return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>t.jsx(mp,{},s))})}function fp(){return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>t.jsxs("div",{className:"bg-gray-100 rounded-xl p-4",children:[t.jsx(Ie,{className:"h-6 w-20 mb-4"}),t.jsx("div",{className:"space-y-3",children:[1,2,3].map(l=>t.jsxs("div",{className:"bg-white rounded-lg p-4",children:[t.jsx(Ie,{className:"h-4 w-full mb-2"}),t.jsx(Ie,{className:"h-3 w-2/3 mb-3"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Ie,{className:"h-5 w-16 rounded-full"}),t.jsx(Ie,{className:"h-5 w-12 rounded-full"})]})]},l))})]},s))})}function yp(){return t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Ie,{className:"h-4 w-16"}),t.jsx(Ie,{className:"h-5 w-20 rounded-full"})]}),t.jsx(Ie,{className:"h-5 w-48"})]}),t.jsx(Ie,{className:"h-4 w-24"})]}),t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx(Ie,{className:"h-3 w-16"}),t.jsx(Ie,{className:"h-3 w-8"})]}),t.jsx(Ie,{className:"h-2 w-full rounded-full"})]})]})}function Ps({progress:s=0,size:l="md",showLabel:o=!0,label:c="",isBlocked:h=!1}){const x=Math.min(100,Math.max(0,s)),m={sm:{width:"w-12",height:"h-5",tip:"w-1 h-2.5",text:"text-[10px]"},md:{width:"w-16",height:"h-6",tip:"w-1.5 h-3",text:"text-xs"},lg:{width:"w-20",height:"h-8",tip:"w-2 h-4",text:"text-sm"}},f=m[l]||m.md,w=()=>h?"bg-red-500":x>=80?"bg-green-500":x>=50?"bg-blue-500":x>=25?"bg-yellow-500":"bg-gray-400",M=()=>h?"bg-red-100 dark:bg-red-900/20":"bg-gray-200 dark:bg-gray-700";return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex items-center",title:`${x}%${c?` - ${c}`:""}`,children:[t.jsxs("div",{className:`${f.width} ${f.height} ${M()} rounded-sm border-2 border-gray-300 dark:border-gray-600 relative overflow-hidden`,children:[t.jsx("div",{className:`absolute inset-y-0 right-0 ${w()} transition-all duration-500 ease-out`,style:{width:`${x}%`}}),o&&t.jsxs("span",{className:`absolute inset-0 flex items-center justify-center ${f.text} font-bold ${x>50?"text-white":"text-gray-700 dark:text-gray-300"} z-10`,children:[x,"%"]})]}),t.jsx("div",{className:`${f.tip} bg-gray-300 dark:bg-gray-600 rounded-l-sm -mr-0.5`})]}),c&&t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline",children:c}),h&&t.jsx("span",{className:"text-xs text-red-500 font-medium",children:""})]})}function K0({progress:s=0,isBlocked:l=!1}){const o=Math.min(100,Math.max(0,s)),c=()=>l?"bg-red-500":o>=80?"bg-green-500":o>=50?"bg-blue-500":o>=25?"bg-yellow-500":"bg-gray-400";return t.jsxs("div",{className:"flex items-center gap-1.5",title:`${o}%`,children:[t.jsx("div",{className:"w-10 h-4 bg-gray-200 dark:bg-gray-700 rounded-sm border border-gray-300 dark:border-gray-600 relative overflow-hidden",children:t.jsx("div",{className:`absolute inset-y-0 right-0 ${c()} transition-all duration-300`,style:{width:`${o}%`}})}),t.jsx("div",{className:"w-1 h-2 bg-gray-300 dark:bg-gray-600 rounded-l-sm"}),t.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 w-8 text-left",children:[o,"%"]})]})}function Po({value:s=0,onChange:l,disabled:o=!1,isBlocked:c=!1}){const h=x=>{const m=Math.min(100,Math.max(0,parseInt(x.target.value)||0));l?.(m)};return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ps,{progress:s,size:"md",showLabel:!1,isBlocked:c}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"number",min:"0",max:"100",value:s,onChange:h,disabled:o||c,className:"w-14 px-2 py-1.5 text-center border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm disabled:opacity-50"}),t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"%"})]})]})}const vp=()=>localStorage.getItem("currentOrgId")||null;async function Ae(s,l={}){const o=l.organizationId||vp();console.log(` [API] ${l.method||"GET"} ${s}`,{organizationId:o,source:l.organizationId?"EXPLICIT":"localStorage"});const{organizationId:c,...h}=l,x={"Content-Type":"application/json",...o?{"X-Organization-Id":o}:{},...h.headers};return fetch(s,{...h,credentials:"include",headers:x})}function bp(){const[s,l]=g.useState(null),[o,c]=g.useState(null),[h,x]=g.useState([]),[m,f]=g.useState(!0),[w,M]=g.useState(null),[b,j]=g.useState("user"),[T,O]=g.useState([]),[L,z]=g.useState(!1),{currentOrganization:E}=mt(),{user:V}=Ra(),{slug:C}=Mo(),k=C?`/${C}`:"",P=V?.memberships?.find(D=>D.organizationId===E?.id),Y=V?.teamMembers?.find(D=>D.organizationId===E?.id),B=P?.id||Y?.id;if(console.log(" [Dashboard] user.memberships:",V?.memberships),console.log(" [Dashboard] currentOrganization:",E?.id),console.log(" [Dashboard] currentMembership:",P),console.log(" [Dashboard] membershipId:",B),g.useEffect(()=>{if(!E?.id)return;console.log(" [Dashboard] Fetching data for org:",E.name,E.id),console.log(" [Dashboard] With membershipId:",B),f(!0);const D=new URLSearchParams;B&&D.append("userId",B),D.append("viewMode",b);const p=D.toString()?`?${D.toString()}`:"";Promise.all([Ae(`/api/dashboard${p}`,{organizationId:E.id}),Ae("/api/orphans/summary",{organizationId:E.id}),Ae("/api/sprints",{organizationId:E.id}),Ae("/api/tasks/my",{organizationId:E.id})]).then(async([H,ae,me,pe])=>{if(!H.ok)throw new Error("Failed to fetch dashboard");const fe=await H.json();if(console.log(" [Dashboard] API returned:",{userMilestones:fe.userMilestones?.length||0,allMilestones:fe.allMilestones?.length||0,allTasks:fe.allTasks?.length||0,userRocks:fe.userRocks?.length||0}),l(fe),ae.ok){const we=await ae.json();c(we)}if(me.ok){const we=await me.json();O(Array.isArray(we)?we:[])}if(pe.ok){const we=await pe.json();console.log(" [Dashboard] User tasks:",we?.length||0),x(Array.isArray(we)?we:[])}}).catch(H=>M(H.message)).finally(()=>f(!1))},[E?.id,b,B]),m)return t.jsxs("div",{className:"space-y-8 animate-fade-in",children:[t.jsxs("div",{children:[t.jsx("div",{className:"h-8 w-32 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse mb-2"}),t.jsx("div",{className:"h-4 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),t.jsx(pp,{}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6",children:[t.jsx("div",{className:"h-6 w-40 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-6"}),t.jsx("div",{className:"space-y-4",children:[1,2,3].map(D=>t.jsx(yp,{},D))})]})]});if(w)return t.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-6 rounded-2xl border border-red-200 dark:border-red-800",children:[t.jsx("p",{className:"font-medium",children:"  "}),t.jsx("p",{className:"text-sm mt-1",children:w})]});const{currentQuarter:ee,currentSprint:Q,rocks:ie=[],objectives:ce=[],overallStats:W={},userMilestones:v=[],userRocks:A=[],allMilestones:te=[],allTasks:xe=[]}=s||{},Se=b==="user"?v:te,je=b==="user"?h:xe,G=async D=>{try{(await fetch("/api/organizations/current-sprint",{method:"PUT",headers:{"Content-Type":"application/json","X-Organization-Id":E.id},credentials:"include",body:JSON.stringify({sprintId:D})})).ok&&window.location.reload()}catch(p){console.error("Error setting current sprint:",p)}z(!1)},ne=async(D,p)=>{const H=p==="DONE"?"TODO":p==="TODO"?"IN_PROGRESS":"DONE",ae=[...h],me=s;x(h.map(pe=>pe.id===D?{...pe,status:H}:pe)),l(pe=>({...pe,allTasks:(pe.allTasks||[]).map(fe=>fe.id===D?{...fe,status:H}:fe)}));try{(await Ae(`/api/tasks/${D}/status`,{organizationId:E.id,method:"PATCH",body:JSON.stringify({status:H})})).ok||(x(ae),l(me))}catch(pe){console.error("Error updating task status:",pe),x(ae),l(me)}};return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"animate-slide-in-up flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:""}),t.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:[" ",ee?.quarter||4," / ",ee?.year||2025]})]}),t.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-gray-800 rounded-xl p-1 border border-gray-200 dark:border-gray-700 shadow-sm",children:[t.jsxs("button",{onClick:()=>j("user"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${b==="user"?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[t.jsx(Ta,{size:14}),t.jsx("span",{children:""})]}),t.jsxs("button",{onClick:()=>j("all"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${b==="all"?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[t.jsx(At,{size:14}),t.jsx("span",{children:""})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[t.jsx(Gn,{title:"",value:W.totalObjectives,icon:Xr,gradient:"from-purple-500 to-purple-600",delay:0}),t.jsx(Gn,{title:"",value:W.completedRocks,total:W.totalRocks,icon:cr,gradient:"from-blue-500 to-blue-600",delay:1}),t.jsx(Gn,{title:" ",value:W.totalStories,icon:Ss,gradient:"from-orange-500 to-orange-600",delay:2}),t.jsx(Gn,{title:"",value:je.filter(D=>D.status!=="DONE").length,total:je.length,icon:Aa,gradient:"from-emerald-500 to-teal-600",delay:3})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-slide-in-up",style:{animationDelay:"0.15s"},children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 border border-gray-100 dark:border-gray-700 order-1 lg:order-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-orange-500 to-amber-600 shadow-lg",children:t.jsx(Ss,{className:"w-5 h-5 text-white"})}),t.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:b==="user"?"  ":" "})]}),t.jsxs(It,{to:`${k}/stories`,className:"flex items-center gap-2 text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 text-sm font-medium group",children:[t.jsx("span",{children:""}),t.jsx(Ma,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})]})]}),Se.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ss,{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:b==="user"?"   ":"  "})]}):t.jsxs("div",{className:"space-y-2",children:[Se.slice(0,5).map(D=>t.jsxs("div",{className:`p-3 rounded-xl border ${D.isBlocked?"border-red-200 dark:border-red-800 bg-red-50/50 dark:bg-red-900/10":"border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50"} transition-all`,children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[D.code&&t.jsx("span",{className:"text-xs px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded font-mono",children:D.code}),t.jsx("h3",{className:`font-medium text-sm flex-1 truncate ${D.isBlocked?"text-red-700 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:D.title}),D.isBlocked&&t.jsx("span",{className:"text-red-500 text-xs",children:""})]}),b==="all"&&D.owner&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 truncate",children:[" ",D.owner.name]}),t.jsx(Ps,{progress:D.progress||0,size:"xs"})]},D.id)),Se.length>5&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center pt-2",children:["+",Se.length-5," "]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 border border-gray-100 dark:border-gray-700 order-2 lg:order-2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 shadow-lg",children:t.jsx(Aa,{className:"w-5 h-5 text-white"})}),t.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:b==="user"?" ":""})]}),t.jsxs(It,{to:`${k}/tasks`,className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 hover:text-emerald-700 dark:hover:text-emerald-300 text-sm font-medium group",children:[t.jsx("span",{children:""}),t.jsx(Ma,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})]})]}),je.filter(D=>D.status!=="DONE").length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(As,{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"  "})]}):t.jsxs("div",{className:"space-y-2",children:[je.filter(D=>D.status!=="DONE").slice(0,5).map(D=>t.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl border border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-all",children:[t.jsx("button",{onClick:()=>ne(D.id,D.status),className:`p-1.5 rounded-lg transition-colors ${D.status==="IN_PROGRESS"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:text-emerald-600"}`,title:D.status==="TODO"?"":"",children:D.status==="IN_PROGRESS"?t.jsx(tl,{className:"w-4 h-4"}):t.jsx(Oo,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:D.title}),D.story&&t.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400 truncate",children:[" ",D.story.title]}),b==="all"&&D.owner&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[" ",D.owner.name]})]}),D.priority>0&&t.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${D.priority===2?"bg-red-100 dark:bg-red-900/30 text-red-600":"bg-orange-100 dark:bg-orange-900/30 text-orange-600"}`,children:D.priority===2?"":""})]},D.id)),je.filter(D=>D.status!=="DONE").length>5&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center pt-2",children:["+",je.filter(D=>D.status!=="DONE").length-5," "]})]})]})]}),o&&o.total>0&&t.jsx(kp,{orphans:o,basePath:k}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 animate-slide-in-up border border-gray-100 dark:border-gray-700",style:{animationDelay:"0.2s"},children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:Q?.name||"  "}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>z(!L),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"  ",children:t.jsx(B0,{size:16})}),L&&t.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 min-w-[200px] max-h-64 overflow-y-auto",children:[t.jsx("div",{className:"p-2 border-b border-gray-100 dark:border-gray-700",children:t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"  "})}),T.map(D=>t.jsx("button",{onClick:()=>G(D.id),className:`w-full text-right px-3 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${Q?.id===D.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"}`,children:D.name},D.id)),T.length===0&&t.jsx("div",{className:"p-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:" "})]})]})]}),Q?.goal&&t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:Q.goal})]})}),t.jsxs(It,{to:`${k}/stories`,className:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium group",children:[t.jsx("span",{children:"  "}),t.jsx(Ma,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})]})]}),Q?.stats&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx(Kn,{label:"",value:Q.stats.todo,icon:tl,color:"gray"}),t.jsx(Kn,{label:"",value:Q.stats.inProgress,icon:dp,color:"blue"}),t.jsx(Kn,{label:"",value:Q.stats.blocked,icon:Gm,color:"red"}),t.jsx(Kn,{label:"",value:Q.stats.done,icon:As,color:"green"})]}),!Q&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx(zs,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-3",children:"   "}),t.jsx("button",{onClick:()=>z(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:" "})]})]})]})}function Gn({title:s,value:l,total:o,icon:c,gradient:h,delay:x}){return t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl sm:rounded-2xl shadow-sm p-4 sm:p-6 animate-slide-in-up border border-gray-100 dark:border-gray-700 hover:shadow-md transition-shadow",style:{animationDelay:`${x*.1}s`},children:t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[t.jsx("div",{className:`p-2 sm:p-3 rounded-lg sm:rounded-xl bg-gradient-to-br ${h} shadow-lg`,children:t.jsx(c,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:s}),t.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:[l,o!==void 0&&t.jsxs("span",{className:"text-sm sm:text-base font-normal text-gray-400 dark:text-gray-500",children:["/",o]})]})]})]})})}function Kn({label:s,value:l,icon:o,color:c}){const h={gray:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300",blue:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",red:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",green:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"};return t.jsxs("div",{className:`rounded-lg sm:rounded-xl p-3 sm:p-4 ${h[c]} transition-all hover:scale-105`,children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-1",children:[t.jsx(o,{className:"w-4 h-4 sm:w-[18px] sm:h-[18px]"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium",children:s})]}),t.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:l})]})}function kp({orphans:s,basePath:l}){const o=[{key:"objectivesWithoutRocks",label:"  ",count:s.objectivesWithoutRocks,icon:"",link:`${l}/objectives?filter=no-rocks`,color:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300"},{key:"rocksWithoutObjective",label:"  ",count:s.rocksWithoutObjective,icon:"",link:`${l}/rocks?filter=no-objective`,color:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"},{key:"rocksWithoutStories",label:'  "',count:s.rocksWithoutStories,icon:"",link:`${l}/rocks?filter=no-stories`,color:"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300"},{key:"storiesWithoutRock",label:'"  ',count:s.storiesWithoutRock,icon:"",link:`${l}/stories?filter=no-rock`,color:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300"},{key:"storiesWithoutSprint",label:'" ',count:s.storiesWithoutSprint,icon:"",link:`${l}/stories?filter=backlog`,color:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300"}].filter(c=>c.count>0);return o.length===0?null:t.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl p-4 border border-amber-200 dark:border-amber-800 animate-slide-in-up",style:{animationDelay:"0.15s"},children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(zo,{size:18,className:"text-amber-600 dark:text-amber-400"}),t.jsxs("h3",{className:"font-semibold text-amber-800 dark:text-amber-300",children:["   (",s.total,")"]})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(c=>t.jsxs(It,{to:c.link,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:scale-105 hover:shadow-md ${c.color}`,children:[t.jsx("span",{children:c.icon}),t.jsx("span",{children:c.count}),t.jsx("span",{className:"hidden sm:inline",children:c.label}),t.jsx(F0,{size:12,className:"opacity-50"})]},c.key))})]})}const X0=g.createContext(null),ol=()=>{const s=g.useContext(X0);if(!s)throw new Error("useToast must be used within ToastProvider");return s},jp={success:To,error:Ts,warning:Ca,info:ep},wp={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"},Np={success:"text-green-500",error:"text-red-500",warning:"text-yellow-500",info:"text-blue-500"};function Sp({toast:s,onClose:l}){const o=jp[s.type];return t.jsxs("div",{className:`
        flex items-start gap-3 p-4 rounded-lg border shadow-lg
        animate-slide-in-right
        ${wp[s.type]}
      `,children:[t.jsx(o,{className:`w-5 h-5 flex-shrink-0 ${Np[s.type]}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[s.title&&t.jsx("p",{className:"font-medium text-sm",children:s.title}),t.jsx("p",{className:"text-sm opacity-90",children:s.message})]}),t.jsx("button",{onClick:()=>l(s.id),className:"flex-shrink-0 opacity-70 hover:opacity-100 transition-opacity",children:t.jsx(Bt,{className:"w-4 h-4"})})]})}function Cp({children:s}){const[l,o]=g.useState([]),c=g.useCallback(({type:M="info",title:b,message:j,duration:T=5e3})=>{const O=Date.now()+Math.random();return o(L=>[...L,{id:O,type:M,title:b,message:j}]),T>0&&setTimeout(()=>{h(O)},T),O},[]),h=g.useCallback(M=>{o(b=>b.filter(j=>j.id!==M))},[]),x=g.useCallback((M,b)=>c({type:"success",message:M,title:b}),[c]),m=g.useCallback((M,b)=>c({type:"error",message:M,title:b}),[c]),f=g.useCallback((M,b)=>c({type:"warning",message:M,title:b}),[c]),w=g.useCallback((M,b)=>c({type:"info",message:M,title:b}),[c]);return t.jsxs(X0.Provider,{value:{addToast:c,removeToast:h,success:x,error:m,warning:f,info:w},children:[s,t.jsx("div",{className:"fixed bottom-4 left-4 z-50 flex flex-col gap-2 max-w-sm",children:l.map(M=>t.jsx(Sp,{toast:M,onClose:h},M.id))})]})}function tr(){const[s,l]=g.useState(!1),[o,c]=g.useState(null),h=ol(),m=g.useContext(Io)?.currentOrganization?.id,f=g.useCallback(async(w,M={})=>{const{method:b="GET",body:j,showToast:T=!0,successMessage:O,headers:L={},organizationId:z}=M;l(!0),c(null);try{const E=z||m||localStorage.getItem("currentOrgId");console.log(` [useApi] ${b} ${w}`,{orgId:E,source:z?"explicit":m?"context":"localStorage"});const V={method:b,credentials:"include",headers:{"Content-Type":"application/json",...E?{"X-Organization-Id":E}:{},...L}};j&&b!=="GET"&&(V.body=JSON.stringify(j));const C=await fetch(w,V);if(C.status===401)return T&&h.error("  -   "),null;const k=await C.json().catch(()=>null);if(!C.ok){const P=k?.error||k?.message||` ${C.status}`;return T&&h.error(P),c(P),null}return O&&T&&h.success(O),k}catch(E){const V=E.message||"  ";return T&&h.error(V),c(V),null}finally{l(!1)}},[h,m]);return{loading:s,error:o,request:f,currentOrgId:m}}function dl({value:s,onChange:l,placeholder:o="...",className:c="",filters:h=[],activeFilters:x={},onFilterChange:m}){const[f,w]=g.useState(!1),M=Object.values(x).some(b=>b&&b!=="all");return t.jsxs("div",{className:`space-y-3 ${c}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx(il,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),t.jsx("input",{type:"text",value:s,onChange:b=>l(b.target.value),placeholder:o,className:"w-full pr-10 pl-10 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),s&&t.jsx("button",{onClick:()=>l(""),className:"absolute left-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:t.jsx(Bt,{size:16})})]}),h.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>w(!f),className:`flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg transition-colors ${M?"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[t.jsx(_0,{size:16}),t.jsx("span",{children:""}),M&&t.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-indigo-500 text-white rounded-full",children:Object.values(x).filter(b=>b&&b!=="all").length}),f?t.jsx(el,{size:16}):t.jsx(Da,{size:16})]}),f&&t.jsxs("div",{className:"flex flex-wrap gap-3 p-3 bg-gray-50 dark:bg-gray-800/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[h.map(b=>t.jsxs("div",{className:"flex-1 min-w-[120px]",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:b.label}),t.jsxs("select",{value:x[b.key]||"all",onChange:j=>m(b.key,j.target.value),className:"w-full px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[t.jsx("option",{value:"all",children:""}),b.options.map(j=>t.jsx("option",{value:j.value,children:j.label},j.value))]})]},b.key)),M&&t.jsx("button",{onClick:()=>{h.forEach(b=>m(b.key,"all"))},className:"self-end px-3 py-1.5 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:" "})]})]})]})}function cl(s,l,o){return g.useMemo(()=>{if(!o||o.length<2||!Array.isArray(s))return s||[];const c=o.toLowerCase();return s.filter(h=>l.some(x=>{const m=Ep(h,x);return m==null?!1:String(m).toLowerCase().includes(c)}))},[s,l,o])}function Ep(s,l){return!s||!l?null:l.split(".").reduce((o,c)=>o&&o[c]!==void 0?o[c]:null,s)}function Y0({title:s,items:l=[],availableItems:o=[],parentId:c,linkField:h,onLink:x,onUnlink:m,basePath:f="",itemPath:w="",emptyMessage:M="  ",showCode:b=!0,showProgress:j=!1,readOnly:T=!1}){const[O,L]=g.useState(!0),[z,E]=g.useState(!1),[V,C]=g.useState(""),k=g.useMemo(()=>{const Q=new Set(l.map(ie=>ie.id));return o.filter(ie=>!Q.has(ie.id))},[l,o]),P=g.useMemo(()=>{if(!V)return k;const Q=V.toLowerCase();return k.filter(ie=>ie.name?.toLowerCase().includes(Q)||ie.title?.toLowerCase().includes(Q)||ie.code?.toLowerCase().includes(Q))},[k,V]),Y=async Q=>{x&&(await x(Q,c),C(""),E(!1))},B=async Q=>{m&&window.confirm("   ?")&&await m(Q)},ee=Q=>Q.name||Q.title||" ";return t.jsxs("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("button",{onClick:()=>L(!O),className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[t.jsx("svg",{className:`w-4 h-4 transition-transform ${O?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s," (",l.length,")"]}),!T&&t.jsx("button",{onClick:()=>E(!z),className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 rounded hover:bg-blue-50 dark:hover:bg-blue-900/20",title:" ",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),z&&!T&&t.jsxs("div",{className:"mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"    ...",value:V,onChange:Q=>C(Q.target.value),className:`w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md \r
                     bg-white dark:bg-gray-700 text-gray-900 dark:text-white\r
                     focus:ring-2 focus:ring-blue-500 focus:border-transparent`,autoFocus:!0}),P.length>0?t.jsxs("div",{className:"mt-2 max-h-48 overflow-y-auto",children:[P.slice(0,10).map(Q=>t.jsxs("button",{onClick:()=>Y(Q.id),className:`w-full text-right px-3 py-2 text-sm hover:bg-blue-100 dark:hover:bg-blue-900/30 \r
                           rounded flex items-center justify-between gap-2 text-gray-700 dark:text-gray-300`,children:[t.jsxs("span",{className:"flex items-center gap-2",children:[b&&Q.code&&t.jsx("span",{className:"text-xs font-mono bg-gray-200 dark:bg-gray-600 px-1.5 py-0.5 rounded",children:Q.code}),t.jsx("span",{children:ee(Q)})]}),t.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]},Q.id)),P.length>10&&t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center py-2",children:[" 10  ",P.length," "]})]}):t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center",children:V?"  ":"   "})]}),O&&t.jsx("div",{className:"space-y-1",children:l.length===0?t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic py-2",children:M}):l.map(Q=>t.jsxs("div",{className:`flex items-center justify-between gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-800 \r
                         rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 group`,children:[t.jsxs(It,{to:`${f}/${w}`,className:"flex items-center gap-2 flex-1 min-w-0",children:[b&&Q.code&&t.jsx("span",{className:"text-xs font-mono bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded shrink-0",children:Q.code}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:ee(Q)}),j&&typeof Q.progress=="number"&&t.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${Q.progress>=100?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"bg-gray-200 text-gray-600 dark:bg-gray-600 dark:text-gray-300"}`,children:[Q.progress,"%"]})]}),!T&&t.jsx("button",{onClick:()=>B(Q.id),className:`p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 \r
                             opacity-0 group-hover:opacity-100 transition-opacity`,title:"",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Q.id))})]})}function e0(s){if(!s)return"";const l=new Date(s);return isNaN(l.getTime())?"":l.toLocaleDateString("he-IL",{weekday:"short",day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Mp(s){if(!s)return"";const l=new Date(s);if(isNaN(l.getTime()))return"";const c=new Date-l,h=Math.floor(c/6e4),x=Math.floor(c/36e5),m=Math.floor(c/864e5);return h<1?"":h<60?` ${h} `:x<24?` ${x} `:m<7?` ${m} `:m<30?` ${Math.floor(m/7)} `:m<365?` ${Math.floor(m/30)} `:` ${Math.floor(m/365)} `}function Ip(s,l){const o=[];if(s&&o.push(`: ${e0(s)}`),l&&s){const c=new Date(s),h=new Date(l);Math.abs(h-c)>1e3&&o.push(`: ${e0(l)} (${Mp(l)})`)}return o.join(`
`)}function ul({createdAt:s,updatedAt:l,children:o,className:c=""}){const h=Ip(s,l);return h?t.jsx("span",{title:h,className:`cursor-help ${c}`,children:o}):t.jsx(t.Fragment,{children:o})}function Ap(){const[s,l]=g.useState([]),[o,c]=g.useState([]),[h,x]=g.useState([]),[m,f]=g.useState([]),[w,M]=g.useState(!1),[b,j]=g.useState(null),[T,O]=g.useState(""),[L,z]=g.useState(""),[E,V]=g.useState({code:"",name:"",description:"",ownerId:"",teamId:""}),{loading:C,request:k}=tr(),{currentOrganization:P,basePath:Y}=mt(),{isAdmin:B}=zt(),ee=cl(s,["code","name","description","owner.name"],T);g.useEffect(()=>{P&&(ie(),ce(),W(),B&&Q())},[P?.id,L]);const Q=async()=>{const p=await k("/api/teams",{showToast:!1});p&&Array.isArray(p)&&x(p)},ie=async()=>{let p="/api/objectives";L&&(p+=`?orphanFilter=${L}`);const H=await k(p);H&&Array.isArray(H)&&l(H)},ce=async()=>{const p=await k("/api/team",{showToast:!1});p&&Array.isArray(p)&&c(p)},W=async()=>{const p=await k("/api/rocks",{showToast:!1});p&&Array.isArray(p)&&f(p)},v=async(p,H)=>{await k(`/api/rocks/${p}`,{method:"PUT",body:{objectiveId:H},successMessage:"  "})&&(ie(),W())},A=async p=>{await k(`/api/rocks/${p}`,{method:"PUT",body:{objectiveId:null},successMessage:"  "})&&(ie(),W())},te=p=>m.filter(H=>H.objectiveId===p||H.objective?.id===p),xe=async p=>{p.preventDefault();const H=b?`/api/objectives/${b.id}`:"/api/objectives";await k(H,{method:b?"PUT":"POST",body:E,successMessage:b?"  ":"  "})&&(M(!1),G(),ie())},Se=p=>{j(p),V({code:p.code,name:p.name,description:p.description||"",ownerId:p.ownerId||p.owner?.id||"",teamId:p.teamId||p.team?.id||""}),M(!0)},je=async p=>{if(!confirm("   ?"))return;await k(`/api/objectives/${p}`,{method:"DELETE",successMessage:"  "})&&ie()},G=()=>{j(null),V({code:"",name:"",description:"",ownerId:""})},ne=()=>{if(s.length===0)return"p-01";const p=s.map(me=>{const pe=me.code?.match(/^p-(\d+)$/);return parseInt(pe?pe[1]:me.code,10)}).filter(me=>!isNaN(me));return p.length===0?"p-01":`p-${(Math.max(...p)+1).toString().padStart(2,"0")}`},D=()=>{G(),V(p=>({...p,code:ne()})),M(!0)};return C&&s.length===0?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Ie,{className:"h-8 w-32"}),t.jsx(Ie,{className:"h-10 w-32"})]}),t.jsx(Ie,{className:"h-12 w-full rounded-xl"}),t.jsx("div",{className:"space-y-3",children:[1,2,3].map(p=>t.jsx(Ie,{className:"h-24 rounded-xl"},p))})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl shadow-lg",children:t.jsx(Xr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:""}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  "})]})]}),t.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg shadow-purple-500/25",children:[t.jsx(Ze,{className:"w-5 h-5"}),t.jsx("span",{children:" "})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[t.jsx("div",{className:"flex-1 min-w-[200px]",children:t.jsx(dl,{value:T,onChange:O,placeholder:"  , ,   ..."})}),t.jsxs("select",{value:L,onChange:p=>z(p.target.value),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"no-rocks",children:"  "})]}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ee.length," "]})]}),T&&t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[" ",ee.length," "]}),s.length===0?t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"    "}),t.jsx("button",{onClick:D,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:" "})]}):ee.length===0?t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"    "})]}):t.jsx("div",{className:"space-y-3",children:ee.map(p=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-all",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"hidden sm:flex p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl",children:t.jsx(Xr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"inline-block px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 text-xs font-medium rounded-lg",children:p.code}),t.jsx(ul,{createdAt:p.createdAt,updatedAt:p.updatedAt,children:t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:p.name})})]}),p.description&&t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-1",children:p.description})]}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[t.jsx("button",{onClick:()=>Se(p),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:t.jsx(ur,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>je(p.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:t.jsx(Tt,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-3 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ps,{progress:p.progress||0,size:"sm"}),t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[p.rocksCount||0," "]})]}),p.owner&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Ta,{className:"w-3.5 h-3.5 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:p.owner.name})]})]}),t.jsx(Y0,{title:" ",items:te(p.id),availableItems:m,parentId:p.id,linkField:"objectiveId",onLink:v,onUnlink:A,basePath:Y,itemPath:"rocks",emptyMessage:"    ",showCode:!0,showProgress:!0})]})]})},p.id))}),w&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:b?" ":" "}),t.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:E.code,onChange:p=>V({...E,code:p.target.value}),placeholder:"p-01",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",required:!0}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"  (01, 02, 03...)"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:E.name,onChange:p=>V({...E,name:p.target.value}),placeholder:" ",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("textarea",{value:E.description,onChange:p=>V({...E,description:p.target.value}),placeholder:" ...",rows:3,className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white resize-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:E.ownerId,onChange:p=>V({...E,ownerId:p.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:""}),o.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),B&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:E.teamId,onChange:p=>V({...E,teamId:p.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:" "}),h.map(p=>t.jsx("option",{value:p.id,children:p.name},p.id))]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{M(!1),G()},className:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:""}),t.jsx("button",{type:"submit",disabled:C,className:"flex-1 px-4 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors disabled:opacity-50",children:C?"...":b?"":""})]})]})]})})]})}function t0(s){return s?s.startsWith("#")?s:`#${s}`:null}function Oa({options:s=[],value:l=[],onChange:o,placeholder:c=" ...",searchPlaceholder:h=" ...",disabled:x=!1,className:m=""}){const[f,w]=g.useState(!1),[M,b]=g.useState(""),j=g.useRef(null),T=g.useRef(null),O=g.useMemo(()=>new Set(Array.isArray(l)?l:[]),[l]),L=g.useMemo(()=>{const C=M.trim().toLowerCase();return C?s.filter(k=>(k.name||"").toLowerCase().includes(C)):s},[s,M]);g.useEffect(()=>{const C=k=>{j.current&&!j.current.contains(k.target)&&(w(!1),b(""))};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),g.useEffect(()=>{f&&T.current&&T.current.focus()},[f]);const z=C=>{const k=new Set(O);k.has(C)?k.delete(C):k.add(C),o(Array.from(k))},E=C=>{C.stopPropagation(),o([]),b("")},V=s.filter(C=>O.has(C.id));return t.jsxs("div",{ref:j,className:`relative ${m}`,children:[t.jsxs("button",{type:"button",onClick:()=>!x&&w(!f),disabled:x,className:`w-full flex items-center justify-between px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 text-right transition-colors ${x?"bg-gray-100 dark:bg-gray-800 cursor-not-allowed":"bg-white dark:bg-gray-700 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[t.jsx("div",{className:"flex-1 min-w-0",children:V.length===0?t.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:c}):t.jsxs("div",{className:"flex flex-wrap gap-1",children:[V.slice(0,3).map(C=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full border border-gray-200 dark:border-gray-700",style:{backgroundColor:t0(C.color)||"#CBD5E1"}}),t.jsx("span",{className:"truncate max-w-24 text-gray-700 dark:text-gray-200",children:C.name})]},C.id)),V.length>3&&t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",V.length-3]})]})}),t.jsxs("div",{className:"flex items-center gap-1",children:[V.length>0&&!x&&t.jsx("button",{type:"button",onClick:E,className:"p-0.5 hover:bg-gray-100 dark:hover:bg-gray-600 rounded transition-colors",title:"",children:t.jsx(Bt,{className:"w-4 h-4 text-gray-400"})}),t.jsx(Da,{className:`w-4 h-4 text-gray-400 transition-transform ${f?"rotate-180":""}`})]})]}),f&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"relative",children:[t.jsx(il,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{ref:T,type:"text",value:M,onChange:C=>b(C.target.value),placeholder:h,className:"w-full pr-9 pl-3 py-2 bg-gray-50 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-purple-500 text-sm dark:text-white"})]})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:L.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400 text-sm",children:"  "}):L.map(C=>{const k=O.has(C.id);return t.jsxs("button",{type:"button",onClick:()=>z(C.id),className:`w-full flex items-center gap-2 px-3 py-2.5 text-right transition-colors ${k?"bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[t.jsx("div",{className:`w-4 h-4 flex-shrink-0 ${k?"text-purple-600":"text-transparent"}`,children:t.jsx(Os,{className:"w-4 h-4"})}),t.jsx("span",{className:"w-3 h-3 rounded-full border border-gray-200 dark:border-gray-700",style:{backgroundColor:t0(C.color)||"#CBD5E1"}}),t.jsx("span",{className:"flex-1 text-sm",children:C.name})]},C.id)})})]})]})}function Tp(s){return s?s.startsWith("#")?s:`#${s}`:null}function Ro({labels:s=[],max:l=3}){if(!Array.isArray(s)||s.length===0)return null;const o=s.slice(0,l),c=s.length-o.length;return t.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[o.map(h=>t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",title:h.name,children:[t.jsx("span",{className:"w-2.5 h-2.5 rounded-full border border-gray-200 dark:border-gray-700",style:{backgroundColor:Tp(h.color)||"#CBD5E1"}}),t.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:h.name})]},h.id)),c>0&&t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",title:s.map(h=>h.name).join(", "),children:["+",c]})]})}const r0=[{value:1,label:"Q1"},{value:2,label:"Q2"},{value:3,label:"Q3"},{value:4,label:"Q4"}],a0=[2024,2025,2026,2027];function Op(){const[s,l]=g.useState([]),[o,c]=g.useState([]),[h,x]=g.useState([]),[m,f]=g.useState([]),[w,M]=g.useState([]),[b,j]=g.useState([]),[T,O]=g.useState(""),[L,z]=g.useState([]),[E,V]=g.useState("createdAt"),[C,k]=g.useState("desc"),[P,Y]=g.useState({year:new Date().getFullYear(),quarter:Math.ceil((new Date().getMonth()+1)/3),objectiveId:"",orphanFilter:""}),[B,ee]=g.useState(!1),[Q,ie]=g.useState(null),[ce,W]=g.useState({code:"",name:"",description:"",year:new Date().getFullYear(),quarter:Math.ceil((new Date().getMonth()+1)/3),progress:0,ownerId:"",objectiveId:"",teamId:"",labelIds:[]}),{loading:v,request:A}=tr(),{currentOrganization:te,basePath:xe}=mt(),{isAdmin:Se}=zt(),je=cl(s,["code","name","description","owner.name","objective.name"],T);g.useEffect(()=>{te&&(D(),p(),H(),ae(),Se&&G(),ne())},[P.year,P.quarter,P.objectiveId,te?.id,E,C,L.join(",")]);const G=async()=>{const $=await A("/api/teams",{showToast:!1});$&&Array.isArray($)&&f($)},ne=async()=>{const $=await A("/api/labels",{showToast:!1});$&&Array.isArray($)&&M($)},D=async()=>{let $="/api/rocks";const Te=new URLSearchParams;P.year&&Te.append("year",P.year),P.quarter&&Te.append("quarter",P.quarter),P.objectiveId&&Te.append("objectiveId",P.objectiveId),P.orphanFilter&&Te.append("orphanFilter",P.orphanFilter),L.length>0&&Te.append("labelIds",L.join(",")),Te.append("labelMode","or"),E&&Te.append("sortBy",E),C&&Te.append("sortOrder",C),Te.toString()&&($+=`?${Te.toString()}`);const pt=await A($,{showToast:!1});pt&&Array.isArray(pt)&&l(pt)},p=async()=>{const $=await A("/api/objectives",{showToast:!1});$&&Array.isArray($)&&c($)},H=async()=>{const $=await A("/api/team",{showToast:!1});$&&Array.isArray($)&&x($)},ae=async()=>{const $=await A("/api/stories?limit=50",{showToast:!1});$&&(Array.isArray($)?j($):$.data&&Array.isArray($.data)&&j($.data))},me=async($,Te)=>{await A(`/api/stories/${$}`,{method:"PUT",body:{rockId:Te},successMessage:"   "})&&(D(),ae())},pe=async $=>{await A(`/api/stories/${$}`,{method:"PUT",body:{rockId:null},successMessage:"   "})&&(D(),ae())},fe=$=>b.filter(Te=>Te.rock?.id===$),we=async $=>{$.preventDefault();const Te=Q?`/api/rocks/${Q.id}`:"/api/rocks",jt=await A(Te,{method:Q?"PUT":"POST",body:ce,successMessage:Q?"  ":"  "});if(jt){const Wt=Q?.id||jt.id;Wt&&await A(`/api/rocks/${Wt}/labels`,{method:"POST",body:{labelIds:ce.labelIds||[]},showToast:!1}),ee(!1),Ne(),D()}},F=$=>{ie($),W({code:$.code,name:$.name,description:$.description||"",year:$.year,quarter:$.quarter,progress:$.progress||0,ownerId:$.ownerId||$.owner?.id||"",objectiveId:$.objectiveId||$.objective?.id||"",teamId:$.teamId||$.team?.id||"",labelIds:Array.isArray($.labels)?$.labels.map(Te=>Te.id):[]}),ee(!0)},R=async $=>{if(!confirm("   ?"))return;await A(`/api/rocks/${$}`,{method:"DELETE",successMessage:"  "})&&D()},ue=async $=>{if(!confirm(`   "${$.name}"  ?`))return;await A(`/api/rocks/${$.id}/carry-over`,{method:"POST",successMessage:"   "})&&D()},Ne=()=>{ie(null),W({code:"",name:"",description:"",year:P.year,quarter:P.quarter,progress:0,ownerId:"",objectiveId:"",teamId:"",labelIds:[]})},Re=()=>{if(s.length===0)return"s-01";const $=s.map(jt=>{const Wt=jt.code?.match(/^s-(\d+)$/);return Wt?parseInt(Wt[1],10):null}).filter(jt=>jt!==null);return $.length===0?"s-01":`s-${(Math.max(...$)+1).toString().padStart(2,"0")}`},Vt=()=>{Ne(),W($=>({...$,code:Re()})),ee(!0)};return v&&s.length===0?t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ie,{className:"h-8 w-32"}),t.jsx(Ie,{className:"h-12 w-full rounded-xl"}),t.jsx("div",{className:"space-y-3",children:[1,2,3].map($=>t.jsx(Ie,{className:"h-24 rounded-xl"},$))})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl shadow-lg",children:t.jsx(cr,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:""}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  "})]})]}),t.jsxs("button",{onClick:Vt,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg shadow-blue-500/25",children:[t.jsx(Ze,{className:"w-5 h-5"}),t.jsx("span",{children:" "})]})]}),t.jsx(dl,{value:T,onChange:O,placeholder:"  , , ,   ..."}),t.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("select",{value:P.year,onChange:$=>Y({...P,year:parseInt($.target.value)}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:a0.map($=>t.jsx("option",{value:$,children:$},$))}),t.jsx("select",{value:P.quarter,onChange:$=>Y({...P,quarter:parseInt($.target.value)}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:r0.map($=>t.jsx("option",{value:$.value,children:$.label},$.value))}),t.jsxs("select",{value:P.objectiveId,onChange:$=>Y({...P,objectiveId:$.target.value}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),o.map($=>t.jsxs("option",{value:$.id,children:[$.code," - ",$.name]},$.id))]}),t.jsxs("select",{value:P.orphanFilter,onChange:$=>Y({...P,orphanFilter:$.target.value}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"no-objective",children:"  "}),t.jsx("option",{value:"no-stories",children:"   "})]}),t.jsx("div",{className:"min-w-64",children:t.jsx(Oa,{options:w,value:L,onChange:z,placeholder:"  "})}),t.jsxs("select",{value:`${E}:${C}`,onChange:$=>{const[Te,pt]=$.target.value.split(":");V(Te),k(pt)},className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"createdAt:desc",children:"  "}),t.jsx("option",{value:"createdAt:asc",children:"  "}),t.jsx("option",{value:"updatedAt:desc",children:" "}),t.jsx("option",{value:"name:asc",children:"   "}),t.jsx("option",{value:"name:desc",children:"   "}),t.jsx("option",{value:"code:asc",children:"   "}),t.jsx("option",{value:"code:desc",children:"   "})]}),t.jsxs("span",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mr-auto",children:[je.length," "]})]}),s.length===0?t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:["  -",P.year," Q",P.quarter]}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"     "}),t.jsx("button",{onClick:Vt,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:" "})]}):je.length===0?t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"    "})]}):t.jsx("div",{className:"space-y-3",children:je.map($=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-all",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"hidden sm:flex p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:t.jsx(cr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[t.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-medium rounded-lg",children:$.code}),$.isCarriedOver&&t.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs font-medium rounded-lg flex items-center gap-1",children:[t.jsx("span",{children:""}),"  -Q",$.carriedFromQuarter]}),t.jsx(ul,{createdAt:$.createdAt,updatedAt:$.updatedAt,children:t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:$.name})})]}),$.description&&t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-1",children:$.description}),t.jsx(Ro,{labels:$.labels})]}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[t.jsx("button",{onClick:()=>ue($),title:"  ",className:"p-2 text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-lg transition-colors",children:t.jsx(P0,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>F($),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:t.jsx(ur,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>R($.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:t.jsx(Tt,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex items-center gap-4 mt-3 flex-wrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ps,{progress:$.effectiveProgress||0,size:"sm"}),t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[$.totalStories||0,"  "]})]}),$.objective&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Xr,{className:"w-3.5 h-3.5 text-purple-500"}),t.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:$.objective.code})]}),$.owner&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(Ta,{className:"w-3.5 h-3.5 text-gray-400"}),t.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:$.owner.name})]}),$.completedStories>0&&t.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400",children:[" ",$.completedStories," "]}),$.blockedStories>0&&t.jsxs("span",{className:"text-xs text-red-600 dark:text-red-400",children:[" ",$.blockedStories," "]})]}),t.jsx(Y0,{title:"  ",items:fe($.id),availableItems:b,parentId:$.id,linkField:"rockId",onLink:me,onUnlink:pe,basePath:xe,itemPath:"stories",emptyMessage:"     ",showCode:!0,showProgress:!0})]})]})},$.id))}),B&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:Q?" ":" "}),t.jsxs("form",{onSubmit:we,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:ce.code,onChange:$=>W({...ce,code:$.target.value}),placeholder:"s-01",className:"flex-1 px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0}),t.jsx("button",{type:"button",onClick:()=>W($=>({...$,code:Re()})),className:"px-3 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-colors",children:" "})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:": -- (  )"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:ce.name,onChange:$=>W({...ce,name:$.target.value}),placeholder:" ",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("textarea",{value:ce.description,onChange:$=>W({...ce,description:$.target.value}),placeholder:" ...",rows:2,className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white resize-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("select",{value:ce.year,onChange:$=>W({...ce,year:parseInt($.target.value)}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:a0.map($=>t.jsx("option",{value:$,children:$},$))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("select",{value:ce.quarter,onChange:$=>W({...ce,quarter:parseInt($.target.value)}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:r0.map($=>t.jsx("option",{value:$.value,children:$.label},$.value))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),t.jsx(Po,{value:ce.progress,onChange:$=>W({...ce,progress:$})}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"   ,   "})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:ce.ownerId,onChange:$=>W({...ce,ownerId:$.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:""}),h.map($=>t.jsx("option",{value:$.id,children:$.name},$.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:ce.objectiveId,onChange:$=>W({...ce,objectiveId:$.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:""}),o.map($=>t.jsxs("option",{value:$.id,children:[$.code," - ",$.name]},$.id))]})]}),Se&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:ce.teamId,onChange:$=>W({...ce,teamId:$.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:" "}),m.map($=>t.jsx("option",{value:$.id,children:$.name},$.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx(Oa,{options:w,value:ce.labelIds,onChange:$=>W({...ce,labelIds:$}),placeholder:" ..."})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{ee(!1),Ne()},className:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:""}),t.jsx("button",{type:"submit",disabled:v,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50",children:v?"...":Q?"":""})]})]})]})})]})}const s0=[{value:1,label:"Q1"},{value:2,label:"Q2"},{value:3,label:"Q3"},{value:4,label:"Q4"}],n0=[2024,2025,2026,2027],l0=[1,2,3,4,5,6];function zp(){const[s,l]=g.useState([]),[o,c]=g.useState([]),[h,x]=g.useState([]),[m,f]=g.useState({year:new Date().getFullYear(),quarter:Math.ceil((new Date().getMonth()+1)/3)}),[w,M]=g.useState(!1),[b,j]=g.useState(null),[T,O]=g.useState({year:new Date().getFullYear(),quarter:Math.ceil((new Date().getMonth()+1)/3),sprintNumber:1,goal:"",startDate:"",endDate:"",rockIds:[],teamId:""}),{loading:L,request:z}=tr(),{currentOrganization:E}=mt(),{isAdmin:V}=zt();g.useEffect(()=>{E&&(C(),k(),V&&P())},[m.year,m.quarter,E?.id]);const C=async()=>{let v="/api/sprints";const A=new URLSearchParams;m.year&&A.append("year",m.year),m.quarter&&A.append("quarter",m.quarter),A.toString()&&(v+=`?${A.toString()}`);const te=await z(v,{showToast:!1});te&&Array.isArray(te)&&l(te)},k=async()=>{const v=await z(`/api/rocks?year=${m.year}&quarter=${m.quarter}`,{showToast:!1});v&&Array.isArray(v)&&c(v)},P=async()=>{const v=await z("/api/teams",{showToast:!1});v&&Array.isArray(v)&&x(v)},Y=async v=>{v.preventDefault();const A=b?`/api/sprints/${b.id}`:"/api/sprints";await z(A,{method:b?"PUT":"POST",body:T,successMessage:b?"  ":"  "})&&(M(!1),Q(),C())},B=v=>{j(v),O({year:v.year,quarter:v.quarter,sprintNumber:v.sprintNumber,goal:v.goal||"",startDate:v.startDate?.slice(0,10)||"",endDate:v.endDate?.slice(0,10)||"",rockIds:v.rocks?.map(A=>A.id)||[],teamId:v.teamId||v.team?.id||""}),M(!0)},ee=async v=>{if(!confirm("   ?"))return;await z(`/api/sprints/${v}`,{method:"DELETE",successMessage:"  "})&&C()},Q=()=>{j(null);const v=s.filter(te=>te.year===m.year&&te.quarter===m.quarter).map(te=>te.sprintNumber),A=l0.find(te=>!v.includes(te))||1;O({year:m.year,quarter:m.quarter,sprintNumber:A,goal:"",startDate:"",endDate:"",rockIds:[],teamId:""})},ie=()=>{Q(),M(!0)},ce=v=>{O(A=>({...A,rockIds:A.rockIds.includes(v)?A.rockIds.filter(te=>te!==v):[...A.rockIds,v]}))},W=`${T.year}-Q${T.quarter}-S${T.sprintNumber}`;return L&&s.length===0?t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ie,{className:"h-8 w-32"}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2,3,4].map(v=>t.jsx(Ie,{className:"h-48 rounded-xl"},v))})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:""}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:'   (" )'})]}),t.jsxs("button",{onClick:ie,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg shadow-green-500/25",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("span",{children:" "})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsx("select",{value:m.year,onChange:v=>f({...m,year:parseInt(v.target.value)}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-sm",children:n0.map(v=>t.jsx("option",{value:v,children:v},v))}),t.jsx("select",{value:m.quarter,onChange:v=>f({...m,quarter:parseInt(v.target.value)}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-sm",children:s0.map(v=>t.jsx("option",{value:v.value,children:v.label},v.value))}),t.jsxs("span",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mr-auto",children:[s.length," "]})]}),s.length===0?t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:["  -",m.year," Q",m.quarter]}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"     "}),t.jsx("button",{onClick:ie,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:" "})]}):t.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map(v=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-5 hover:shadow-lg transition-all",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:v.name}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(v.startDate).toLocaleDateString("he-IL")," - ",new Date(v.endDate).toLocaleDateString("he-IL")]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>B(v),className:"p-1.5 text-gray-400 hover:text-green-600 dark:hover:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),t.jsx("button",{onClick:()=>ee(v.id),className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),v.goal&&t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:[" ",v.goal]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:""}),t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[v.completedStories||0,"/",v.totalStories||0,"  "]})]}),t.jsx(Ps,{progress:v.progress||0,size:"md",showLabel:!0})]}),v.rocks&&Array.isArray(v.rocks)&&v.rocks.length>0&&t.jsxs("div",{className:"pt-3 border-t border-gray-100 dark:border-gray-700",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:" :"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:v.rocks.map(A=>t.jsx("span",{className:"text-xs px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded-lg",children:A.code},A.id))})]}),v.blockedStories>0&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700",children:t.jsxs("span",{className:"text-xs text-red-600 dark:text-red-400",children:[" ",v.blockedStories,"   "]})})]},v.id))}),w&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:b?" ":" "}),t.jsxs("div",{className:"mb-6 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[t.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" :"}),t.jsx("span",{className:"block text-lg font-semibold text-green-700 dark:text-green-300",children:W}),t.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"(  ,   )"})]}),t.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("select",{value:T.year,onChange:v=>O({...T,year:parseInt(v.target.value)}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-sm",children:n0.map(v=>t.jsx("option",{value:v,children:v},v))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("select",{value:T.quarter,onChange:v=>O({...T,quarter:parseInt(v.target.value)}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-sm",children:s0.map(v=>t.jsx("option",{value:v.value,children:v.label},v.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("select",{value:T.sprintNumber,onChange:v=>O({...T,sprintNumber:parseInt(v.target.value)}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-sm",children:l0.map(v=>t.jsxs("option",{value:v,children:["S",v]},v))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",value:T.startDate,onChange:v=>O({...T,startDate:v.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",value:T.endDate,onChange:v=>O({...T,endDate:v.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsx("textarea",{value:T.goal,onChange:v=>O({...T,goal:v.target.value}),placeholder:"     ?",rows:2,className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white resize-none"})]}),V&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:T.teamId,onChange:v=>O({...T,teamId:v.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:" "}),h.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]})]}),o.length>0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),t.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:o.map(v=>t.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-2 hover:bg-white dark:hover:bg-gray-700 rounded-lg transition-colors",children:[t.jsx("input",{type:"checkbox",checked:T.rockIds.includes(v.id),onChange:()=>ce(v.id),className:"w-4 h-4 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-1.5 py-0.5 rounded",children:v.code}),t.jsx("span",{className:"mr-2 text-sm text-gray-700 dark:text-gray-300 truncate",children:v.name})]})]},v.id))})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{M(!1),Q()},className:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:""}),t.jsx("button",{type:"submit",disabled:L,className:"flex-1 px-4 py-2.5 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors disabled:opacity-50",children:L?"...":b?"":""})]})]})]})})]})}const Pp=[{id:"todo",title:"",color:"gray",gradient:"from-gray-400 to-gray-500",filter:s=>s.progress===0&&!s.isBlocked},{id:"inProgress",title:"",color:"blue",gradient:"from-blue-400 to-blue-600",filter:s=>s.progress>0&&s.progress<100&&!s.isBlocked},{id:"blocked",title:"",color:"red",gradient:"from-red-400 to-red-600",filter:s=>s.isBlocked},{id:"done",title:"",color:"green",gradient:"from-green-400 to-green-600",filter:s=>s.progress===100}];function Rp(){const{id:s}=Mo(),[l,o]=g.useState(null),[c,h]=g.useState(!0),[x,m]=g.useState([]),[f,w]=g.useState([]),[M,b]=g.useState(!1),[j,T]=g.useState(null),[O,L]=g.useState(null),z=ol(),{currentOrganization:E}=mt(),[V,C]=g.useState({title:"",description:"",progress:0,isBlocked:!1,rockId:"",ownerId:""});g.useEffect(()=>{if(!E?.id)return;const v=E.id;Promise.all([Ae(`/api/sprints/${s}`,{organizationId:v}).then(A=>A.json()),Ae("/api/rocks",{organizationId:v}).then(A=>A.json()),Ae("/api/team",{organizationId:v}).then(A=>A.json())]).then(([A,te,xe])=>{o(A),m(Array.isArray(te)?te:[]),w(Array.isArray(xe)?xe:[])}).finally(()=>h(!1))},[s,E?.id]);const k=async(v,A,te=!1)=>{const xe=await Ae(`/api/stories/${v}/progress`,{method:"PUT",body:JSON.stringify({progress:A,isBlocked:te})});if(xe.ok){const Se=await xe.json(),je=Array.isArray(l?.stories)?l.stories:[];o({...l,stories:je.map(G=>G.id===v?Se:G)}),z.success(" ")}else z.error(" ")},P=async(v,A)=>{let te=0,xe=!1;switch(A){case"todo":te=0,xe=!1;break;case"inProgress":te=50,xe=!1;break;case"blocked":xe=!0;break;case"done":te=100,xe=!1;break}await k(v,te,xe)},Y=(v,A)=>{T(A),v.dataTransfer.effectAllowed="move",setTimeout(()=>{v.target.classList.add("opacity-50")},0)},B=v=>{T(null),L(null),v.target.classList.remove("opacity-50")},ee=(v,A)=>{v.preventDefault(),v.dataTransfer.dropEffect="move",L(A)},Q=()=>{L(null)},ie=(v,A)=>{v.preventDefault(),L(null),j&&P(j.id,A)},ce=async v=>{if(v.preventDefault(),!V.ownerId){z.error("   ");return}const A=await Ae("/api/stories",{method:"POST",body:JSON.stringify({...V,sprintId:s})});if(A.ok){const te=await A.json();o({...l,stories:[...l.stories,te]}),b(!1),C({title:"",description:"",progress:0,isBlocked:!1,rockId:"",ownerId:""}),z.success("   !")}else{const te=await A.json();z.error(te.error||"   ")}};if(c)return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"}),t.jsxs("div",{children:[t.jsx("div",{className:"h-8 w-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-2"}),t.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]}),t.jsx(fp,{})]});if(!l)return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"  "}),t.jsx(It,{to:"/sprints",className:"text-blue-600 hover:text-blue-700 mt-2 inline-block",children:"  "})]});const W=v=>{const A=l?.stories||[];return Array.isArray(A)?A.filter(v.filter):[]};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(It,{to:"/sprints",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all",children:t.jsx(Ao,{size:20})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:l.name}),l.goal&&t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:l.goal})]})]}),t.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-orange-600 to-amber-600 text-white rounded-xl hover:shadow-lg hover:shadow-orange-500/25 transition-all transform hover:-translate-y-0.5",children:[t.jsx(Ze,{size:20}),t.jsx("span",{className:"font-medium",children:"  "})]})]}),M&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg animate-scale-in",children:[t.jsxs("div",{className:"p-6 border-b dark:border-gray-700 flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-bold dark:text-white",children:"  "}),t.jsx("button",{onClick:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.jsx(Bt,{size:20})})]}),t.jsxs("form",{onSubmit:ce,className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:V.title,onChange:v=>C({...V,title:v.target.value}),className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white transition-all",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("textarea",{value:V.description,onChange:v=>C({...V,description:v.target.value}),rows:2,className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white transition-all resize-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:V.ownerId,onChange:v=>C({...V,ownerId:v.target.value}),className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white transition-all",required:!0,children:[t.jsx("option",{value:"",children:" "}),f.map(v=>t.jsx("option",{value:v.id,children:v.name},v.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" ()"}),t.jsxs("select",{value:V.rockId,onChange:v=>C({...V,rockId:v.target.value}),className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white transition-all",children:[t.jsx("option",{value:"",children:"  "}),x.map(v=>t.jsxs("option",{value:v.id,children:[v.code," - ",v.name]},v.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),t.jsx(Po,{value:V.progress,onChange:v=>C({...V,progress:v})})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-orange-600 to-amber-600 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:"  "}),t.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2.5 border dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all dark:text-white",children:""})]})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Pp.map(v=>t.jsxs("div",{className:`
              bg-gray-100 dark:bg-gray-800/50 rounded-2xl p-4 transition-all duration-200
              ${O===v.id?"ring-2 ring-orange-500 ring-offset-2 dark:ring-offset-gray-900":""}
            `,onDragOver:A=>ee(A,v.id),onDragLeave:Q,onDrop:A=>ie(A,v.id),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${v.gradient}`}),t.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-200",children:v.title})]}),t.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-700 px-2 py-0.5 rounded-lg",children:W(v).length})]}),t.jsx("div",{className:"space-y-3 min-h-[200px]",children:W(v).map(A=>t.jsx(Dp,{story:A,onDragStart:Y,onDragEnd:B,onProgressChange:k},A.id))})]},v.id))})]})}function Dp({story:s,onDragStart:l,onDragEnd:o,onProgressChange:c}){const[h,x]=g.useState(!1),[m,f]=g.useState(s.progress),w=()=>{m!==s.progress&&c(s.id,m),x(!1)};return t.jsxs("div",{draggable:!0,onDragStart:M=>l(M,s),onDragEnd:o,className:`bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm hover:shadow-md transition-all cursor-grab active:cursor-grabbing group ${s.isBlocked?"border-2 border-red-400 dark:border-red-500":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("h4",{className:`font-medium text-sm flex-1 ${s.isBlocked?"text-red-700 dark:text-red-300":"text-gray-900 dark:text-white"}`,children:s.title}),t.jsx(Jm,{size:16,className:"text-gray-300 dark:text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"})]}),s.description&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3 line-clamp-2",children:s.description}),t.jsx("div",{className:"mb-3",children:h?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",min:"0",max:"100",value:m,onChange:M=>f(Math.min(100,Math.max(0,parseInt(M.target.value)||0))),onBlur:w,onKeyDown:M=>M.key==="Enter"&&w(),className:"w-16 px-2 py-1 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-600 dark:text-white text-center",autoFocus:!0}),t.jsx("span",{className:"text-xs text-gray-400",children:"%"})]}):t.jsx("div",{onClick:()=>x(!0),className:"cursor-pointer hover:opacity-80 transition-opacity",children:t.jsx(K0,{progress:s.progress||0,isBlocked:s.isBlocked})})}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.isBlocked&&t.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg",children:" "}),s.rock&&t.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg",children:s.rock.code})]}),s.owner&&t.jsx("div",{className:"flex items-center gap-1",children:t.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-orange-500 to-amber-500 flex items-center justify-center",children:t.jsx("span",{className:"text-[10px] text-white font-bold",children:s.owner.name?.charAt(0)})})})]})]})}function Sa({options:s=[],value:l,onChange:o,placeholder:c="...",searchPlaceholder:h="...",emptyMessage:x="  ",getLabel:m=T=>T.label||T.name||T,getValue:f=T=>T.value||T.id||T,getSearchText:w=T=>`${m(T)}`,disabled:M=!1,allowClear:b=!0,className:j=""}){const[T,O]=g.useState(!1),[L,z]=g.useState(""),E=g.useRef(null),V=g.useRef(null),C=s.find(B=>f(B)===l),k=s.filter(B=>L?w(B).toLowerCase().includes(L.toLowerCase()):!0);g.useEffect(()=>{const B=ee=>{E.current&&!E.current.contains(ee.target)&&(O(!1),z(""))};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]),g.useEffect(()=>{T&&V.current&&V.current.focus()},[T]);const P=B=>{o(f(B)),O(!1),z("")},Y=B=>{B.stopPropagation(),o(""),z("")};return t.jsxs("div",{ref:E,className:`relative ${j}`,children:[t.jsxs("button",{type:"button",onClick:()=>!M&&O(!T),disabled:M,className:`w-full flex items-center justify-between px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 text-right transition-colors ${M?"bg-gray-100 dark:bg-gray-800 cursor-not-allowed":"bg-white dark:bg-gray-700 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[t.jsx("span",{className:C?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500",children:C?m(C):c}),t.jsxs("div",{className:"flex items-center gap-1",children:[b&&C&&!M&&t.jsx("button",{type:"button",onClick:Y,className:"p-0.5 hover:bg-gray-100 dark:hover:bg-gray-600 rounded transition-colors",children:t.jsx(Bt,{className:"w-4 h-4 text-gray-400"})}),t.jsx(Da,{className:`w-4 h-4 text-gray-400 transition-transform ${T?"rotate-180":""}`})]})]}),T&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-100 dark:border-gray-700",children:t.jsxs("div",{className:"relative",children:[t.jsx(il,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{ref:V,type:"text",value:L,onChange:B=>z(B.target.value),placeholder:h,className:"w-full pr-9 pl-3 py-2 bg-gray-50 dark:bg-gray-700 border-0 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm dark:text-white"})]})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:k.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400 text-sm",children:x}):k.map((B,ee)=>{const Q=f(B),ie=Q===l;return t.jsxs("button",{type:"button",onClick:()=>P(B),className:`w-full flex items-center gap-2 px-3 py-2.5 text-right transition-colors ${ie?"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300":"hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:[t.jsx("div",{className:`w-4 h-4 flex-shrink-0 ${ie?"text-orange-600":"text-transparent"}`,children:t.jsx(Os,{className:"w-4 h-4"})}),t.jsx("span",{className:"flex-1 text-sm",children:m(B)})]},Q||ee)})})]})]})}function Lp(){const[s,l]=g.useState([]),[o,c]=g.useState([]),[h,x]=g.useState([]),[m,f]=g.useState([]),[w,M]=g.useState([]),[b,j]=g.useState([]),[T,O]=g.useState([]),[L,z]=g.useState({}),[E,V]=g.useState(""),[C,k]=g.useState([]),[P,Y]=g.useState("createdAt"),[B,ee]=g.useState("desc"),[Q,ie]=g.useState({sprintId:"",rockId:"",isBlocked:"",orphanFilter:""}),[ce,W]=g.useState(!1),[v,A]=g.useState(null),[te,xe]=g.useState(!1),[Se,je]=g.useState(null),[G,ne]=g.useState({code:"",title:"",description:"",status:"TODO",ownerId:"",dueDate:""}),[D,p]=g.useState({code:"",title:"",description:"",progress:0,isBlocked:!1,sprintId:"",rockId:"",ownerId:"",teamId:"",labelIds:[]}),{loading:H,request:ae}=tr(),{currentOrganization:me}=mt(),{isAdmin:pe}=zt(),fe=cl(s,["title","description","owner.name","sprint.name","rock.code","rock.name"],E);g.useEffect(()=>{me&&(R(),ue(),Ne(),Re(),Vt(),pe&&we(),F())},[Q,me?.id,P,B,C.join(",")]);const we=async()=>{const S=await ae("/api/teams",{showToast:!1});S&&Array.isArray(S)&&M(S)},F=async()=>{const S=await ae("/api/labels",{showToast:!1});S&&Array.isArray(S)&&j(S)},R=async()=>{let S="/api/stories";const be=new URLSearchParams;Q.sprintId&&be.append("sprintId",Q.sprintId),Q.rockId&&be.append("rockId",Q.rockId),Q.isBlocked&&be.append("isBlocked",Q.isBlocked),Q.orphanFilter&&be.append("orphanFilter",Q.orphanFilter),C.length>0&&be.append("labelIds",C.join(",")),be.append("labelMode","or"),P&&be.append("sortBy",P),B&&be.append("sortOrder",B),be.append("limit","30"),be.toString()&&(S+=`?${be.toString()}`);const ze=await ae(S,{showToast:!1});ze&&(Array.isArray(ze)?l(ze):ze.data&&Array.isArray(ze.data)&&l(ze.data))},ue=async()=>{const S=await ae("/api/sprints",{showToast:!1});S&&Array.isArray(S)&&c(S)},Ne=async()=>{const S=await ae("/api/rocks",{showToast:!1});S&&Array.isArray(S)&&x(S)},Re=async()=>{const S=await ae("/api/team",{showToast:!1});S&&Array.isArray(S)&&f(S)},Vt=async()=>{const S=await ae("/api/tasks",{showToast:!1});S&&Array.isArray(S)&&O(S)},$=S=>T.filter(be=>be.storyId===S),Te=S=>{z(be=>({...be,[S]:!be[S]}))},pt=S=>{switch(S){case"DONE":return t.jsx(As,{className:"w-4 h-4 text-green-500"});case"IN_PROGRESS":return t.jsx(tl,{className:"w-4 h-4 text-blue-500"});default:return t.jsx(Oo,{className:"w-4 h-4 text-gray-400"})}},jt=()=>{if(T.length===0)return"m-01";const S=T.map(ze=>{const De=ze.code?.match(/^m-(\d+)$/);return De?parseInt(De[1],10):null}).filter(ze=>ze!==null);return S.length===0?"m-01":`m-${(Math.max(...S)+1).toString().padStart(2,"0")}`},Wt=S=>{je(S);const ze=s.find(De=>De.id===S)?.ownerId||(m.length>0?m[0].id:"");ne({code:jt(),title:"",description:"",status:"TODO",ownerId:ze,dueDate:""}),xe(!0)},La=async S=>{if(S.preventDefault(),!G.title.trim()){alert("    ");return}if(!G.ownerId){alert("   ");return}await ae("/api/tasks",{method:"POST",body:{...G,storyId:Se,isStandalone:!1},successMessage:"  "})&&(xe(!1),je(null),Vt(),z(ze=>({...ze,[Se]:!0})))},Dr=async S=>{const be=["TODO","IN_PROGRESS","DONE"],ze=be.indexOf(S.status),De=be[(ze+1)%be.length];await ae(`/api/tasks/${S.id}/status`,{method:"PATCH",body:{status:De},showToast:!1})&&O(T.map(ea=>ea.id===S.id?{...ea,status:De}:ea))},xr=async S=>{if(S.preventDefault(),!D.sprintId){alert("   ");return}const be=v?`/api/stories/${v.id}`:"/api/stories",De=await ae(be,{method:v?"PUT":"POST",body:D,successMessage:v?"   ":"   "});if(De){const gr=v?.id||De.id;gr&&await ae(`/api/stories/${gr}/labels`,{method:"POST",body:{labelIds:D.labelIds||[]},showToast:!1}),W(!1),Jr(),R()}},_a=S=>{A(S),p({code:S.code||"",title:S.title,description:S.description||"",progress:S.progress||0,isBlocked:S.isBlocked||!1,sprintId:S.sprintId||S.sprint?.id||"",rockId:S.rockId||S.rock?.id||"",ownerId:S.ownerId||S.owner?.id||"",teamId:S.teamId||S.team?.id||"",labelIds:Array.isArray(S.labels)?S.labels.map(be=>be.id):[]}),W(!0)},Rs=async S=>{if(!confirm("    ?"))return;await ae(`/api/stories/${S}`,{method:"DELETE",successMessage:"   "})&&R()},Ds=async S=>{const be=[...s];l(s.map(De=>De.id===S.id?{...De,isBlocked:!De.isBlocked}:De)),await ae(`/api/stories/${S.id}/block`,{method:"PUT",successMessage:S.isBlocked?"  ":"   "})||l(be)},Ls=()=>{if(s.length===0)return"ed-01";const S=s.map(De=>{const gr=De.code?.match(/^ed-(\d+)$/);return gr?parseInt(gr[1],10):null}).filter(De=>De!==null);return S.length===0?"ed-01":`ed-${(Math.max(...S)+1).toString().padStart(2,"0")}`},Jr=()=>{A(null);const S=m.length>0?m[0].id:"";p({code:"",title:"",description:"",progress:0,isBlocked:!1,sprintId:Q.sprintId||"",rockId:Q.rockId||"",ownerId:S,teamId:"",labelIds:[]})},Zr=()=>{Jr(),p(S=>({...S,code:Ls()})),W(!0)};return H&&s.length===0?t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ie,{className:"h-8 w-32"}),t.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(S=>t.jsx(Ie,{className:"h-24 rounded-xl"},S))})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl shadow-lg",children:t.jsx(Ss,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:" "}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]})]}),t.jsxs("button",{onClick:Zr,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-orange-600 to-amber-600 text-white rounded-xl hover:from-orange-700 hover:to-amber-700 transition-all shadow-lg shadow-orange-500/25",children:[t.jsx(Ze,{className:"w-5 h-5"}),t.jsx("span",{children:"  "})]})]}),t.jsx(dl,{value:E,onChange:V,placeholder:"  , , ,   ..."}),t.jsxs("div",{className:"flex flex-wrap gap-3 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsxs("select",{value:Q.sprintId,onChange:S=>ie({...Q,sprintId:S.target.value}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),o.map(S=>t.jsx("option",{value:S.id,children:S.name},S.id))]}),t.jsxs("select",{value:Q.rockId,onChange:S=>ie({...Q,rockId:S.target.value}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),h.map(S=>t.jsxs("option",{value:S.id,children:[S.code," - ",S.name]},S.id))]}),t.jsxs("select",{value:Q.isBlocked,onChange:S=>ie({...Q,isBlocked:S.target.value}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"true",children:" "}),t.jsx("option",{value:"false",children:" "})]}),t.jsxs("select",{value:Q.orphanFilter,onChange:S=>ie({...Q,orphanFilter:S.target.value}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-amber-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"no-rock",children:"  "}),t.jsx("option",{value:"backlog",children:"  ( )"})]}),t.jsx("div",{className:"min-w-64",children:t.jsx(Oa,{options:b,value:C,onChange:k,placeholder:"  "})}),t.jsxs("select",{value:`${P}:${B}`,onChange:S=>{const[be,ze]=S.target.value.split(":");Y(be),ee(ze)},className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"createdAt:desc",children:"  "}),t.jsx("option",{value:"createdAt:asc",children:"  "}),t.jsx("option",{value:"updatedAt:desc",children:" "}),t.jsx("option",{value:"title:asc",children:"   "}),t.jsx("option",{value:"title:desc",children:"   "})]}),t.jsxs("span",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mr-auto",children:[fe.length,"  "]})]}),s.length===0?t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"     "}),t.jsx("button",{onClick:Zr,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"  "})]}):fe.length===0?t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"    "})]}):t.jsx("div",{className:"space-y-3",children:fe.map(S=>t.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl border ${S.isBlocked?"border-red-300 dark:border-red-700 bg-red-50/50 dark:bg-red-900/10":"border-gray-200 dark:border-gray-700"} p-4 hover:shadow-md transition-all`,children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[t.jsx(ul,{createdAt:S.createdAt,updatedAt:S.updatedAt,children:t.jsx("h3",{className:`font-medium ${S.isBlocked?"text-red-800 dark:text-red-300":"text-gray-900 dark:text-white"}`,children:S.title})}),S.isBlocked&&t.jsxs("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs font-medium rounded-full flex items-center gap-1",children:[t.jsx("span",{children:""})," "]})]}),S.description&&t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate mb-2",children:S.description}),t.jsx(Ro,{labels:S.labels}),t.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[S.sprint&&t.jsxs("span",{className:"px-2 py-1 bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-lg",children:[" ",S.sprint.name]}),S.rock&&t.jsxs("span",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 rounded-lg",children:[" ",S.rock.code,S.rock.objective&&t.jsxs("span",{className:"mr-1 opacity-75",children:["(",S.rock.objective.code,")"]})]}),S.owner&&t.jsxs("span",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[t.jsx("div",{className:"w-5 h-5 bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-full flex items-center justify-center text-[10px] font-medium",children:S.owner.name?.charAt(0)}),S.owner.name]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(K0,{progress:S.progress||0,isBlocked:S.isBlocked}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>Ds(S),title:S.isBlocked?" ":" ",className:`p-1.5 rounded-lg transition-colors ${S.isBlocked?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30":"text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),t.jsx("button",{onClick:()=>_a(S),className:"p-1.5 text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg transition-colors",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),t.jsx("button",{onClick:()=>Rs(S.id),className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),t.jsxs("button",{onClick:()=>Te(S.id),className:`p-1.5 rounded-lg transition-colors flex items-center gap-1 ${$(S.id).length>0?"text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/20 hover:bg-emerald-100 dark:hover:bg-emerald-900/30":"text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20"}`,title:$(S.id).length>0?"/ ":" ",children:[t.jsx(Aa,{className:"w-4 h-4"}),$(S.id).length>0&&t.jsx("span",{className:"text-xs",children:$(S.id).length}),L[S.id]?t.jsx(el,{className:"w-3 h-3"}):t.jsx(Da,{className:"w-3 h-3"})]})]})]})]}),L[S.id]&&t.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 mt-3 pt-3",children:t.jsxs("div",{className:"space-y-2",children:[$(S.id).map(be=>t.jsx("div",{className:"px-3 py-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg text-sm",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>Dr(be),className:"hover:scale-110 transition-transform cursor-pointer",title:`: ${be.status==="TODO"?"":be.status==="IN_PROGRESS"?"":""} -  `,children:pt(be.status)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("span",{className:be.status==="DONE"?"line-through text-gray-400":"text-gray-700 dark:text-gray-300",children:[be.code&&t.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 ml-1 font-mono text-xs",children:be.code}),be.title]}),be.description&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:be.description})]}),be.owner&&t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:be.owner.name})]})},be.id)),t.jsxs("button",{onClick:()=>Wt(S.id),className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-lg transition-colors border border-dashed border-emerald-300 dark:border-emerald-600",children:[t.jsx(Ze,{className:"w-4 h-4"}),t.jsx("span",{children:" "})]})]})})]},S.id))}),ce&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:v?"  ":"  "}),t.jsxs("form",{onSubmit:xr,className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"w-24",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{type:"text",value:D.code,onChange:S=>p({...D,code:S.target.value}),placeholder:"ed-01",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.title,onChange:S=>p({...D,title:S.target.value}),placeholder:"  ",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("textarea",{value:D.description,onChange:S=>p({...D,description:S.target.value}),placeholder:"  ...",rows:2,className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white resize-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(Sa,{options:o,value:D.sprintId,onChange:S=>p({...D,sprintId:S}),placeholder:" ",searchPlaceholder:" ...",emptyMessage:"  ",getLabel:S=>S.name,getValue:S=>S.id,getSearchText:S=>S.name,allowClear:!1})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx(Sa,{options:m,value:D.ownerId,onChange:S=>p({...D,ownerId:S}),placeholder:" ",searchPlaceholder:"  ...",emptyMessage:"   ",getLabel:S=>S.name,getValue:S=>S.id,getSearchText:S=>`${S.name} ${S.role||""}`,allowClear:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" ()"}),t.jsx(Sa,{options:h,value:D.rockId,onChange:S=>p({...D,rockId:S}),placeholder:"  ",searchPlaceholder:"     ...",emptyMessage:"  ",getLabel:S=>`${S.code} - ${S.name}`,getValue:S=>S.id,getSearchText:S=>`${S.code} ${S.name} ${S.objective?.code||""} ${S.objective?.name||""}`,allowClear:!0})]}),pe&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx(Sa,{options:w,value:D.teamId,onChange:S=>p({...D,teamId:S}),placeholder:" ",searchPlaceholder:" ...",emptyMessage:"  ",getLabel:S=>S.name,getValue:S=>S.id,getSearchText:S=>S.name,allowClear:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx(Oa,{options:b,value:D.labelIds,onChange:S=>p({...D,labelIds:S}),placeholder:" ..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:""}),t.jsx(Po,{value:D.progress,onChange:S=>p({...D,progress:S}),disabled:D.isBlocked,isBlocked:D.isBlocked})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-xl",children:[t.jsx("input",{type:"checkbox",id:"isBlocked",checked:D.isBlocked,onChange:S=>p({...D,isBlocked:S.target.checked}),className:"w-5 h-5 rounded text-red-600 focus:ring-red-500"}),t.jsxs("label",{htmlFor:"isBlocked",className:"flex-1 cursor-pointer",children:[t.jsx("span",{className:"font-medium text-red-800 dark:text-red-300",children:""}),t.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"       "})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{W(!1),Jr()},className:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:""}),t.jsx("button",{type:"submit",disabled:H,className:"flex-1 px-4 py-2.5 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-colors disabled:opacity-50",children:H?"...":v?"":""})]})]})]})}),te&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:t.jsx(Aa,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "})]}),t.jsxs("form",{onSubmit:La,className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"w-20",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{type:"text",value:G.code,onChange:S=>ne({...G,code:S.target.value}),placeholder:"m-01",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white text-sm"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:G.title,onChange:S=>ne({...G,title:S.target.value}),placeholder:"  ?",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white",required:!0,autoFocus:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("textarea",{value:G.description,onChange:S=>ne({...G,description:S.target.value}),placeholder:"   ...",rows:2,className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white resize-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx(Sa,{options:m,value:G.ownerId,onChange:S=>ne({...G,ownerId:S}),placeholder:" ",searchPlaceholder:"  ...",emptyMessage:"   ",getLabel:S=>S.name,getValue:S=>S.id,getSearchText:S=>`${S.name} ${S.role||""}`,allowClear:!1})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:G.status,onChange:S=>ne({...G,status:S.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"TODO",children:""}),t.jsx("option",{value:"IN_PROGRESS",children:""}),t.jsx("option",{value:"DONE",children:""}),t.jsx("option",{value:"BLOCKED",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsx("input",{type:"date",value:G.dueDate,onChange:S=>ne({...G,dueDate:S.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{xe(!1),je(null)},className:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:""}),t.jsx("button",{type:"submit",disabled:H,className:"flex-1 px-4 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors disabled:opacity-50",children:H?"...":" "})]})]})]})})]})}const _p={TODO:{label:"",icon:Oo,color:"text-gray-500",bg:"bg-gray-100 dark:bg-gray-700"},IN_PROGRESS:{label:"",icon:tl,color:"text-blue-500",bg:"bg-blue-100 dark:bg-blue-900/30"},DONE:{label:"",icon:As,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/30"},CANCELLED:{label:"",icon:Ts,color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/30"}},$p={0:{label:"",color:"text-gray-500"},1:{label:"",color:"text-orange-500"},2:{label:"",color:"text-red-500"}};function Fp(){const[s,l]=g.useState([]),[o,c]=g.useState([]),[h,x]=g.useState([]),[m,f]=g.useState([]),[w,M]=g.useState([]),[b,j]=g.useState(!1),[T,O]=g.useState(null),[L,z]=g.useState(""),[E,V]=g.useState([]),[C,k]=g.useState("createdAt"),[P,Y]=g.useState("desc"),[B,ee]=g.useState({status:"",ownerId:"",type:""}),[Q,ie]=g.useState({code:"",title:"",description:"",storyId:"",ownerId:"",priority:0,dueDate:"",teamId:"",labelIds:[]}),{loading:ce,request:W}=tr(),{currentOrganization:v}=mt(),{user:A}=Ra(),{isAdmin:te}=zt(),xe=cl(s,["title","description","owner.name","story.title"],L);g.useEffect(()=>{v&&(G(),ne(),D(),te&&Se(),je())},[v?.id,B,C,P,E.join(",")]);const Se=async()=>{const F=await W("/api/teams",{showToast:!1});F&&Array.isArray(F)&&f(F)},je=async()=>{const F=await W("/api/labels",{showToast:!1});F&&Array.isArray(F)&&M(F)},G=async()=>{let F="/api/tasks";const R=new URLSearchParams;B.status&&R.append("status",B.status),B.ownerId&&R.append("ownerId",B.ownerId),B.type==="standalone"&&R.append("standalone","true"),E.length>0&&R.append("labelIds",E.join(",")),R.append("labelMode","or"),C&&R.append("sortBy",C),P&&R.append("sortOrder",P),R.toString()&&(F+=`?${R.toString()}`);const ue=await W(F);ue&&Array.isArray(ue)&&l(ue)},ne=async()=>{const F=await W("/api/team",{showToast:!1});F&&Array.isArray(F)&&c(F)},D=async()=>{const F=await W("/api/stories?limit=50",{showToast:!1});F&&(Array.isArray(F)?x(F):F.data&&Array.isArray(F.data)&&x(F.data))},p=async F=>{F.preventDefault();const R=T?`/api/tasks/${T.id}`:"/api/tasks",Ne=await W(R,{method:T?"PUT":"POST",body:{...Q,storyId:Q.storyId||null,dueDate:Q.dueDate||null},successMessage:T?"  ":"  "});if(Ne){const Re=T?.id||Ne.id;Re&&await W(`/api/tasks/${Re}/labels`,{method:"POST",body:{labelIds:Q.labelIds||[]},showToast:!1}),j(!1),fe(),G()}},H=async(F,R)=>{const ue=[...s];l(s.map(Re=>Re.id===F?{...Re,status:R}:Re)),await W(`/api/tasks/${F}/status`,{method:"PATCH",body:{status:R},showToast:!1})||l(ue)},ae=F=>{O(F),ie({code:F.code||"",title:F.title,description:F.description||"",storyId:F.storyId||F.story?.id||"",ownerId:F.ownerId||F.owner?.id||"",priority:F.priority||0,dueDate:F.dueDate?F.dueDate.split("T")[0]:"",teamId:F.teamId||F.team?.id||"",labelIds:Array.isArray(F.labels)?F.labels.map(R=>R.id):[]}),j(!0)},me=async F=>{if(!confirm("   ?"))return;await W(`/api/tasks/${F}`,{method:"DELETE",successMessage:"  "})&&G()},pe=()=>{if(s.length===0)return"m-01";const F=s.map(Ne=>{const Re=Ne.code?.match(/^m-(\d+)$/);return Re?parseInt(Re[1],10):null}).filter(Ne=>Ne!==null);return F.length===0?"m-01":`m-${(Math.max(...F)+1).toString().padStart(2,"0")}`},fe=()=>{O(null),ie({code:"",title:"",description:"",storyId:"",ownerId:"",priority:0,dueDate:"",teamId:"",labelIds:[]})},we=()=>{fe();const F=o.find(R=>R.userId===A?.id);ie(R=>({...R,code:pe(),ownerId:F?.id||""})),j(!0)};return xe.filter(F=>F.status==="TODO"),xe.filter(F=>F.status==="IN_PROGRESS"),xe.filter(F=>F.status==="DONE"),xe.filter(F=>F.status==="CANCELLED"),ce&&s.length===0?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(Ie,{className:"h-8 w-32"}),t.jsx(Ie,{className:"h-10 w-32"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(F=>t.jsx(Ie,{className:"h-64 rounded-xl"},F))})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2.5 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl shadow-lg",children:t.jsx(Aa,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:""}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  -"})]})]}),t.jsxs("button",{onClick:we,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-xl hover:from-emerald-700 hover:to-teal-700 transition-all shadow-lg shadow-emerald-500/25",children:[t.jsx(Ze,{className:"w-5 h-5"}),t.jsx("span",{children:" "})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[t.jsx("div",{className:"flex-1 min-w-[200px]",children:t.jsx(dl,{value:L,onChange:z,placeholder:" ..."})}),t.jsxs("select",{value:B.status,onChange:F=>ee({...B,status:F.target.value}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"TODO",children:""}),t.jsx("option",{value:"IN_PROGRESS",children:""}),t.jsx("option",{value:"DONE",children:""})]}),t.jsxs("select",{value:B.type,onChange:F=>ee({...B,type:F.target.value}),className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"",children:" "}),t.jsx("option",{value:"standalone",children:" "})]}),t.jsx("div",{className:"min-w-64",children:t.jsx(Oa,{options:w,value:E,onChange:V,placeholder:"  "})}),t.jsxs("select",{value:`${C}:${P}`,onChange:F=>{const[R,ue]=F.target.value.split(":");k(R),Y(ue)},className:"px-3 py-2 border dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white text-sm",children:[t.jsx("option",{value:"createdAt:desc",children:"  "}),t.jsx("option",{value:"createdAt:asc",children:"  "}),t.jsx("option",{value:"updatedAt:desc",children:" "}),t.jsx("option",{value:"dueDate:asc",children:"   "}),t.jsx("option",{value:"dueDate:desc",children:"   "}),t.jsx("option",{value:"title:asc",children:"   "}),t.jsx("option",{value:"title:desc",children:"   "})]}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[xe.length," "]})]}),s.length===0?t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"  "}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"    "}),t.jsx("button",{onClick:we,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:" "})]}):t.jsx("div",{className:"space-y-3",children:xe.map(F=>{const R=_p[F.status],ue=R.icon,Ne=$p[F.priority||0];return t.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-md transition-all ${F.status==="DONE"?"opacity-60":""}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("button",{onClick:()=>H(F.id,F.status==="DONE"?"TODO":F.status==="TODO"?"IN_PROGRESS":"DONE"),className:`p-1.5 rounded-lg ${R.bg} hover:scale-110 transition-transform`,title:R.label,children:t.jsx(ue,{className:`w-5 h-5 ${R.color}`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(ul,{createdAt:F.createdAt,updatedAt:F.updatedAt,children:t.jsx("h3",{className:`font-medium text-gray-900 dark:text-white ${F.status==="DONE"?"line-through":""}`,children:F.title})}),F.description&&t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-1",children:F.description}),t.jsx(Ro,{labels:F.labels})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>ae(F),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:t.jsx(ur,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>me(F.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:t.jsx(Tt,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-2 flex-wrap text-xs",children:[F.priority>0&&t.jsxs("span",{className:`flex items-center gap-1 ${Ne.color}`,children:[t.jsx(Ca,{className:"w-3.5 h-3.5"}),Ne.label]}),F.owner&&t.jsxs("span",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[t.jsx(Ta,{className:"w-3.5 h-3.5"}),F.owner.name]}),F.dueDate&&t.jsxs("span",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[t.jsx(z0,{className:"w-3.5 h-3.5"}),new Date(F.dueDate).toLocaleDateString("he-IL")]}),F.story&&t.jsxs("span",{className:"flex items-center gap-1 text-purple-600 dark:text-purple-400",children:[t.jsx(F0,{className:"w-3.5 h-3.5"}),F.story.title]}),!F.storyId&&t.jsx("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded text-xs",children:""})]})]})]})},F.id)})}),b&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:T?" ":" "}),t.jsxs("form",{onSubmit:p,className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"w-24",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{type:"text",value:Q.code,onChange:F=>ie({...Q,code:F.target.value}),placeholder:"m-01",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:Q.title,onChange:F=>ie({...Q,title:F.target.value}),placeholder:"  ?",className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white",required:!0})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("textarea",{value:Q.description,onChange:F=>ie({...Q,description:F.target.value}),placeholder:" ...",rows:2,className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white resize-none"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:Q.ownerId,onChange:F=>ie({...Q,ownerId:F.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white",required:!0,children:[t.jsx("option",{value:"",children:" "}),o.map(F=>t.jsx("option",{value:F.id,children:F.name},F.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"  "}),t.jsxs("select",{value:Q.storyId,onChange:F=>ie({...Q,storyId:F.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:" "}),h.map(F=>t.jsxs("option",{value:F.id,children:[F.title," ",F.rock?`(${F.rock.code})`:""]},F.id))]})]}),te&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:Q.teamId,onChange:F=>ie({...Q,teamId:F.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:" "}),m.map(F=>t.jsx("option",{value:F.id,children:F.name},F.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx(Oa,{options:w,value:Q.labelIds,onChange:F=>ie({...Q,labelIds:F}),placeholder:" ..."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsxs("select",{value:Q.priority,onChange:F=>ie({...Q,priority:parseInt(F.target.value)}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:0,children:""}),t.jsx("option",{value:1,children:""}),t.jsx("option",{value:2,children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsx("input",{type:"date",value:Q.dueDate,onChange:F=>ie({...Q,dueDate:F.target.value}),className:"w-full px-3 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-emerald-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{j(!1),fe()},className:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:""}),t.jsx("button",{type:"submit",disabled:ce,className:"flex-1 px-4 py-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors disabled:opacity-50",children:ce?"...":T?"":""})]})]})]})})]})}function Up(){const[s,l]=g.useState([]),[o,c]=g.useState(!0),[h,x]=g.useState(!1),[m,f]=g.useState(null),w=ol(),{currentOrganization:M}=mt(),[b,j]=g.useState({name:"",role:"",capacity:""});g.useEffect(()=>{M?.id&&Ae("/api/team",{organizationId:M.id}).then(k=>k.json()).then(k=>{Array.isArray(k)&&l(k)}).finally(()=>c(!1))},[M?.id]);const T=async k=>{k.preventDefault();const P=m?`/api/team/${m.id}`:"/api/team",B=await Ae(P,{method:m?"PUT":"POST",organizationId:M?.id,body:JSON.stringify(b)});if(B.ok){const ee=await B.json();m?(l(Q=>Array.isArray(Q)?Q.map(ie=>ie.id===ee.id?ee:ie):[ee]),w.success("   ")):(l(Q=>Array.isArray(Q)?[...Q,ee]:[ee]),w.success("   ")),E()}else w.error("   ")},O=async k=>{const P=await Ae(`/api/team/${k.id}`,{method:"PUT",body:JSON.stringify({...k,isActive:!k.isActive})});if(P.ok){const Y=await P.json();l(B=>Array.isArray(B)?B.map(ee=>ee.id===Y.id?Y:ee):[Y]),w.success(Y.isActive?"  ":"  ")}else w.error("   ")},L=k=>{f(k),j({name:k.name,role:k.role,capacity:k.capacity||""}),x(!0)},z=async k=>{if(!confirm(`   ${k.name}?`))return;(await Ae(`/api/team/${k.id}`,{method:"DELETE"})).ok?(l(Y=>Array.isArray(Y)?Y.filter(B=>B.id!==k.id):[]),w.success("   ")):w.error("   ")},E=()=>{x(!1),f(null),j({name:"",role:"",capacity:""})};if(o)return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("div",{className:"h-8 w-24 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse mb-2"}),t.jsx("div",{className:"h-4 w-32 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(k=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ie,{className:"w-12 h-12 rounded-full"}),t.jsxs("div",{className:"flex-1",children:[t.jsx(Ie,{className:"h-4 w-24 mb-2"}),t.jsx(Ie,{className:"h-3 w-16"})]})]})},k))})]});const V=s.filter(k=>k.isActive),C=s.filter(k=>!k.isActive);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:""}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"  "})]}),t.jsxs("button",{onClick:()=>x(!0),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all w-full sm:w-auto",children:[t.jsx(Ze,{size:20}),t.jsx("span",{children:"  "})]})]}),h&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md animate-scale-in",children:[t.jsxs("div",{className:"p-4 sm:p-6 border-b dark:border-gray-700 flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-bold dark:text-white",children:m?"  ":"  "}),t.jsx("button",{onClick:E,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg",children:t.jsx(Bt,{size:20})})]}),t.jsxs("form",{onSubmit:T,className:"p-4 sm:p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{type:"text",value:b.name,onChange:k=>j({...b,name:k.target.value}),className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{type:"text",value:b.role,onChange:k=>j({...b,role:k.target.value}),placeholder:", ,  ...",className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"  ()"}),t.jsx("input",{type:"number",value:b.capacity,onChange:k=>j({...b,capacity:k.target.value}),placeholder:": 20",className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[t.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all font-medium",children:m?" ":" "}),t.jsx("button",{type:"button",onClick:E,className:"px-4 py-2.5 border dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-white",children:""})]})]})]})}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-4 sm:p-6 border border-gray-100 dark:border-gray-700",children:[t.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(kt,{size:20,className:"text-blue-600"}),"   (",V.length,")"]}),V.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(kt,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"   "}),t.jsx("button",{onClick:()=>x(!0),className:"mt-4 text-blue-600 dark:text-blue-400 hover:text-blue-700 font-medium",children:"   "})]}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map((k,P)=>t.jsx(i0,{member:k,onEdit:L,onToggleActive:O,onDelete:z,index:P},k.id))})]}),C.length>0&&t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 rounded-2xl p-4 sm:p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("h2",{className:"text-lg font-bold text-gray-500 dark:text-gray-400 mb-4",children:["    (",C.length,")"]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map((k,P)=>t.jsx(i0,{member:k,onEdit:L,onToggleActive:O,onDelete:z,inactive:!0,index:P},k.id))})]})]})}function i0({member:s,onEdit:l,onToggleActive:o,onDelete:c,inactive:h,index:x}){return t.jsxs("div",{className:`rounded-2xl p-4 border transition-all hover:shadow-md animate-slide-in-up ${h?"bg-gray-100 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,style:{animationDelay:`${x*.05}s`},children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[s.user?.picture?t.jsx("img",{src:s.user.picture,alt:s.name,className:"w-12 h-12 rounded-full ring-2 ring-white dark:ring-gray-600 shadow"}):t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shadow ${h?"bg-gray-200 dark:bg-gray-600 text-gray-500 dark:text-gray-400":"bg-gradient-to-br from-blue-500 to-purple-500 text-white"}`,children:t.jsx("span",{className:"text-lg font-bold",children:s.name.charAt(0)})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("h3",{className:`font-medium truncate ${h?"text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:s.name}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:s.role})]})]}),t.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.jsx("button",{onClick:()=>l(s),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"",children:t.jsx(ur,{size:16})}),t.jsx("button",{onClick:()=>o(s),className:`p-2 rounded-lg transition-colors ${h?"text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20":"text-gray-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20"}`,title:h?"":"",children:h?t.jsx(H0,{size:16}):t.jsx(G0,{size:16})}),t.jsx("button",{onClick:()=>c(s),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"",children:t.jsx(Tt,{size:16})})]})]}),t.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-sm",children:[s.capacity&&t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-600 rounded-lg",children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:s.capacity}),t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"/"})]}),s._count&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[t.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-400",children:s._count.ownedRocks}),t.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:""})]}),t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[t.jsx("span",{className:"font-medium text-purple-700 dark:text-purple-400",children:s._count.ownedStories}),t.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:" "})]})]})]})]})}function Bp(){const{request:s}=tr(),{isAdmin:l}=zt(),[o,c]=g.useState([]),[h,x]=g.useState([]),[m,f]=g.useState(!0),[w,M]=g.useState(!1),[b,j]=g.useState(null),[T,O]=g.useState({name:"",description:""}),[L,z]=g.useState(null),[E,V]=g.useState(""),C=l,k=async()=>{f(!0);try{const[v,A]=await Promise.all([s("/api/teams",{showToast:!1}),s("/api/teams/memberships",{showToast:!1})]);c(Array.isArray(v)?v:[]),x(Array.isArray(A)?A:[])}finally{f(!1)}};g.useEffect(()=>{C&&k()},[C]);const P=L?.id,Y=async v=>{const A=await s(`/api/teams/${v}`,{showToast:!1});A&&z(A)},B=()=>{j(null),O({name:"",description:""}),M(!0)},ee=v=>{j(v),O({name:v.name||"",description:v.description||""}),M(!0)},Q=async v=>{v.preventDefault(),T.name.trim()&&(b?await s(`/api/teams/${b.id}`,{method:"PUT",body:{name:T.name,description:T.description}})&&(await k(),P===b.id&&await Y(b.id),M(!1)):await s("/api/teams",{method:"POST",body:{name:T.name,description:T.description}})&&(await k(),M(!1)))},ie=async(v,A)=>{if(!confirm("   ?"))return;const te=await s(`/api/teams/${v}/members/${A}`,{method:"DELETE",showToast:!1});(te?.ok||te?.ok===void 0)&&await Y(v)},ce=async()=>{if(!P||!E)return;await s(`/api/teams/${P}/members`,{method:"POST",body:{membershipId:E}})&&(V(""),await Y(P))},W=g.useMemo(()=>h.map(v=>({value:v.id,label:`${v.name} (${v.email})`,description:v.role})),[h]);return C?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(kt,{className:"text-purple-600"}),""]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"    "})]}),t.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg",children:[t.jsx(Ze,{size:18})," "]})]}),m?t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:"..."}):t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 font-semibold text-gray-900 dark:text-white",children:[" (",o.length,")"]}),t.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[o.map(v=>t.jsx("button",{onClick:()=>Y(v.id),className:`w-full text-right p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${P===v.id?"bg-purple-50 dark:bg-purple-900/20":""}`,children:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white truncate",children:v.name}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:v.description||""})]}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:v._count?.members??0})]})},v.id)),o.length===0&&t.jsx("div",{className:"p-4 text-sm text-gray-500 dark:text-gray-400",children:" ."})]})]}),t.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:L?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:L.name}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:L.description||""})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:()=>ee(L),className:"px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"",children:t.jsx(ur,{size:16})})})]}),t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/30 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3 font-semibold text-gray-900 dark:text-white",children:[t.jsx(Q0,{size:18}),"  "]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsx("div",{className:"flex-1",children:t.jsx(Sa,{value:E,onChange:V,options:W,placeholder:" ..."})}),t.jsx("button",{onClick:ce,disabled:!E,className:"px-4 py-2 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 text-white disabled:opacity-50",children:""})]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:" "}),t.jsxs("div",{className:"space-y-2",children:[(L.members||[]).map(v=>t.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate",children:v.membership?.name}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[v.membership?.email,"  ",v.membership?.role]})]}),t.jsx("button",{onClick:()=>ie(L.id,v.membershipId),className:"p-2 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600",title:"",children:t.jsx(Tt,{size:16})})]},v.membershipId)),(L.members||[]).length===0&&t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  ."})]})]})]}):t.jsx("div",{className:"p-6 text-gray-600 dark:text-gray-400",children:"    ."})})]}),w&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:b?" ":" "}),t.jsx("button",{onClick:()=>M(!1),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700",children:t.jsx(Bt,{size:18})})]}),t.jsxs("form",{onSubmit:Q,className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsx("input",{value:T.name,onChange:v=>O(A=>({...A,name:v.target.value})),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("textarea",{value:T.description,onChange:v=>O(A=>({...A,description:v.target.value})),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",rows:3})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[t.jsx("button",{type:"button",onClick:()=>M(!1),className:"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-700",children:""}),t.jsx("button",{type:"submit",className:"px-4 py-2 rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white",children:""})]})]})]})})]}):t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(kt,{className:"text-purple-600"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:""})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"    ."})]})})}const Yt="";function Vp(){const s=Ot(),{isAdmin:l}=zt(),{currentOrganization:o}=mt(),[c,h]=g.useState("organizations"),[x,m]=g.useState([]),[f,w]=g.useState([]),[M,b]=g.useState([]),[j,T]=g.useState(null),[O,L]=g.useState(!0),[z,E]=g.useState(null),[V,C]=g.useState(null),[k,P]=g.useState(!1),[Y,B]=g.useState({email:"",name:"",role:"VIEWER",note:""}),[ee,Q]=g.useState(!1),[ie,ce]=g.useState(!1),[W,v]=g.useState({name:"",slug:"",logo:""}),[A,te]=g.useState(!1),[xe,Se]=g.useState(null);g.useEffect(()=>{l||s("/dashboard")},[l,s]),g.useEffect(()=>{l&&o&&(je(),G(),ne(),D())},[l,o?.id]);const je=async()=>{try{const R=await Ae(`${Yt}/api/organizations`);if(R.ok){const ue=await R.json();Array.isArray(ue)&&b(ue)}}catch(R){console.error("Error fetching organizations:",R)}},G=async()=>{try{const R=await Ae(`${Yt}/api/admin/users`);if(!R.ok)throw new Error("  ");const ue=await R.json();Array.isArray(ue)&&m(ue)}catch(R){E(R.message)}finally{L(!1)}},ne=async()=>{try{const R=await Ae(`${Yt}/api/admin/allowed-emails`);if(R.ok){const ue=await R.json();Array.isArray(ue)&&w(ue)}}catch(R){console.error("Error fetching allowed emails:",R)}},D=async()=>{try{const R=await Ae(`${Yt}/api/admin/stats`);if(R.ok){const ue=await R.json();T(ue)}}catch(R){console.error("Error fetching stats:",R)}},p=R=>R.toLowerCase().replace(/[^a-z0-9\u0590-\u05FF]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,50)||"organization",H=R=>{v({...W,name:R,slug:xe?W.slug:p(R)})},ae=async R=>{if(R.preventDefault(),!(!W.name||!W.slug)){te(!0);try{const ue=xe?`${Yt}/api/organizations/${xe.id}`:`${Yt}/api/organizations`,Ne=await Ae(ue,{method:xe?"PUT":"POST",body:JSON.stringify(W)});if(!Ne.ok){const Re=await Ne.json();throw new Error(Re.error||"  ")}v({name:"",slug:"",logo:""}),ce(!1),Se(null),je(),D()}catch(ue){alert(ue.message)}finally{te(!1)}}},me=R=>{Se(R),v({name:R.name,slug:R.slug,logo:R.logo||""}),ce(!0)},pe=async(R,ue)=>{try{const Ne=await Ae(`${Yt}/api/admin/users/${R}/role`,{method:"PATCH",body:JSON.stringify({role:ue})});if(!Ne.ok){const Re=await Ne.json();throw new Error(Re.error||"  ")}G(),C(null)}catch(Ne){alert(Ne.message)}},fe=async(R,ue)=>{if(confirm(ue?"   ?":"   ?"))try{const Ne=await Ae(`${Yt}/api/admin/users/${R}/status`,{method:"PATCH",body:JSON.stringify({isActive:!ue})});if(!Ne.ok){const Re=await Ne.json();throw new Error(Re.error||"  ")}G()}catch(Ne){alert(Ne.message)}},we=async R=>{if(R.preventDefault(),!!Y.email){Q(!0);try{const ue=await Ae(`${Yt}/api/admin/allowed-emails`,{method:"POST",body:JSON.stringify(Y)});if(!ue.ok){const Ne=await ue.json();throw new Error(Ne.error||"  ")}B({email:"",name:"",role:"VIEWER",note:""}),P(!1),ne(),D()}catch(ue){alert(ue.message)}finally{Q(!1)}}},F=async(R,ue)=>{if(confirm(`   ${ue}  ?`))try{const Ne=await Ae(`${Yt}/api/admin/allowed-emails/${R}`,{method:"DELETE"});if(!Ne.ok){const Re=await Ne.json();throw new Error(Re.error||"  ")}ne(),D()}catch(Ne){alert(Ne.message)}};return l?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:" "}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:" ,  "})]})}),j&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[t.jsx(ws,{title:"",value:M.length,icon:""}),t.jsx(ws,{title:"",value:j.users.total,icon:""}),t.jsx(ws,{title:"",value:j.users.active,icon:""}),t.jsx(ws,{title:"",value:j.content.rocks,icon:""}),t.jsx(ws,{title:" ",value:j.content.stories,icon:""})]}),t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsxs("nav",{className:"flex gap-4 overflow-x-auto",children:[t.jsxs("button",{onClick:()=>h("organizations"),className:`pb-3 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${c==="organizations"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[t.jsx(At,{size:18,className:"inline ml-2"})," (",M.length,")"]}),t.jsxs("button",{onClick:()=>h("users"),className:`pb-3 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${c==="users"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[t.jsx(kt,{size:18,className:"inline ml-2"})," (",x.length,")"]}),t.jsxs("button",{onClick:()=>h("allowed"),className:`pb-3 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${c==="allowed"?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[t.jsx(Zt,{size:18,className:"inline ml-2"}),"  (",f.length,")"]})]})}),c==="organizations"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:ie?t.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:xe?" ":" "}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:W.name,onChange:R=>H(R.target.value),placeholder:" ",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t.jsx($0,{size:14,className:"inline ml-1"}),"Slug ( URL) *"]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:"/"}),t.jsx("input",{type:"text",value:W.slug,onChange:R=>v({...W,slug:R.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")}),placeholder:"company-name",required:!0,pattern:"[a-z0-9-]+",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white font-mono text-sm"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" ,   "})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[t.jsx(Zm,{size:14,className:"inline ml-1"})," ()"]}),t.jsxs("div",{className:"flex items-center gap-4",children:[W.logo?t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:W.logo,alt:"Logo preview",className:"w-16 h-16 rounded-xl object-cover border border-gray-200 dark:border-gray-600",onError:R=>{R.target.style.display="none"}}),t.jsx("button",{type:"button",onClick:()=>v({...W,logo:""}),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:""})]}):t.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 dark:bg-gray-700 flex items-center justify-center border border-dashed border-gray-300 dark:border-gray-600",children:t.jsx(At,{className:"w-8 h-8 text-gray-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("input",{type:"url",value:W.logo,onChange:R=>v({...W,logo:R.target.value}),placeholder:"https://example.com/logo.png",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-sm"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" URL    (PNG, JPG)"})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{type:"submit",disabled:A,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[xe?t.jsx(ur,{size:18}):t.jsx(Ze,{size:18}),A?"...":xe?"":" "]}),t.jsx("button",{type:"button",onClick:()=>{ce(!1),Se(null),v({name:"",slug:"",logo:""})},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""})]})]}):t.jsxs("button",{onClick:()=>ce(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[t.jsx(Ze,{size:18}),"  "]})}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:" "})}),M.length===0?t.jsxs("div",{className:"p-8 text-center text-gray-500",children:[t.jsx(At,{size:48,className:"mx-auto mb-4 opacity-30"}),t.jsx("p",{children:"  "}),t.jsx("p",{className:"text-sm mt-2",children:"   "})]}):t.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:M.map(R=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[R.logo?t.jsx("img",{src:R.logo,alt:R.name,className:"w-12 h-12 rounded-xl object-cover"}):t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white text-lg font-bold",children:R.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:R.name}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:["/",R.slug]})]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${R.role==="ADMIN"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":R.role==="MANAGER"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:R.role==="ADMIN"?"":R.role==="MANAGER"?" ":R.role==="MEMBER"?"":""})]}),t.jsx("button",{onClick:()=>me(R),className:"p-2 text-gray-400 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg transition-colors",children:t.jsx(ur,{size:18})})]},R.id))})]})]}),c==="users"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"  "}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"      Google"})]}),O?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"..."}):z?t.jsx("div",{className:"p-8 text-center text-red-500",children:z}):x.length===0?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"   "}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.map(R=>t.jsxs("tr",{className:R.isActive?"":"opacity-50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[R.picture?t.jsx("img",{src:R.picture,alt:R.name,className:"w-8 h-8 rounded-full"}):t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium",children:R.name?.charAt(0)})}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:R.name})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:R.email}),t.jsx("td",{className:"px-4 py-3",children:V===R.id?t.jsx("select",{value:R.role,onChange:ue=>pe(R.id,ue.target.value),onBlur:()=>C(null),autoFocus:!0,className:"text-sm rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700",children:Object.values(re).map(ue=>t.jsx("option",{value:ue,children:Jt[ue]},ue))}):t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium cursor-pointer hover:opacity-80 ${Ea[R.role]}`,onClick:()=>C(R.id),children:Jt[R.role]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${R.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:R.isActive?"":""})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:new Date(R.createdAt).toLocaleDateString("he-IL")}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:()=>fe(R.id,R.isActive),className:`text-sm px-2 py-1 rounded ${R.isActive?"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20":"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20"}`,children:R.isActive?"":""})})]},R.id))})]})})]}),c==="allowed"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:[t.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"   ?"}),t.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"      .     Google,      .   -   .   -    ."})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:k?t.jsxs("form",{onSubmit:we,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" *"}),t.jsx("input",{type:"email",value:Y.email,onChange:R=>B({...Y,email:R.target.value}),placeholder:"user@example.com",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" ()"}),t.jsx("input",{type:"text",value:Y.name,onChange:R=>B({...Y,name:R.target.value}),placeholder:" ",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("select",{value:Y.role,onChange:R=>B({...Y,role:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:Object.values(re).map(R=>t.jsx("option",{value:R,children:Jt[R]},R))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" ()"}),t.jsx("input",{type:"text",value:Y.note,onChange:R=>B({...Y,note:R.target.value}),placeholder:" ",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{type:"submit",disabled:ee,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[t.jsx(Ze,{size:18}),ee?"...":""]}),t.jsx("button",{type:"button",onClick:()=>{P(!1),B({email:"",name:"",role:"VIEWER",note:""})},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:""})]})]}):t.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[t.jsx(Q0,{size:18}),"  "]})}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"  "})}),f.length===0?t.jsxs("div",{className:"p-8 text-center text-gray-500",children:[t.jsx(Zt,{size:48,className:"mx-auto mb-4 opacity-30"}),t.jsx("p",{children:"   "}),t.jsx("p",{className:"text-sm mt-2",children:"     "})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map(R=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Zt,{size:16,className:"text-gray-400"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:R.email})]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:R.name||"-"}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ea[R.role]}`,children:Jt[R.role]})}),t.jsx("td",{className:"px-4 py-3",children:R.isRegistered?t.jsxs("span",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 text-sm",children:[t.jsx(To,{size:16}),""]}):t.jsxs("span",{className:"flex items-center gap-1 text-gray-400 text-sm",children:[t.jsx(Ts,{size:16}),""]})}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:R.note||"-"}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:new Date(R.createdAt).toLocaleDateString("he-IL")}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:()=>F(R.id,R.email),className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 p-2 rounded-lg transition-colors",title:" ",children:t.jsx(Tt,{size:16})})})]},R.id))})]})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:" "}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:Object.values(re).map(R=>t.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Ea[R]}`,children:Jt[R]}),t.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:Vm[R]})]},R))})]})]}):null}function ws({title:s,value:l,icon:o}){return t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:o}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s})]})]})})}function Wp(){const s=Ot(),{isAdmin:l,isManager:o}=zt(),{request:c}=tr(),{currentOrganization:h}=mt(),[x,m]=g.useState("team"),[f,w]=g.useState([]),[M,b]=g.useState(!1),[j,T]=g.useState(null),[O,L]=g.useState({name:"",role:"",capacity:"",email:"",accessRole:"MEMBER"}),[z,E]=g.useState([]),[V,C]=g.useState(!1),[k,P]=g.useState({email:"",name:"",role:"VIEWER",note:""});g.useEffect(()=>{!l&&!o&&s("/dashboard")},[l,o,s]),g.useEffect(()=>{h&&(Y(),ce())},[h?.id]);const Y=async()=>{const A=await c("/api/team",{showToast:!1});A&&Array.isArray(A)&&w(A)},B=async A=>{A.preventDefault();const te=j?`/api/team/${j.id}`:"/api/team";await c(te,{method:j?"PUT":"POST",body:O,successMessage:j?"  ":"  "})&&(ie(),Y())},ee=async A=>{if(!confirm(`  ${A.name}?`))return;await c(`/api/team/${A.id}`,{method:"DELETE",successMessage:"  "})&&Y()},Q=async A=>{await c(`/api/team/${A.id}`,{method:"PUT",body:{...A,isActive:!A.isActive},successMessage:A.isActive?"  ":"  "})&&Y()},ie=()=>{b(!1),T(null),L({name:"",role:"",capacity:"",email:"",accessRole:"MEMBER"})},ce=async()=>{const A=await c("/api/admin/allowed-emails",{showToast:!1});A&&Array.isArray(A)&&E(A)},W=async A=>{A.preventDefault(),await c("/api/admin/allowed-emails",{method:"POST",body:k,successMessage:"  "})&&(C(!1),P({email:"",name:"",role:"VIEWER",note:""}),ce())},v=async A=>{if(!confirm(`  ${A.email} ?`))return;await c(`/api/admin/allowed-emails/${A.id}`,{method:"DELETE",successMessage:"  "})&&ce()};return t.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg",children:t.jsx(R0,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:" "}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"    "})]})]}),t.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl",children:[t.jsxs("button",{onClick:()=>m("team"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-medium transition-all ${x==="team"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(kt,{size:18}),t.jsxs("span",{children:["  (",f.length,")"]})]}),l&&t.jsxs("button",{onClick:()=>m("emails"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-medium transition-all ${x==="emails"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[t.jsx(Zt,{size:18}),t.jsxs("span",{children:["  (",z.length,")"]})]})]}),x==="team"&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(kt,{size:18,className:"text-indigo-500"})," "]}),t.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 transition-colors",children:[t.jsx(Ze,{size:16}),""]})]}),M&&t.jsx("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-100 dark:border-indigo-800",children:t.jsxs("form",{onSubmit:B,className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:" *"}),t.jsx("input",{type:"text",value:O.name,onChange:A=>L({...O,name:A.target.value}),className:"w-full px-3 py-2 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:" *"}),t.jsx("input",{type:"text",value:O.role,onChange:A=>L({...O,role:A.target.value}),className:"w-full px-3 py-2 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{className:"w-24",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:""}),t.jsx("input",{type:"number",value:O.capacity,onChange:A=>L({...O,capacity:A.target.value}),className:"w-full px-3 py-2 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 items-end pt-2 border-t border-indigo-200 dark:border-indigo-700",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsxs("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:[t.jsx(Zt,{size:12,className:"inline ml-1"}),"  ()"]}),t.jsx("input",{type:"email",value:O.email,onChange:A=>L({...O,email:A.target.value}),placeholder:"user@example.com",className:"w-full px-3 py-2 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),O.email&&t.jsxs("div",{className:"w-36",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:" "}),t.jsx("select",{value:O.accessRole,onChange:A=>L({...O,accessRole:A.target.value}),className:"w-full px-3 py-2 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:Object.values(re).map(A=>t.jsx("option",{value:A,children:Jt[A]},A))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700",children:j?"":""}),t.jsx("button",{type:"button",onClick:ie,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 text-sm rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500",children:""})]})]}),O.email&&t.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:"      "})]})}),t.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:f.length===0?t.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[t.jsx(kt,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),t.jsx("p",{children:"  "})]}):f.map(A=>{const te=z.find(xe=>xe.name===A.name||A.user?.email&&xe.email===A.user.email);return t.jsxs("div",{className:`p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 ${A.isActive?"":"opacity-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${A.isActive?"bg-gradient-to-br from-indigo-500 to-purple-500":"bg-gray-400"}`,children:A.name?.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:A.name}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.role}),te&&t.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:te.email})]}),A.capacity&&t.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:[A.capacity," '"]}),te&&t.jsx("span",{className:`text-xs px-2 py-1 rounded ${Ea[te.role]}`,children:Jt[te.role]}),!A.isActive&&t.jsx("span",{className:"text-xs px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded",children:" "})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>{const xe=z.find(Se=>Se.name===A.name||A.user?.email&&Se.email===A.user.email);T(A),L({name:A.name,role:A.role,capacity:A.capacity||"",email:xe?.email||A.user?.email||"",accessRole:xe?.role||"MEMBER"}),b(!0)},className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg",title:"",children:t.jsx(ur,{size:16})}),t.jsx("button",{onClick:()=>Q(A),className:`p-2 rounded-lg ${A.isActive?"text-gray-400 hover:text-orange-600 hover:bg-orange-50 dark:hover:bg-orange-900/20":"text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20"}`,title:A.isActive?"":"",children:A.isActive?t.jsx(G0,{size:16}):t.jsx(H0,{size:16})}),t.jsx("button",{onClick:()=>ee(A),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",title:"",children:t.jsx(Tt,{size:16})})]})]},A.id)})})]}),x==="emails"&&l&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(Zt,{size:18,className:"text-green-500"})," "]}),t.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[t.jsx(Ze,{size:16}),""]})]}),V&&t.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border-b border-green-100 dark:border-green-800",children:t.jsxs("form",{onSubmit:W,className:"flex flex-wrap gap-3 items-end",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:""}),t.jsx("input",{type:"email",value:k.email,onChange:A=>P({...k,email:A.target.value}),className:"w-full px-3 py-2 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:" ()"}),t.jsx("input",{type:"text",value:k.name,onChange:A=>P({...k,name:A.target.value}),className:"w-full px-3 py-2 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"w-32",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:""}),t.jsx("select",{value:k.role,onChange:A=>P({...k,role:A.target.value}),className:"w-full px-3 py-2 text-sm border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:Object.values(re).map(A=>t.jsx("option",{value:A,children:Jt[A]},A))})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700",children:""}),t.jsx("button",{type:"button",onClick:()=>{C(!1),P({email:"",name:"",role:"VIEWER",note:""})},className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 text-sm rounded-lg",children:""})]})]})}),t.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:z.length===0?t.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[t.jsx(Zt,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),t.jsx("p",{children:"  "})]}):z.map(A=>t.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center text-white",children:t.jsx(Zt,{size:18})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:A.email}),A.name&&t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:A.name})]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded ${Ea[A.role]}`,children:Jt[A.role]})]}),t.jsx("button",{onClick:()=>v(A),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",title:"",children:t.jsx(Tt,{size:16})})]},A.id))})]})]})}function qp(){const[s,l]=g.useState([]),[o,c]=g.useState(!0),[h,x]=g.useState(null),{user:m}=Ra(),{request:f}=tr(),w=Ot();g.useEffect(()=>{M()},[]);const M=async()=>{c(!0);try{const j=await f("/api/organizations",{showToast:!1});j&&Array.isArray(j)&&(l(j),j.length===1&&b(j[0]))}catch(j){console.error("Failed to fetch organizations:",j)}finally{c(!1)}},b=async j=>{x(j.id);try{await f("/api/organizations/select",{method:"POST",body:{organizationId:j.id},showToast:!1}),w(`/${j.slug}/dashboard`)}catch(T){console.error("Failed to select organization:",T)}finally{x(null)}};return o?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Xu,{className:"w-12 h-12 text-purple-400 animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-purple-200",children:" ..."})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:t.jsxs("div",{className:"w-full max-w-2xl",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl mb-4 shadow-xl shadow-purple-500/30",children:t.jsx(At,{className:"w-8 h-8 text-white"})}),t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:" "}),t.jsxs("p",{className:"text-purple-200",children:[" ",m?.name,",      "]})]}),s.length===0?t.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 text-center border border-white/10",children:[t.jsx(At,{className:"w-16 h-16 text-purple-300 mx-auto mb-4 opacity-50"}),t.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:" "}),t.jsx("p",{className:"text-purple-200 mb-6",children:"    "}),t.jsxs("button",{onClick:()=>w("/organizations/new"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg",children:[t.jsx(Ze,{className:"w-5 h-5"}),"  "]})]}):t.jsxs("div",{className:"space-y-4",children:[s.map(j=>t.jsx("button",{onClick:()=>b(j),disabled:h===j.id,className:`w-full bg-white/10 backdrop-blur-sm rounded-2xl p-6 text-right border border-white/10 hover:bg-white/20 hover:border-purple-500/50 transition-all group ${h===j.id?"opacity-50 cursor-wait":""}`,children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:j.logo?t.jsx("img",{src:j.logo,alt:j.name,className:"w-full h-full rounded-xl object-cover"}):j.name.charAt(0).toUpperCase()}),t.jsxs("div",{className:"flex-1 text-right",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:j.name}),t.jsx("div",{className:"flex items-center gap-3 text-sm text-purple-200",children:t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${j.role==="ADMIN"?"bg-red-500/20 text-red-300":j.role==="MANAGER"?"bg-yellow-500/20 text-yellow-300":j.role==="MEMBER"?"bg-green-500/20 text-green-300":"bg-gray-500/20 text-gray-300"}`,children:j.role==="ADMIN"?"":j.role==="MANAGER"?" ":j.role==="MEMBER"?" ":""})})]}),t.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:h===j.id?t.jsx(Xu,{className:"w-5 h-5 text-purple-300 animate-spin"}):t.jsx(P0,{className:"w-5 h-5 text-purple-300 group-hover:text-white transition-colors"})})]})},j.id)),t.jsx("button",{onClick:()=>w("/organizations/new"),className:"w-full bg-white/5 backdrop-blur-sm rounded-2xl p-6 text-center border border-dashed border-white/20 hover:bg-white/10 hover:border-purple-500/50 transition-all group",children:t.jsxs("div",{className:"flex items-center justify-center gap-3 text-purple-300 group-hover:text-white",children:[t.jsx(Ze,{className:"w-5 h-5"}),t.jsx("span",{children:"  "})]})})]})]})})}function Hp(){const{currentOrganization:s,refreshOrganizations:l}=mt(),{request:o}=tr(),{addToast:c}=ol(),{isAdmin:h}=zt(),[x,m]=g.useState({name:"",slug:"",logo:""}),[f,w]=g.useState(!1),[M,b]=g.useState(!1),[j,T]=g.useState([]),[O,L]=g.useState(!0);g.useEffect(()=>{s&&(m({name:s.name||"",slug:s.slug||"",logo:s.logo||""}),z())},[s]);const z=async()=>{if(s){L(!0);try{const C=await o(`/api/organizations/${s.id}`,{showToast:!1});C?.members&&T(C.members)}catch(C){console.error("Error fetching members:",C)}finally{L(!1)}}},E=async C=>{if(C.preventDefault(),!(!s||!h)){w(!0);try{await o(`/api/organizations/${s.id}`,{method:"PUT",body:x}),c("  ","success"),l()}catch(k){console.error("Error saving settings:",k),c("  ","error")}finally{w(!1)}}},V=()=>{const C=`${window.location.origin}/${s?.slug}/dashboard`;navigator.clipboard.writeText(C),b(!0),setTimeout(()=>b(!1),2e3),c(" ","success")};return s?h?t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:" "}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"    "})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(At,{className:"w-5 h-5 text-purple-600"})," "]}),t.jsxs("form",{onSubmit:E,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsx("input",{type:"text",value:x.name,onChange:C=>m({...x,name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" URL"}),t.jsxs("div",{className:"flex",children:[t.jsxs("span",{className:"inline-flex items-center px-3 text-sm text-gray-500 bg-gray-100 dark:bg-gray-600 dark:text-gray-400 border border-l-0 border-gray-300 dark:border-gray-600 rounded-r-lg",children:[window.location.origin,"/"]}),t.jsx("input",{type:"text",value:x.slug,onChange:C=>m({...x,slug:C.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-l-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,dir:"ltr"})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"   ,  "})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" (URL)"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"url",value:x.logo,onChange:C=>m({...x,logo:C.target.value}),placeholder:"https://example.com/logo.png",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",dir:"ltr"}),x.logo&&t.jsx("button",{type:"button",onClick:()=>m({...x,logo:""}),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:t.jsx(Tt,{className:"w-5 h-5"})})]}),x.logo&&t.jsxs("div",{className:"mt-3 flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden bg-gray-50 dark:bg-gray-700",children:t.jsx("img",{src:x.logo,alt:"Logo preview",className:"w-full h-full object-cover",onError:C=>{C.target.src="",C.target.alt="Error loading image"}})}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:" "})]})]}),t.jsx("div",{className:"pt-4 flex justify-end",children:t.jsxs("button",{type:"submit",disabled:f,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 transition-all",children:[t.jsx(U0,{className:"w-4 h-4"}),f?"...":" "]})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(rp,{className:"w-5 h-5 text-purple-600"})," "]}),t.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsx($0,{className:"w-5 h-5 text-gray-400"}),t.jsxs("code",{className:"flex-1 text-sm text-gray-600 dark:text-gray-300 font-mono",children:[window.location.origin,"/",s.slug,"/dashboard"]}),t.jsx("button",{onClick:V,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:" ",children:M?t.jsx(Os,{className:"w-5 h-5 text-green-600"}):t.jsx(Xm,{className:"w-5 h-5 text-gray-500"})}),t.jsx("a",{href:`/${s.slug}/dashboard`,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"  ",children:t.jsx(Ym,{className:"w-5 h-5 text-gray-500"})})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(kt,{className:"w-5 h-5 text-purple-600"})," "]}),O?t.jsx("div",{className:"text-center py-4 text-gray-500",children:"..."}):t.jsxs("div",{className:"space-y-3",children:[j.slice(0,5).map(C=>t.jsxs("div",{className:"flex items-center gap-3",children:[C.user?.picture?t.jsx("img",{src:C.user.picture,alt:C.user.name,className:"w-8 h-8 rounded-full"}):t.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white text-sm font-medium",children:C.user?.name?.charAt(0)||"?"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:C.user?.name||"Unknown"}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:C.role==="ADMIN"?"":C.role==="MANAGER"?" ":C.role==="MEMBER"?" ":""})]})]},C.id)),j.length>5&&t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center pt-2",children:["+",j.length-5," "]}),j.length===0&&t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:"  "})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[t.jsx(lp,{className:"w-5 h-5 text-purple-600"})," "]}),t.jsx("div",{className:"aspect-video rounded-lg bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 flex items-center gap-3",children:[x.logo?t.jsx("img",{src:x.logo,alt:"Logo",className:"w-10 h-10 rounded-lg object-cover"}):t.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold",children:x.name.charAt(0)||"?"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:x.name||" "}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["/",x.slug||"slug"]})]})]})})]})]})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(At,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"    "})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(At,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"  "})]})}const Ns="",o0=[{value:"CREATE",label:""},{value:"UPDATE",label:""},{value:"DELETE",label:""},{value:"LOGIN",label:""},{value:"LOGIN_FAILED",label:" "},{value:"EXPORT_CSV",label:" CSV"}],d0=[{value:"*",label:""},{value:"Rock",label:""},{value:"Story",label:" "},{value:"Sprint",label:""},{value:"Objective",label:""},{value:"TeamMember",label:" "},{value:"User",label:""}],Qp=[{value:"ADMIN",label:""},{value:"MANAGER",label:" "},{value:"MEMBER",label:""}];function Gp(){const[s,l]=g.useState([]),[o,c]=g.useState(!0),[h,x]=g.useState(null),[m,f]=g.useState(null),[w,M]=g.useState(!1),[b,j]=g.useState({name:"",description:"",triggerActions:[],triggerEntities:["*"],notifyRoles:["ADMIN"],notifyUserIds:[],channelInApp:!0,channelEmail:!1,channelWebhook:!1,webhookUrl:"",webhookSecret:"",cooldownMinutes:5,isActive:!0});g.useEffect(()=>{T()},[]);const T=async()=>{c(!0);try{const k=await Ae(`${Ns}/api/audit/alerts`);if(k.ok){const P=await k.json();l(Array.isArray(P)?P:[])}}catch{x("   ")}finally{c(!1)}},O=()=>{j({name:"",description:"",triggerActions:[],triggerEntities:["*"],notifyRoles:["ADMIN"],notifyUserIds:[],channelInApp:!0,channelEmail:!1,channelWebhook:!1,webhookUrl:"",webhookSecret:"",cooldownMinutes:5,isActive:!0}),f(null),M(!1)},L=k=>{j({name:k.name||"",description:k.description||"",triggerActions:k.triggerActions||[],triggerEntities:k.triggerEntities||["*"],notifyRoles:k.notifyRoles||["ADMIN"],notifyUserIds:k.notifyUserIds||[],channelInApp:k.channelInApp??!0,channelEmail:k.channelEmail??!1,channelWebhook:k.channelWebhook??!1,webhookUrl:k.webhookUrl||"",webhookSecret:k.webhookSecret||"",cooldownMinutes:k.cooldownMinutes||5,isActive:k.isActive??!0}),f(k),M(!0)},z=async()=>{if(!b.name||b.triggerActions.length===0){alert("      ");return}try{const k=m?`${Ns}/api/audit/alerts/${m.id}`:`${Ns}/api/audit/alerts`,P=await Ae(k,{method:m?"PUT":"POST",body:JSON.stringify(b)});if(!P.ok){const Y=await P.json();throw new Error(Y.error||" ")}O(),T()}catch(k){alert(k.message)}},E=async k=>{if(confirm("    ?"))try{if(!(await Ae(`${Ns}/api/audit/alerts/${k}`,{method:"DELETE"})).ok)throw new Error(" ");T()}catch(P){alert(P.message)}},V=async k=>{try{(await Ae(`${Ns}/api/audit/alerts/${k.id}`,{method:"PUT",body:JSON.stringify({...k,isActive:!k.isActive})})).ok&&T()}catch(P){console.error(P)}},C=(k,P)=>k.includes(P)?k.filter(Y=>Y!==P):[...k,P];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(vo,{className:"w-6 h-6 text-orange-500"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"     "})]})]}),!w&&t.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors",children:[t.jsx(Ze,{size:18})," "]})]}),w&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:m?" ":" "}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"  *"}),t.jsx("input",{type:"text",value:b.name,onChange:k=>j({...b,name:k.target.value}),placeholder:":  ",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{type:"text",value:b.description,onChange:k=>j({...b,description:k.target.value}),placeholder:"   ",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"   *"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:o0.map(k=>t.jsx("button",{type:"button",onClick:()=>j({...b,triggerActions:C(b.triggerActions,k.value)}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${b.triggerActions.includes(k.value)?"bg-orange-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:k.label},k.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),t.jsx("div",{className:"flex flex-wrap gap-2",children:d0.map(k=>t.jsx("button",{type:"button",onClick:()=>{if(k.value==="*")j({...b,triggerEntities:["*"]});else{const P=b.triggerEntities.filter(Y=>Y!=="*");j({...b,triggerEntities:C(P,k.value)})}},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${b.triggerEntities.includes(k.value)?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:k.label},k.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"  "}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Qp.map(k=>t.jsx("button",{type:"button",onClick:()=>j({...b,notifyRoles:C(b.notifyRoles,k.value)}),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${b.notifyRoles.includes(k.value)?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:k.label},k.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:" "}),t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b.channelInApp,onChange:k=>j({...b,channelInApp:k.target.checked}),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx(Ju,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:""})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b.channelEmail,onChange:k=>j({...b,channelEmail:k.target.checked}),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx(Zt,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:""})]}),t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b.channelWebhook,onChange:k=>j({...b,channelWebhook:k.target.checked}),className:"rounded border-gray-300 text-orange-600 focus:ring-orange-500"}),t.jsx(Zu,{size:16,className:"text-gray-500"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Webhook"})]})]})]}),b.channelWebhook&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Webhook URL"}),t.jsx("input",{type:"url",value:b.webhookUrl,onChange:k=>j({...b,webhookUrl:k.target.value}),placeholder:"https://example.com/webhook",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",dir:"ltr"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secret ()"}),t.jsx("input",{type:"password",value:b.webhookSecret,onChange:k=>j({...b,webhookSecret:k.target.value}),placeholder:"optional",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",dir:"ltr"})]})]}),t.jsxs("div",{className:"w-48",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"   ()"}),t.jsx("input",{type:"number",min:"0",max:"1440",value:b.cooldownMinutes,onChange:k=>j({...b,cooldownMinutes:parseInt(k.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-200 dark:border-gray-600",children:[t.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[t.jsx(U0,{size:18}),m?"":""]}),t.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[t.jsx(Bt,{size:18}),""]})]})]})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:o?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"..."}):s.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(vo,{className:"w-12 h-12 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"  "}),t.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"       "})]}):t.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(k=>t.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${k.isActive?"":"opacity-50"}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:k.name}),!k.isActive&&t.jsx("span",{className:"px-2 py-0.5 bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300 text-xs rounded",children:""})]}),k.description&&t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:k.description}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.triggerActions?.map(P=>t.jsx("span",{className:"px-2 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 text-xs rounded",children:o0.find(Y=>Y.value===P)?.label||P},P)),k.triggerEntities?.filter(P=>P!=="*").map(P=>t.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded",children:d0.find(Y=>Y.value===P)?.label||P},P)),k.triggerEntities?.includes("*")&&t.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded",children:" "}),t.jsxs("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs rounded flex items-center gap-1",children:[k.channelInApp&&t.jsx(Ju,{size:10}),k.channelEmail&&t.jsx(Zt,{size:10}),k.channelWebhook&&t.jsx(Zu,{size:10})]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("button",{onClick:()=>V(k),className:`p-2 rounded-lg transition-colors ${k.isActive?"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20":"text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,title:k.isActive?"":"",children:t.jsx(Os,{size:18})}),t.jsx("button",{onClick:()=>L(k),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"",children:t.jsx(W0,{size:18})}),t.jsx("button",{onClick:()=>E(k.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"",children:t.jsx(Tt,{size:18})})]})]})},k.id))})})]})}const io="",c0={CREATE:{icon:Ze,color:"text-green-600 bg-green-100 dark:bg-green-900/30 dark:text-green-400",label:""},UPDATE:{icon:W0,color:"text-blue-600 bg-blue-100 dark:bg-blue-900/30 dark:text-blue-400",label:""},DELETE:{icon:Tt,color:"text-red-600 bg-red-100 dark:bg-red-900/30 dark:text-red-400",label:""},LOGIN:{icon:Ta,color:"text-purple-600 bg-purple-100 dark:bg-purple-900/30 dark:text-purple-400",label:""},LOGOUT:{icon:Ta,color:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-400",label:""},EXPORT:{icon:D0,color:"text-orange-600 bg-orange-100 dark:bg-orange-900/30 dark:text-orange-400",label:""},VIEW:{icon:L0,color:"text-cyan-600 bg-cyan-100 dark:bg-cyan-900/30 dark:text-cyan-400",label:""},DEFAULT:{icon:Qm,color:"text-gray-600 bg-gray-100 dark:bg-gray-700 dark:text-gray-400",label:""}},Kp={Sprint:"",Rock:"",Story:" ",Objective:"",TeamMember:" ",Organization:"",User:"",AllowedEmail:" ",AuditLog:" "};function Xp(){const s=Ot(),{isAdmin:l,isManager:o}=zt(),{currentOrganization:c}=mt(),[h,x]=g.useState("logs"),[m,f]=g.useState([]),[w,M]=g.useState(null),[b,j]=g.useState(!0),[T,O]=g.useState(null),[L,z]=g.useState(null),[E,V]=g.useState(!1),[C,k]=g.useState({search:"",action:"",entityType:"",userId:"",startDate:"",endDate:""}),[P,Y]=g.useState({page:1,limit:50,total:0,totalPages:0});g.useEffect(()=>{!l&&!o&&s(-1)},[l,o,s]);const B=g.useCallback(async()=>{if(c?.id){j(!0),O(null);try{const W=new URLSearchParams({page:P.page.toString(),limit:P.limit.toString()});C.search&&W.append("search",C.search),C.action&&W.append("action",C.action),C.entityType&&W.append("entityType",C.entityType),C.userId&&W.append("userId",C.userId),C.startDate&&W.append("startDate",C.startDate),C.endDate&&W.append("endDate",C.endDate);const v=await Ae(`${io}/api/audit?${W}`);if(!v.ok)throw new Error("  ");const A=await v.json();f(A.logs||[]),Y(te=>({...te,total:A.total||0,totalPages:A.totalPages||1}))}catch(W){O(W.message),console.error("Error fetching audit logs:",W)}finally{j(!1)}}},[c?.id,P.page,P.limit,C]),ee=g.useCallback(async()=>{if(!(!c?.id||!l))try{const W=await Ae(`${io}/api/audit/stats`);if(W.ok){const v=await W.json();M(v)}}catch(W){console.error("Error fetching audit stats:",W)}},[c?.id,l]);g.useEffect(()=>{B(),ee()},[B,ee]);const Q=async()=>{try{const W=new URLSearchParams;C.startDate&&W.append("startDate",C.startDate),C.endDate&&W.append("endDate",C.endDate);const v=await Ae(`${io}/api/audit/export/csv?${W}`);if(!v.ok)throw new Error(" ");const A=await v.blob(),te=window.URL.createObjectURL(A),xe=document.createElement("a");xe.href=te,xe.download=`audit-log-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(xe),xe.click(),xe.remove(),window.URL.revokeObjectURL(te)}catch(W){alert(W.message)}},ie=()=>{k({search:"",action:"",entityType:"",userId:"",startDate:"",endDate:""}),Y(W=>({...W,page:1}))},ce=W=>{const v=W?.split("_")[0]||"DEFAULT";return c0[v]||c0.DEFAULT};return!l&&!o?null:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[t.jsx("span",{className:"text-3xl",children:""})," "]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"    "})]}),h==="logs"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:()=>B(),className:"flex items-center gap-2 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[t.jsx(Yu,{size:18,className:b?"animate-spin":""}),""]}),l&&t.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[t.jsx(D0,{size:18})," CSV"]})]})]}),l&&t.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:t.jsxs("nav",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>x("logs"),className:`pb-3 px-1 border-b-2 font-medium text-sm transition-colors ${h==="logs"?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[t.jsx(bo,{size:18,className:"inline ml-2"}),""]}),t.jsxs("button",{onClick:()=>x("alerts"),className:`pb-3 px-1 border-b-2 font-medium text-sm transition-colors ${h==="alerts"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[t.jsx(vo,{size:18,className:"inline ml-2"})," "]})]})}),h==="alerts"&&l&&t.jsx(Gp,{}),h==="logs"&&t.jsxs(t.Fragment,{children:[w&&l&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsx(Xn,{title:" ",value:w.today||0,icon:"",color:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}),t.jsx(Xn,{title:" ",value:w.thisWeek||0,icon:"",color:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"}),t.jsx(Xn,{title:" ",value:w.activeUsers||0,icon:"",color:"bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800"}),t.jsx(Xn,{title:" ",value:P.total,icon:"",color:"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-800"})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsxs("button",{onClick:()=>V(!E),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(_0,{size:20,className:"text-gray-500"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:" "}),Object.values(C).some(W=>W)&&t.jsx("span",{className:"px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-xs rounded-full",children:" "})]}),E?t.jsx(el,{size:20}):t.jsx(Da,{size:20})]}),E&&t.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsxs("div",{className:"relative",children:[t.jsx(il,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",value:C.search,onChange:W=>k({...C,search:W.target.value}),placeholder:"  , ...",className:"w-full pr-10 pl-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsxs("select",{value:C.action,onChange:W=>k({...C,action:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"CREATE",children:""}),t.jsx("option",{value:"UPDATE",children:""}),t.jsx("option",{value:"DELETE",children:""}),t.jsx("option",{value:"LOGIN",children:""}),t.jsx("option",{value:"LOGOUT",children:""}),t.jsx("option",{value:"EXPORT",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsxs("select",{value:C.entityType,onChange:W=>k({...C,entityType:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"Sprint",children:""}),t.jsx("option",{value:"Rock",children:""}),t.jsx("option",{value:"Story",children:" "}),t.jsx("option",{value:"Objective",children:""}),t.jsx("option",{value:"TeamMember",children:" "}),t.jsx("option",{value:"Organization",children:""}),t.jsx("option",{value:"User",children:""})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{type:"date",value:C.startDate,onChange:W=>k({...C,startDate:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" "}),t.jsx("input",{type:"date",value:C.endDate,onChange:W=>k({...C,endDate:W.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:[t.jsxs("button",{onClick:ie,className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400",children:[t.jsx(Bt,{size:16})," "]}),t.jsx("button",{onClick:()=>{Y(W=>({...W,page:1})),B()},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:" "})]})]})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:b?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(Yu,{className:"w-8 h-8 animate-spin mx-auto text-purple-600 mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:" ..."})]}):T?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(zo,{className:"w-12 h-12 mx-auto text-red-500 mb-4"}),t.jsx("p",{className:"text-red-500 font-medium",children:T}),t.jsx("button",{onClick:B,className:"mt-4 px-4 py-2 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg",children:" "})]}):m.length===0?t.jsxs("div",{className:"p-12 text-center",children:[t.jsx(bo,{className:"w-12 h-12 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"  "}),t.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"   "})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:" "}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:""}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-12"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m.map(W=>{const v=ce(W.action),A=v.icon,te=L===W.id;return t.jsxs(jo.Fragment,{children:[t.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors ${te?"bg-purple-50 dark:bg-purple-900/10":""}`,children:[t.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(z0,{size:14,className:"text-gray-400"}),t.jsx("span",{className:"text-gray-900 dark:text-white",children:new Date(W.createdAt).toLocaleDateString("he-IL")}),t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(W.createdAt).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center text-sm font-medium text-gray-600 dark:text-gray-300",children:W.userName?.charAt(0)||"?"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:W.userName||" "}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:W.userEmail})]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${v.color}`,children:[t.jsx(A,{size:12}),v.label]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:Kp[W.entityType]||W.entityType}),W.entityName&&t.jsx("div",{className:"font-medium text-gray-900 dark:text-white truncate max-w-[200px]",children:W.entityName})]})}),t.jsx("td",{className:"px-4 py-3",children:W.changedFields&&W.changedFields.length>0?t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[W.changedFields.slice(0,3).join(", "),W.changedFields.length>3&&` +${W.changedFields.length-3}`]}):t.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("button",{onClick:()=>z(te?null:W.id),className:"p-1.5 text-gray-400 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg transition-colors",children:te?t.jsx(el,{size:18}):t.jsx(L0,{size:18})})})]}),te&&t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-4 py-4 bg-gray-50 dark:bg-gray-800/50",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[W.oldValues&&Object.keys(W.oldValues).length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[t.jsx("span",{className:"text-red-500",children:""}),"  "]}),t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3 text-sm font-mono overflow-auto max-h-48",children:t.jsx("pre",{className:"text-red-700 dark:text-red-300 whitespace-pre-wrap",children:JSON.stringify(W.oldValues,null,2)})})]}),W.newValues&&Object.keys(W.newValues).length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[t.jsx("span",{className:"text-green-500",children:""}),"  "]}),t.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 text-sm font-mono overflow-auto max-h-48",children:t.jsx("pre",{className:"text-green-700 dark:text-green-300 whitespace-pre-wrap",children:JSON.stringify(W.newValues,null,2)})})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:" "}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"ID:"}),t.jsxs("span",{className:"mr-2 font-mono text-gray-900 dark:text-white text-xs",children:[W.id.slice(0,8),"..."]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Entity ID:"}),t.jsxs("span",{className:"mr-2 font-mono text-gray-900 dark:text-white text-xs",children:[W.entityId?.slice(0,8)||"-","..."]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"IP:"}),t.jsx("span",{className:"mr-2 font-mono text-gray-900 dark:text-white",children:W.ipAddress||"-"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"User Agent:"}),t.jsx("span",{className:"mr-2 text-gray-900 dark:text-white truncate",children:W.userAgent?.slice(0,30)||"-"})]})]})]})]})})})]},W.id)})})]})}),t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",(P.page-1)*P.limit+1," - ",Math.min(P.page*P.limit,P.total),"  ",P.total]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>Y(W=>({...W,page:W.page-1})),disabled:P.page<=1,className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-600",children:""}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",P.page,"  ",P.totalPages]}),t.jsx("button",{onClick:()=>Y(W=>({...W,page:W.page+1})),disabled:P.page>=P.totalPages,className:"px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-600",children:""})]})]})]})})]})]})}function Xn({title:s,value:l,icon:o,color:c}){return t.jsx("div",{className:`rounded-xl p-4 border ${c}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:o}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.toLocaleString()}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s})]})]})})}function Yp(){const s=Ot(),[l,o]=g.useState({name:"",slug:"",logo:""}),[c,h]=g.useState({}),[x,m]=g.useState(!1),[f,w]=g.useState(!1),M=z=>z.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),b=z=>{const E=z.target.value;o(V=>({...V,name:E,slug:f?V.slug:M(E)})),c.name&&h(V=>({...V,name:null}))},j=z=>{const E=z.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"");o(V=>({...V,slug:E})),w(!0),c.slug&&h(V=>({...V,slug:null}))},T=z=>{o(E=>({...E,logo:z.target.value})),c.logo&&h(E=>({...E,logo:null}))},O=()=>{const z={};if(l.name.trim()?l.name.length>100&&(z.name="     100 "):z.name="    ",l.slug.trim()?/^[a-z0-9-]+$/.test(l.slug)?l.slug.length>50&&(z.slug=" URL    50 "):z.slug=" URL      ,  ":z.slug=" URL   ",l.logo&&l.logo.trim())try{new URL(l.logo)}catch{z.logo="    URL "}return h(z),Object.keys(z).length===0},L=async z=>{if(z.preventDefault(),!!O()){m(!0);try{const E=await fetch("/api/organizations",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:l.name.trim(),slug:l.slug.trim(),logo:l.logo.trim()||null})});if(!E.ok){const C=await E.json();C.error?.includes("slug")?h({slug:" URL   ,  "}):h({general:C.error||"  "});return}const V=await E.json();s(`/${V.slug}/dashboard`)}catch(E){console.error("Error creating organization:",E),h({general:"  "})}finally{m(!1)}}};return t.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900",children:[t.jsx("div",{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-indigo-500/30 rounded-full blur-3xl animate-pulse"}),t.jsx("div",{className:"absolute bottom-1/4 left-1/4 w-96 h-96 bg-cyan-500/30 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),t.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,backgroundSize:"50px 50px"}})]}),t.jsx("div",{className:"absolute top-6 right-6 z-20",children:t.jsxs(It,{to:"/no-organization",className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-xl text-white text-sm transition-all border border-white/20",children:[t.jsx("span",{children:""}),t.jsx(Ao,{size:16})]})}),t.jsxs("div",{className:"relative z-10 min-h-screen flex",children:[t.jsxs("div",{className:"hidden lg:flex lg:w-1/2 flex-col justify-center p-16 text-white",children:[t.jsxs("div",{className:"animate-slide-in-up",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-cyan-500 rounded-2xl",children:t.jsx(At,{className:"w-8 h-8"})}),t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-white to-indigo-200 bg-clip-text text-transparent",children:"  "})]}),t.jsx("p",{className:"text-xl text-indigo-200 mb-12",children:"       "})]}),t.jsx("div",{className:"space-y-6",children:[{icon:kt,title:" ",desc:"     "},{icon:Xr,title:" ",desc:" ,   "},{icon:zs,title:"",desc:"     "},{icon:V0,title:"",desc:"      "}].map((z,E)=>t.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 backdrop-blur-sm border border-white/10 hover:bg-white/10 transition-all duration-300 animate-slide-in-up",style:{animationDelay:`${.2+E*.1}s`},children:[t.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-indigo-500 to-cyan-500",children:t.jsx(z.icon,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white",children:z.title}),t.jsx("p",{className:"text-sm text-indigo-200",children:z.desc})]})]},z.title))})]}),t.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:t.jsxs("div",{className:"w-full max-w-md animate-scale-in",children:[c.general&&t.jsx("div",{className:"mb-6 p-4 rounded-2xl border backdrop-blur-xl bg-red-500/20 border-red-500/30 animate-shake",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ca,{className:"w-5 h-5 text-red-300"}),t.jsx("p",{className:"text-red-200",children:c.general})]})}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl p-8 border border-white/20 shadow-2xl",children:[t.jsxs("div",{className:"lg:hidden text-center mb-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-500 to-cyan-500 rounded-2xl mb-4 shadow-lg",children:t.jsx(At,{className:"w-8 h-8 text-white"})}),t.jsx("h1",{className:"text-3xl font-bold text-white",children:"  "})]}),t.jsxs("div",{className:"text-center mb-8 hidden lg:block",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" ! "}),t.jsx("p",{className:"text-indigo-200",children:"     "})]}),t.jsxs("form",{onSubmit:L,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:"  *"}),t.jsx("input",{type:"text",value:l.name,onChange:b,placeholder:":   ",className:`w-full px-4 py-3 bg-white/10 border rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 transition-all ${c.name?"border-red-500/50 focus:ring-red-500/50":"border-white/20 focus:ring-indigo-500/50 focus:border-indigo-500/50"}`,dir:"rtl"}),c.name&&t.jsxs("p",{className:"mt-2 text-sm text-red-300 flex items-center gap-1",children:[t.jsx(Ca,{size:14}),c.name]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:" URL *"}),t.jsx("div",{className:"relative",children:t.jsx("input",{type:"text",value:l.slug,onChange:j,placeholder:"company-name",className:`w-full px-4 py-3 bg-white/10 border rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 transition-all font-mono text-left ${c.slug?"border-red-500/50 focus:ring-red-500/50":"border-white/20 focus:ring-indigo-500/50 focus:border-indigo-500/50"}`,dir:"ltr"})}),t.jsxs("p",{className:"mt-2 text-xs text-indigo-300",children:[" : ",t.jsxs("span",{className:"font-mono bg-white/10 px-2 py-0.5 rounded",children:["/",l.slug||"your-org","/dashboard"]})]}),c.slug&&t.jsxs("p",{className:"mt-2 text-sm text-red-300 flex items-center gap-1",children:[t.jsx(Ca,{size:14}),c.slug]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-indigo-200 mb-2",children:" ()"}),t.jsx("input",{type:"url",value:l.logo,onChange:T,placeholder:"https://example.com/logo.png",className:`w-full px-4 py-3 bg-white/10 border rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 transition-all font-mono text-left ${c.logo?"border-red-500/50 focus:ring-red-500/50":"border-white/20 focus:ring-indigo-500/50 focus:border-indigo-500/50"}`,dir:"ltr"}),c.logo&&t.jsxs("p",{className:"mt-2 text-sm text-red-300 flex items-center gap-1",children:[t.jsx(Ca,{size:14}),c.logo]})]}),t.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-indigo-500 to-cyan-500 hover:from-indigo-600 hover:to-cyan-600 rounded-xl text-white font-semibold text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:x?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),t.jsx("span",{children:" ..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Os,{className:"w-5 h-5"}),t.jsx("span",{children:" "})]})})]}),t.jsxs("div",{className:"flex items-center gap-4 my-6",children:[t.jsx("div",{className:"flex-1 h-px bg-white/20"}),t.jsx("span",{className:"text-indigo-200 text-sm",children:""}),t.jsx("div",{className:"flex-1 h-px bg-white/20"})]}),t.jsx("p",{className:"text-center text-sm text-indigo-200",children:"  ,     "})]})]})})]})]})}function u0(s){return s?s.startsWith("#")?s:`#${s}`:""}function Jp(){const{request:s,loading:l}=tr(),{isAdmin:o}=zt(),{currentOrganization:c}=mt(),[h,x]=g.useState([]),[m,f]=g.useState(!1),[w,M]=g.useState(""),[b,j]=g.useState(!1),[T,O]=g.useState(null),[L,z]=g.useState({name:"",color:"#7C3AED",isActive:!0}),E=async()=>{const ee=await s(`/api/labels${m?"?includeInactive=true":""}`,{showToast:!1});Array.isArray(ee)&&x(ee)};g.useEffect(()=>{!o||!c?.id||E()},[o,c?.id,m]);const V=g.useMemo(()=>{const B=w.trim().toLowerCase();return B?h.filter(ee=>(ee.name||"").toLowerCase().includes(B)):h},[h,w]),C=()=>{O(null),z({name:"",color:"#7C3AED",isActive:!0}),j(!0)},k=B=>{O(B),z({name:B.name||"",color:u0(B.color)||"#7C3AED",isActive:B.isActive!==!1}),j(!0)},P=async B=>{if(B.preventDefault(),!L.name.trim())return;const ee={name:L.name.trim(),color:L.color||null,isActive:!!L.isActive};(T?await s(`/api/labels/${T.id}`,{method:"PUT",body:ee}):await s("/api/labels",{method:"POST",body:ee}))&&(j(!1),await E())},Y=async B=>{if(!confirm('  ? (  ")'))return;await s(`/api/labels/${B.id}`,{method:"DELETE"})&&await E()};return o?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(q0,{className:"text-purple-600"}),""]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"    "})]}),t.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg",children:[t.jsx(Ze,{size:18})," "]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-4 border border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row gap-3 items-start sm:items-center",children:[t.jsx("input",{value:w,onChange:B=>M(B.target.value),placeholder:" ...",className:"w-full sm:w-72 px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[t.jsx("input",{type:"checkbox",checked:m,onChange:B=>f(B.target.checked)}),"  "]})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:t.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[V.map(B=>t.jsxs("div",{className:"p-4 flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"min-w-0 flex items-center gap-3",children:[t.jsx("span",{className:"w-3.5 h-3.5 rounded-full border border-gray-200 dark:border-gray-700",style:{backgroundColor:u0(B.color)||"#CBD5E1"}}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:`font-semibold truncate ${B.isActive?"text-gray-900 dark:text-white":"text-gray-400 line-through"}`,children:B.name}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:B.color||""})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>k(B),className:"px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",title:"",children:t.jsx(ur,{size:16})}),t.jsx("button",{onClick:()=>Y(B),className:"px-3 py-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",title:"",children:t.jsx(Tt,{size:16})})]})]},B.id)),V.length===0&&t.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"  "})]})}),b&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:T?" ":" "}),t.jsx("button",{onClick:()=>j(!1),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700",children:t.jsx(Bt,{size:18})})]}),t.jsxs("form",{onSubmit:P,className:"p-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{value:L.name,onChange:B=>z(ee=>({...ee,name:B.target.value})),className:"w-full px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",required:!0})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:""}),t.jsx("input",{type:"color",value:L.color||"#7C3AED",onChange:B=>z(ee=>({...ee,color:B.target.value})),className:"h-10 w-16 p-1 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"})]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 mt-6",children:[t.jsx("input",{type:"checkbox",checked:!!L.isActive,onChange:B=>z(ee=>({...ee,isActive:B.target.checked}))}),""]})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[t.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-700",children:""}),t.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white disabled:opacity-50",children:""})]})]})]})})]}):t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:"    ."})})}function Do(){return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin"}),t.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-r-blue-500 rounded-full animate-spin",style:{animationDuration:"1.5s"}})]}),t.jsx("p",{className:"mt-6 text-purple-200 font-medium animate-pulse",children:"..."})]})})}function Zp(){const s=Ot();return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:t.jsxs("div",{className:"text-center max-w-md",children:[t.jsx("div",{className:"text-6xl mb-6",children:""}),t.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:" "}),t.jsx("p",{className:"text-purple-200 mb-8",children:"    .        ."}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>s("/create-organization"),className:"w-full px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg",children:"  "}),t.jsx("button",{onClick:()=>{fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.href="/"},className:"w-full px-6 py-3 bg-white/10 text-white rounded-xl hover:bg-white/20 transition-all",children:""})]})]})})}function ef(){const[s,l]=g.useState([]),[o,c]=g.useState(!0),[h,x]=g.useState(!1),[m,f]=g.useState({name:"",slug:"",logo:""}),[w,M]=g.useState(!1),b=Ot(),j=()=>{fetch("/api/super-admin/organizations",{credentials:"include"}).then(O=>O.json()).then(O=>{l(Array.isArray(O)?O:[]),c(!1)}).catch(()=>c(!1))};g.useEffect(()=>{j()},[]);const T=async O=>{if(O.preventDefault(),!(!m.name||!m.slug)){M(!0);try{const L=await fetch("/api/super-admin/organizations",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(m)});if(L.ok)x(!1),f({name:"",slug:"",logo:""}),j();else{const z=await L.json();alert(z.error||"  ")}}catch{alert("  ")}finally{M(!1)}}};return o?t.jsx(Do,{}):t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:[t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:" Super Admin"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"   "})]}),t.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg shadow-green-500/25 font-medium",children:[t.jsx("span",{className:"text-xl",children:"+"}),t.jsx("span",{children:" "})]})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.length}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:""})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.reduce((O,L)=>O+(L._count?.members||0),0)}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:""})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.reduce((O,L)=>O+(L._count?.rocks||0),0)}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:""})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.reduce((O,L)=>O+(L._count?.stories||0),0)}),t.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:" "})]})]}),t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(O=>t.jsxs("div",{onClick:()=>b(`/${O.slug}/dashboard`),className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg hover:border-purple-300 dark:hover:border-purple-600 transition-all",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[O.logo?t.jsx("img",{src:O.logo,alt:O.name,className:"w-12 h-12 rounded-xl object-cover"}):t.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold",children:O.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:O.name}),t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["/",O.slug]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[t.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-2",children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:O._count?.members||0}),t.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:""})]}),t.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-2",children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:O._count?.rocks||0}),t.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:""})]}),t.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-2",children:[t.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:O._count?.stories||0}),t.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:" "})]})]})]},O.id))}),s.length===0&&t.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700",children:[t.jsx("div",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:" "}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"    "}),t.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all",children:"  "})]})]}),h&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"  "}),t.jsxs("form",{onSubmit:T,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["  ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:m.name,onChange:O=>f({...m,name:O.target.value}),placeholder:":  ",className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[" URL (slug) ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex",children:[t.jsx("span",{className:"inline-flex items-center px-3 text-sm text-gray-500 bg-gray-100 dark:bg-gray-600 border border-l-0 dark:border-gray-600 rounded-r-xl",children:"sprints.onrender.com/"}),t.jsx("input",{type:"text",value:m.slug,onChange:O=>f({...m,slug:O.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),placeholder:"my-company",className:"flex-1 px-4 py-2.5 border dark:border-gray-600 rounded-l-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",required:!0,dir:"ltr"})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"   ,  "})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:" (URL)"}),t.jsx("input",{type:"url",value:m.logo,onChange:O=>f({...m,logo:O.target.value}),placeholder:"https://example.com/logo.png",className:"w-full px-4 py-2.5 border dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",dir:"ltr"})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:()=>{x(!1),f({name:"",slug:"",logo:""})},className:"flex-1 px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700",children:""}),t.jsx("button",{type:"submit",disabled:w||!m.name||!m.slug,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 disabled:opacity-50",children:w?"...":" "})]})]})]})})]})}g.createContext(null);function tf(){const[s,l]=g.useState(null),[o,c]=g.useState(!0);g.useEffect(()=>{fetch("/api/auth/me",{credentials:"include"}).then(x=>x.json()).then(x=>{l(x.user),c(!1)}).catch(()=>{l(null),c(!1)})},[]);const h=async()=>{await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),l(null)};return o?t.jsx(Qu,{children:t.jsx(Do,{})}):t.jsx(Qu,{children:t.jsx(Cp,{children:t.jsx(A0.Provider,{value:{user:s,setUser:l,loading:o,logout:h},children:t.jsx(Um,{children:t.jsx(zm,{children:t.jsxs(Nm,{children:[t.jsx($e,{path:"/",element:s?t.jsx(Xt,{to:oo(s),replace:!0}):t.jsx(hp,{})}),t.jsx($e,{path:"/login",element:s?t.jsx(Xt,{to:oo(s),replace:!0}):t.jsx(gp,{})}),t.jsx($e,{path:"/no-organization",element:s?t.jsx(Zp,{}):t.jsx(Xt,{to:"/login",replace:!0})}),t.jsx($e,{path:"/select-organization",element:s?t.jsx(qp,{}):t.jsx(Xt,{to:"/login",replace:!0})}),t.jsx($e,{path:"/create-organization",element:s?t.jsx(Yp,{}):t.jsx(Xt,{to:"/login",replace:!0})}),t.jsx($e,{path:"/super-admin",element:s?.isSuperAdmin?t.jsx(ef,{}):t.jsx(Xt,{to:"/",replace:!0})}),t.jsxs($e,{path:"/:slug",element:s?t.jsx(up,{}):t.jsx(Xt,{to:"/login",replace:!0}),children:[t.jsx($e,{index:!0,element:t.jsx(Xt,{to:"dashboard",replace:!0})}),t.jsx($e,{path:"dashboard",element:t.jsx(bp,{})}),t.jsx($e,{path:"objectives",element:t.jsx(Ap,{})}),t.jsx($e,{path:"rocks",element:t.jsx(Op,{})}),t.jsx($e,{path:"sprints",element:t.jsx(zp,{})}),t.jsx($e,{path:"sprints/:id",element:t.jsx(Rp,{})}),t.jsx($e,{path:"stories",element:t.jsx(Lp,{})}),t.jsx($e,{path:"tasks",element:t.jsx(Fp,{})}),t.jsx($e,{path:"team",element:t.jsx(Up,{})}),t.jsx($e,{path:"teams",element:t.jsx(Bp,{})}),t.jsx($e,{path:"labels",element:t.jsx(Jp,{})}),t.jsx($e,{path:"admin",element:t.jsx(Vp,{})}),t.jsx($e,{path:"data",element:t.jsx(Wp,{})}),t.jsx($e,{path:"settings",element:t.jsx(Hp,{})}),t.jsx($e,{path:"audit",element:t.jsx(Xp,{})})]}),t.jsx($e,{path:"/dashboard",element:s?t.jsx(rf,{user:s}):t.jsx(Xt,{to:"/login",replace:!0})}),t.jsx($e,{path:"*",element:t.jsx(Xt,{to:s?oo(s):"/",replace:!0})})]})})})})})})}function oo(s){return s?s.isSuperAdmin?"/super-admin":s.organizationCount===0?"/no-organization":s.organizationCount===1&&s.organizations?.[0]?.slug?`/${s.organizations[0].slug}/dashboard`:"/select-organization":"/"}function rf({user:s}){const l=Ot();return g.useEffect(()=>{s?.isSuperAdmin?l("/super-admin",{replace:!0}):s?.organizationCount===0?l("/no-organization",{replace:!0}):s?.organizationCount===1&&s?.organizations?.[0]?.slug?l(`/${s.organizations[0].slug}/dashboard`,{replace:!0}):l("/select-organization",{replace:!0})},[s,l]),t.jsx(Do,{})}const af=new Ig({defaultOptions:{queries:{staleTime:30*1e3,gcTime:300*1e3,retry:1,refetchOnWindowFocus:!1}}});ag.createRoot(document.getElementById("root")).render(t.jsx(jo.StrictMode,{children:t.jsx(Tg,{client:af,children:t.jsx(tf,{})})}));
